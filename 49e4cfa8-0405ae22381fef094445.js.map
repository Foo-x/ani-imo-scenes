{"version":3,"file":"49e4cfa8-0405ae22381fef094445.js","mappings":"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","sources":["webpack://ani-imo-scenes/./node_modules/dexie/dist/modern/dexie.mjs"],"sourcesContent":["import _toConsumableArray from \"/home/foox/workspace/node/ani-imo-scenes/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/home/foox/workspace/node/ani-imo-scenes/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/foox/workspace/node/ani-imo-scenes/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/foox/workspace/node/ani-imo-scenes/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _slicedToArray from \"/home/foox/workspace/node/ani-imo-scenes/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport \"core-js/modules/es.promise.finally.js\";\n\n/*\n * Dexie.js - a minimalistic wrapper for IndexedDB\n * ===============================================\n *\n * By David Fahlander, david.fahlander@gmail.com\n *\n * Version 3.2.0-beta-2, Mon Jul 12 2021\n *\n * http://dexie.org\n *\n * Apache License Version 2.0, January 2004, http://www.apache.org/licenses/\n */\nvar _global = typeof globalThis !== 'undefined' ? globalThis : typeof self !== 'undefined' ? self : typeof window !== 'undefined' ? window : global;\n\nvar keys = Object.keys;\nvar isArray = Array.isArray;\n\nif (typeof Promise !== 'undefined' && !_global.Promise) {\n  _global.Promise = Promise;\n}\n\nfunction extend(obj, extension) {\n  if (typeof extension !== 'object') return obj;\n  keys(extension).forEach(function (key) {\n    obj[key] = extension[key];\n  });\n  return obj;\n}\n\nvar getProto = Object.getPrototypeOf;\nvar _hasOwn = {}.hasOwnProperty;\n\nfunction hasOwn(obj, prop) {\n  return _hasOwn.call(obj, prop);\n}\n\nfunction props(proto, extension) {\n  if (typeof extension === 'function') extension = extension(getProto(proto));\n  (typeof Reflect === \"undefined\" ? keys : Reflect.ownKeys)(extension).forEach(function (key) {\n    setProp(proto, key, extension[key]);\n  });\n}\n\nvar defineProperty = Object.defineProperty;\n\nfunction setProp(obj, prop, functionOrGetSet, options) {\n  defineProperty(obj, prop, extend(functionOrGetSet && hasOwn(functionOrGetSet, \"get\") && typeof functionOrGetSet.get === 'function' ? {\n    get: functionOrGetSet.get,\n    set: functionOrGetSet.set,\n    configurable: true\n  } : {\n    value: functionOrGetSet,\n    configurable: true,\n    writable: true\n  }, options));\n}\n\nfunction derive(Child) {\n  return {\n    from: function from(Parent) {\n      Child.prototype = Object.create(Parent.prototype);\n      setProp(Child.prototype, \"constructor\", Child);\n      return {\n        extend: props.bind(null, Child.prototype)\n      };\n    }\n  };\n}\n\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\nfunction getPropertyDescriptor(obj, prop) {\n  var pd = getOwnPropertyDescriptor(obj, prop);\n  var proto;\n  return pd || (proto = getProto(obj)) && getPropertyDescriptor(proto, prop);\n}\n\nvar _slice = [].slice;\n\nfunction slice(args, start, end) {\n  return _slice.call(args, start, end);\n}\n\nfunction override(origFunc, overridedFactory) {\n  return overridedFactory(origFunc);\n}\n\nfunction assert(b) {\n  if (!b) throw new Error(\"Assertion Failed\");\n}\n\nfunction asap$1(fn) {\n  if (_global.setImmediate) setImmediate(fn);else setTimeout(fn, 0);\n}\n\nfunction arrayToObject(array, extractor) {\n  return array.reduce(function (result, item, i) {\n    var nameAndValue = extractor(item, i);\n    if (nameAndValue) result[nameAndValue[0]] = nameAndValue[1];\n    return result;\n  }, {});\n}\n\nfunction tryCatch(fn, onerror, args) {\n  try {\n    fn.apply(null, args);\n  } catch (ex) {\n    onerror && onerror(ex);\n  }\n}\n\nfunction getByKeyPath(obj, keyPath) {\n  if (hasOwn(obj, keyPath)) return obj[keyPath];\n  if (!keyPath) return obj;\n\n  if (typeof keyPath !== 'string') {\n    var rv = [];\n\n    for (var i = 0, l = keyPath.length; i < l; ++i) {\n      var val = getByKeyPath(obj, keyPath[i]);\n      rv.push(val);\n    }\n\n    return rv;\n  }\n\n  var period = keyPath.indexOf('.');\n\n  if (period !== -1) {\n    var innerObj = obj[keyPath.substr(0, period)];\n    return innerObj === undefined ? undefined : getByKeyPath(innerObj, keyPath.substr(period + 1));\n  }\n\n  return undefined;\n}\n\nfunction setByKeyPath(obj, keyPath, value) {\n  if (!obj || keyPath === undefined) return;\n  if ('isFrozen' in Object && Object.isFrozen(obj)) return;\n\n  if (typeof keyPath !== 'string' && 'length' in keyPath) {\n    assert(typeof value !== 'string' && 'length' in value);\n\n    for (var i = 0, l = keyPath.length; i < l; ++i) {\n      setByKeyPath(obj, keyPath[i], value[i]);\n    }\n  } else {\n    var period = keyPath.indexOf('.');\n\n    if (period !== -1) {\n      var currentKeyPath = keyPath.substr(0, period);\n      var remainingKeyPath = keyPath.substr(period + 1);\n      if (remainingKeyPath === \"\") {\n        if (value === undefined) {\n          if (isArray(obj) && !isNaN(parseInt(currentKeyPath))) obj.splice(currentKeyPath, 1);else delete obj[currentKeyPath];\n        } else obj[currentKeyPath] = value;\n      } else {\n        var innerObj = obj[currentKeyPath];\n        if (!innerObj) innerObj = obj[currentKeyPath] = {};\n        setByKeyPath(innerObj, remainingKeyPath, value);\n      }\n    } else {\n      if (value === undefined) {\n        if (isArray(obj) && !isNaN(parseInt(keyPath))) obj.splice(keyPath, 1);else delete obj[keyPath];\n      } else obj[keyPath] = value;\n    }\n  }\n}\n\nfunction delByKeyPath(obj, keyPath) {\n  if (typeof keyPath === 'string') setByKeyPath(obj, keyPath, undefined);else if ('length' in keyPath) [].map.call(keyPath, function (kp) {\n    setByKeyPath(obj, kp, undefined);\n  });\n}\n\nfunction shallowClone(obj) {\n  var rv = {};\n\n  for (var m in obj) {\n    if (hasOwn(obj, m)) rv[m] = obj[m];\n  }\n\n  return rv;\n}\n\nvar concat = [].concat;\n\nfunction flatten(a) {\n  return concat.apply([], a);\n}\n\nvar intrinsicTypeNames = \"Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey\".split(',').concat(flatten([8, 16, 32, 64].map(function (num) {\n  return [\"Int\", \"Uint\", \"Float\"].map(function (t) {\n    return t + num + \"Array\";\n  });\n}))).filter(function (t) {\n  return _global[t];\n});\nvar intrinsicTypes = intrinsicTypeNames.map(function (t) {\n  return _global[t];\n});\narrayToObject(intrinsicTypeNames, function (x) {\n  return [x, true];\n});\nvar circularRefs = null;\n\nfunction deepClone(any) {\n  circularRefs = typeof WeakMap !== 'undefined' && new WeakMap();\n  var rv = innerDeepClone(any);\n  circularRefs = null;\n  return rv;\n}\n\nfunction innerDeepClone(any) {\n  if (!any || typeof any !== 'object') return any;\n  var rv = circularRefs && circularRefs.get(any);\n  if (rv) return rv;\n\n  if (isArray(any)) {\n    rv = [];\n    circularRefs && circularRefs.set(any, rv);\n\n    for (var i = 0, l = any.length; i < l; ++i) {\n      rv.push(innerDeepClone(any[i]));\n    }\n  } else if (intrinsicTypes.indexOf(any.constructor) >= 0) {\n    rv = any;\n  } else {\n    var proto = getProto(any);\n    rv = proto === Object.prototype ? {} : Object.create(proto);\n    circularRefs && circularRefs.set(any, rv);\n\n    for (var prop in any) {\n      if (hasOwn(any, prop)) {\n        rv[prop] = innerDeepClone(any[prop]);\n      }\n    }\n  }\n\n  return rv;\n}\n\nvar _ref = {},\n    toString = _ref.toString;\n\nfunction toStringTag(o) {\n  return toString.call(o).slice(8, -1);\n}\n\nvar iteratorSymbol = typeof Symbol !== 'undefined' ? Symbol.iterator : '@@iterator';\nvar getIteratorOf = typeof iteratorSymbol === \"symbol\" ? function (x) {\n  var i;\n  return x != null && (i = x[iteratorSymbol]) && i.apply(x);\n} : function () {\n  return null;\n};\nvar NO_CHAR_ARRAY = {};\n\nfunction getArrayOf(arrayLike) {\n  var i, a, x, it;\n\n  if (arguments.length === 1) {\n    if (isArray(arrayLike)) return arrayLike.slice();\n    if (this === NO_CHAR_ARRAY && typeof arrayLike === 'string') return [arrayLike];\n\n    if (it = getIteratorOf(arrayLike)) {\n      a = [];\n\n      while (x = it.next(), !x.done) {\n        a.push(x.value);\n      }\n\n      return a;\n    }\n\n    if (arrayLike == null) return [arrayLike];\n    i = arrayLike.length;\n\n    if (typeof i === 'number') {\n      a = new Array(i);\n\n      while (i--) {\n        a[i] = arrayLike[i];\n      }\n\n      return a;\n    }\n\n    return [arrayLike];\n  }\n\n  i = arguments.length;\n  a = new Array(i);\n\n  while (i--) {\n    a[i] = arguments[i];\n  }\n\n  return a;\n}\n\nvar isAsyncFunction = typeof Symbol !== 'undefined' ? function (fn) {\n  return fn[Symbol.toStringTag] === 'AsyncFunction';\n} : function () {\n  return false;\n};\nvar debug = typeof location !== 'undefined' && /^(http|https):\\/\\/(localhost|127\\.0\\.0\\.1)/.test(location.href);\n\nfunction setDebug(value, filter) {\n  debug = value;\n  libraryFilter = filter;\n}\n\nvar libraryFilter = function libraryFilter() {\n  return true;\n};\n\nvar NEEDS_THROW_FOR_STACK = !new Error(\"\").stack;\n\nfunction getErrorWithStack() {\n  if (NEEDS_THROW_FOR_STACK) try {\n    getErrorWithStack.arguments;\n    throw new Error();\n  } catch (e) {\n    return e;\n  }\n  return new Error();\n}\n\nfunction prettyStack(exception, numIgnoredFrames) {\n  var stack = exception.stack;\n  if (!stack) return \"\";\n  numIgnoredFrames = numIgnoredFrames || 0;\n  if (stack.indexOf(exception.name) === 0) numIgnoredFrames += (exception.name + exception.message).split('\\n').length;\n  return stack.split('\\n').slice(numIgnoredFrames).filter(libraryFilter).map(function (frame) {\n    return \"\\n\" + frame;\n  }).join('');\n}\n\nvar dexieErrorNames = ['Modify', 'Bulk', 'OpenFailed', 'VersionChange', 'Schema', 'Upgrade', 'InvalidTable', 'MissingAPI', 'NoSuchDatabase', 'InvalidArgument', 'SubTransaction', 'Unsupported', 'Internal', 'DatabaseClosed', 'PrematureCommit', 'ForeignAwait'];\nvar idbDomErrorNames = ['Unknown', 'Constraint', 'Data', 'TransactionInactive', 'ReadOnly', 'Version', 'NotFound', 'InvalidState', 'InvalidAccess', 'Abort', 'Timeout', 'QuotaExceeded', 'Syntax', 'DataClone'];\nvar errorList = dexieErrorNames.concat(idbDomErrorNames);\nvar defaultTexts = {\n  VersionChanged: \"Database version changed by other database connection\",\n  DatabaseClosed: \"Database has been closed\",\n  Abort: \"Transaction aborted\",\n  TransactionInactive: \"Transaction has already completed or failed\",\n  MissingAPI: \"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb\"\n};\n\nfunction DexieError(name, msg) {\n  this._e = getErrorWithStack();\n  this.name = name;\n  this.message = msg;\n}\n\nderive(DexieError).from(Error).extend({\n  stack: {\n    get: function get() {\n      return this._stack || (this._stack = this.name + \": \" + this.message + prettyStack(this._e, 2));\n    }\n  },\n  toString: function toString() {\n    return this.name + \": \" + this.message;\n  }\n});\n\nfunction getMultiErrorMessage(msg, failures) {\n  return msg + \". Errors: \" + Object.keys(failures).map(function (key) {\n    return failures[key].toString();\n  }).filter(function (v, i, s) {\n    return s.indexOf(v) === i;\n  }).join('\\n');\n}\n\nfunction ModifyError(msg, failures, successCount, failedKeys) {\n  this._e = getErrorWithStack();\n  this.failures = failures;\n  this.failedKeys = failedKeys;\n  this.successCount = successCount;\n  this.message = getMultiErrorMessage(msg, failures);\n}\n\nderive(ModifyError).from(DexieError);\n\nfunction BulkError(msg, failures) {\n  this._e = getErrorWithStack();\n  this.name = \"BulkError\";\n  this.failures = Object.keys(failures).map(function (pos) {\n    return failures[pos];\n  });\n  this.failuresByPos = failures;\n  this.message = getMultiErrorMessage(msg, failures);\n}\n\nderive(BulkError).from(DexieError);\nvar errnames = errorList.reduce(function (obj, name) {\n  return obj[name] = name + \"Error\", obj;\n}, {});\nvar BaseException = DexieError;\nvar exceptions = errorList.reduce(function (obj, name) {\n  var fullName = name + \"Error\";\n\n  function DexieError(msgOrInner, inner) {\n    this._e = getErrorWithStack();\n    this.name = fullName;\n\n    if (!msgOrInner) {\n      this.message = defaultTexts[name] || fullName;\n      this.inner = null;\n    } else if (typeof msgOrInner === 'string') {\n      this.message = \"\".concat(msgOrInner).concat(!inner ? '' : '\\n ' + inner);\n      this.inner = inner || null;\n    } else if (typeof msgOrInner === 'object') {\n      this.message = \"\".concat(msgOrInner.name, \" \").concat(msgOrInner.message);\n      this.inner = msgOrInner;\n    }\n  }\n\n  derive(DexieError).from(BaseException);\n  obj[name] = DexieError;\n  return obj;\n}, {});\nexceptions.Syntax = SyntaxError;\nexceptions.Type = TypeError;\nexceptions.Range = RangeError;\nvar exceptionMap = idbDomErrorNames.reduce(function (obj, name) {\n  obj[name + \"Error\"] = exceptions[name];\n  return obj;\n}, {});\n\nfunction mapError(domError, message) {\n  if (!domError || domError instanceof DexieError || domError instanceof TypeError || domError instanceof SyntaxError || !domError.name || !exceptionMap[domError.name]) return domError;\n  var rv = new exceptionMap[domError.name](message || domError.message, domError);\n\n  if (\"stack\" in domError) {\n    setProp(rv, \"stack\", {\n      get: function get() {\n        return this.inner.stack;\n      }\n    });\n  }\n\n  return rv;\n}\n\nvar fullNameExceptions = errorList.reduce(function (obj, name) {\n  if ([\"Syntax\", \"Type\", \"Range\"].indexOf(name) === -1) obj[name + \"Error\"] = exceptions[name];\n  return obj;\n}, {});\nfullNameExceptions.ModifyError = ModifyError;\nfullNameExceptions.DexieError = DexieError;\nfullNameExceptions.BulkError = BulkError;\n\nfunction nop() {}\n\nfunction mirror(val) {\n  return val;\n}\n\nfunction pureFunctionChain(f1, f2) {\n  if (f1 == null || f1 === mirror) return f2;\n  return function (val) {\n    return f2(f1(val));\n  };\n}\n\nfunction callBoth(on1, on2) {\n  return function () {\n    on1.apply(this, arguments);\n    on2.apply(this, arguments);\n  };\n}\n\nfunction hookCreatingChain(f1, f2) {\n  if (f1 === nop) return f2;\n  return function () {\n    var res = f1.apply(this, arguments);\n    if (res !== undefined) arguments[0] = res;\n    var onsuccess = this.onsuccess,\n        onerror = this.onerror;\n    this.onsuccess = null;\n    this.onerror = null;\n    var res2 = f2.apply(this, arguments);\n    if (onsuccess) this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n    if (onerror) this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n    return res2 !== undefined ? res2 : res;\n  };\n}\n\nfunction hookDeletingChain(f1, f2) {\n  if (f1 === nop) return f2;\n  return function () {\n    f1.apply(this, arguments);\n    var onsuccess = this.onsuccess,\n        onerror = this.onerror;\n    this.onsuccess = this.onerror = null;\n    f2.apply(this, arguments);\n    if (onsuccess) this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n    if (onerror) this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n  };\n}\n\nfunction hookUpdatingChain(f1, f2) {\n  if (f1 === nop) return f2;\n  return function (modifications) {\n    var res = f1.apply(this, arguments);\n    extend(modifications, res);\n    var onsuccess = this.onsuccess,\n        onerror = this.onerror;\n    this.onsuccess = null;\n    this.onerror = null;\n    var res2 = f2.apply(this, arguments);\n    if (onsuccess) this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n    if (onerror) this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n    return res === undefined ? res2 === undefined ? undefined : res2 : extend(res, res2);\n  };\n}\n\nfunction reverseStoppableEventChain(f1, f2) {\n  if (f1 === nop) return f2;\n  return function () {\n    if (f2.apply(this, arguments) === false) return false;\n    return f1.apply(this, arguments);\n  };\n}\n\nfunction promisableChain(f1, f2) {\n  if (f1 === nop) return f2;\n  return function () {\n    var res = f1.apply(this, arguments);\n\n    if (res && typeof res.then === 'function') {\n      var thiz = this,\n          i = arguments.length,\n          args = new Array(i);\n\n      while (i--) {\n        args[i] = arguments[i];\n      }\n\n      return res.then(function () {\n        return f2.apply(thiz, args);\n      });\n    }\n\n    return f2.apply(this, arguments);\n  };\n}\n\nvar INTERNAL = {};\n\nvar LONG_STACKS_CLIP_LIMIT = 100,\n    MAX_LONG_STACKS = 20,\n    ZONE_ECHO_LIMIT = 100,\n    _ref2 = typeof Promise === 'undefined' ? [] : function () {\n  var globalP = Promise.resolve();\n  if (typeof crypto === 'undefined' || !crypto.subtle) return [globalP, getProto(globalP), globalP];\n  var nativeP = crypto.subtle.digest(\"SHA-512\", new Uint8Array([0]));\n  return [nativeP, getProto(nativeP), globalP];\n}(),\n    _ref3 = _slicedToArray(_ref2, 3),\n    resolvedNativePromise = _ref3[0],\n    nativePromiseProto = _ref3[1],\n    resolvedGlobalPromise = _ref3[2],\n    nativePromiseThen = nativePromiseProto && nativePromiseProto.then;\n\nvar NativePromise = resolvedNativePromise && resolvedNativePromise.constructor;\nvar patchGlobalPromise = !!resolvedGlobalPromise;\nvar stack_being_generated = false;\nvar schedulePhysicalTick = resolvedGlobalPromise ? function () {\n  resolvedGlobalPromise.then(physicalTick);\n} : _global.setImmediate ? setImmediate.bind(null, physicalTick) : _global.MutationObserver ? function () {\n  var hiddenDiv = document.createElement(\"div\");\n  new MutationObserver(function () {\n    physicalTick();\n    hiddenDiv = null;\n  }).observe(hiddenDiv, {\n    attributes: true\n  });\n  hiddenDiv.setAttribute('i', '1');\n} : function () {\n  setTimeout(physicalTick, 0);\n};\n\nvar asap = function asap(callback, args) {\n  microtickQueue.push([callback, args]);\n\n  if (needsNewPhysicalTick) {\n    schedulePhysicalTick();\n    needsNewPhysicalTick = false;\n  }\n};\n\nvar isOutsideMicroTick = true,\n    needsNewPhysicalTick = true,\n    unhandledErrors = [],\n    rejectingErrors = [],\n    currentFulfiller = null,\n    rejectionMapper = mirror;\nvar globalPSD = {\n  id: 'global',\n  global: true,\n  ref: 0,\n  unhandleds: [],\n  onunhandled: globalError,\n  pgp: false,\n  env: {},\n  finalize: function finalize() {\n    this.unhandleds.forEach(function (uh) {\n      try {\n        globalError(uh[0], uh[1]);\n      } catch (e) {}\n    });\n  }\n};\nvar PSD = globalPSD;\nvar microtickQueue = [];\nvar numScheduledCalls = 0;\nvar tickFinalizers = [];\n\nfunction DexiePromise(fn) {\n  if (typeof this !== 'object') throw new TypeError('Promises must be constructed via new');\n  this._listeners = [];\n  this.onuncatched = nop;\n  this._lib = false;\n  var psd = this._PSD = PSD;\n\n  if (debug) {\n    this._stackHolder = getErrorWithStack();\n    this._prev = null;\n    this._numPrev = 0;\n  }\n\n  if (typeof fn !== 'function') {\n    if (fn !== INTERNAL) throw new TypeError('Not a function');\n    this._state = arguments[1];\n    this._value = arguments[2];\n    if (this._state === false) handleRejection(this, this._value);\n    return;\n  }\n\n  this._state = null;\n  this._value = null;\n  ++psd.ref;\n  executePromiseTask(this, fn);\n}\n\nvar thenProp = {\n  get: function get() {\n    var psd = PSD,\n        microTaskId = totalEchoes;\n\n    function then(onFulfilled, onRejected) {\n      var _this = this;\n\n      var possibleAwait = !psd.global && (psd !== PSD || microTaskId !== totalEchoes);\n      var cleanup = possibleAwait && !decrementExpectedAwaits();\n      var rv = new DexiePromise(function (resolve, reject) {\n        propagateToListener(_this, new Listener(nativeAwaitCompatibleWrap(onFulfilled, psd, possibleAwait, cleanup), nativeAwaitCompatibleWrap(onRejected, psd, possibleAwait, cleanup), resolve, reject, psd));\n      });\n      debug && linkToPreviousPromise(rv, this);\n      return rv;\n    }\n\n    then.prototype = INTERNAL;\n    return then;\n  },\n  set: function set(value) {\n    setProp(this, 'then', value && value.prototype === INTERNAL ? thenProp : {\n      get: function get() {\n        return value;\n      },\n      set: thenProp.set\n    });\n  }\n};\nprops(DexiePromise.prototype, {\n  then: thenProp,\n  _then: function _then(onFulfilled, onRejected) {\n    propagateToListener(this, new Listener(null, null, onFulfilled, onRejected, PSD));\n  },\n  catch: function _catch(onRejected) {\n    if (arguments.length === 1) return this.then(null, onRejected);\n    var type = arguments[0],\n        handler = arguments[1];\n    return typeof type === 'function' ? this.then(null, function (err) {\n      return err instanceof type ? handler(err) : PromiseReject(err);\n    }) : this.then(null, function (err) {\n      return err && err.name === type ? handler(err) : PromiseReject(err);\n    });\n  },\n  finally: function _finally(onFinally) {\n    return this.then(function (value) {\n      onFinally();\n      return value;\n    }, function (err) {\n      onFinally();\n      return PromiseReject(err);\n    });\n  },\n  stack: {\n    get: function get() {\n      if (this._stack) return this._stack;\n\n      try {\n        stack_being_generated = true;\n        var stacks = getStack(this, [], MAX_LONG_STACKS);\n        var stack = stacks.join(\"\\nFrom previous: \");\n        if (this._state !== null) this._stack = stack;\n        return stack;\n      } finally {\n        stack_being_generated = false;\n      }\n    }\n  },\n  timeout: function timeout(ms, msg) {\n    var _this2 = this;\n\n    return ms < Infinity ? new DexiePromise(function (resolve, reject) {\n      var handle = setTimeout(function () {\n        return reject(new exceptions.Timeout(msg));\n      }, ms);\n\n      _this2.then(resolve, reject).finally(clearTimeout.bind(null, handle));\n    }) : this;\n  }\n});\nif (typeof Symbol !== 'undefined' && Symbol.toStringTag) setProp(DexiePromise.prototype, Symbol.toStringTag, 'Dexie.Promise');\nglobalPSD.env = snapShot();\n\nfunction Listener(onFulfilled, onRejected, resolve, reject, zone) {\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.resolve = resolve;\n  this.reject = reject;\n  this.psd = zone;\n}\n\nprops(DexiePromise, {\n  all: function all() {\n    var values = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n    return new DexiePromise(function (resolve, reject) {\n      if (values.length === 0) resolve([]);\n      var remaining = values.length;\n      values.forEach(function (a, i) {\n        return DexiePromise.resolve(a).then(function (x) {\n          values[i] = x;\n          if (! --remaining) resolve(values);\n        }, reject);\n      });\n    });\n  },\n  resolve: function resolve(value) {\n    if (value instanceof DexiePromise) return value;\n    if (value && typeof value.then === 'function') return new DexiePromise(function (resolve, reject) {\n      value.then(resolve, reject);\n    });\n    var rv = new DexiePromise(INTERNAL, true, value);\n    linkToPreviousPromise(rv, currentFulfiller);\n    return rv;\n  },\n  reject: PromiseReject,\n  race: function race() {\n    var values = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n    return new DexiePromise(function (resolve, reject) {\n      values.map(function (value) {\n        return DexiePromise.resolve(value).then(resolve, reject);\n      });\n    });\n  },\n  PSD: {\n    get: function get() {\n      return PSD;\n    },\n    set: function set(value) {\n      return PSD = value;\n    }\n  },\n  totalEchoes: {\n    get: function get() {\n      return totalEchoes;\n    }\n  },\n  newPSD: newScope,\n  usePSD: usePSD,\n  scheduler: {\n    get: function get() {\n      return asap;\n    },\n    set: function set(value) {\n      asap = value;\n    }\n  },\n  rejectionMapper: {\n    get: function get() {\n      return rejectionMapper;\n    },\n    set: function set(value) {\n      rejectionMapper = value;\n    }\n  },\n  follow: function follow(fn, zoneProps) {\n    return new DexiePromise(function (resolve, reject) {\n      return newScope(function (resolve, reject) {\n        var psd = PSD;\n        psd.unhandleds = [];\n        psd.onunhandled = reject;\n        psd.finalize = callBoth(function () {\n          var _this3 = this;\n\n          run_at_end_of_this_or_next_physical_tick(function () {\n            _this3.unhandleds.length === 0 ? resolve() : reject(_this3.unhandleds[0]);\n          });\n        }, psd.finalize);\n        fn();\n      }, zoneProps, resolve, reject);\n    });\n  }\n});\n\nif (NativePromise) {\n  if (NativePromise.allSettled) setProp(DexiePromise, \"allSettled\", function () {\n    var possiblePromises = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n    return new DexiePromise(function (resolve) {\n      if (possiblePromises.length === 0) resolve([]);\n      var remaining = possiblePromises.length;\n      var results = new Array(remaining);\n      possiblePromises.forEach(function (p, i) {\n        return DexiePromise.resolve(p).then(function (value) {\n          return results[i] = {\n            status: \"fulfilled\",\n            value: value\n          };\n        }, function (reason) {\n          return results[i] = {\n            status: \"rejected\",\n            reason: reason\n          };\n        }).then(function () {\n          return --remaining || resolve(results);\n        });\n      });\n    });\n  });\n  if (NativePromise.any && typeof AggregateError !== 'undefined') setProp(DexiePromise, \"any\", function () {\n    var possiblePromises = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n    return new DexiePromise(function (resolve, reject) {\n      if (possiblePromises.length === 0) reject(new AggregateError([]));\n      var remaining = possiblePromises.length;\n      var failures = new Array(remaining);\n      possiblePromises.forEach(function (p, i) {\n        return DexiePromise.resolve(p).then(function (value) {\n          return resolve(value);\n        }, function (failure) {\n          failures[i] = failure;\n          if (! --remaining) reject(new AggregateError(failures));\n        });\n      });\n    });\n  });\n}\n\nfunction executePromiseTask(promise, fn) {\n  try {\n    fn(function (value) {\n      if (promise._state !== null) return;\n      if (value === promise) throw new TypeError('A promise cannot be resolved with itself.');\n      var shouldExecuteTick = promise._lib && beginMicroTickScope();\n\n      if (value && typeof value.then === 'function') {\n        executePromiseTask(promise, function (resolve, reject) {\n          value instanceof DexiePromise ? value._then(resolve, reject) : value.then(resolve, reject);\n        });\n      } else {\n        promise._state = true;\n        promise._value = value;\n        propagateAllListeners(promise);\n      }\n\n      if (shouldExecuteTick) endMicroTickScope();\n    }, handleRejection.bind(null, promise));\n  } catch (ex) {\n    handleRejection(promise, ex);\n  }\n}\n\nfunction handleRejection(promise, reason) {\n  rejectingErrors.push(reason);\n  if (promise._state !== null) return;\n  var shouldExecuteTick = promise._lib && beginMicroTickScope();\n  reason = rejectionMapper(reason);\n  promise._state = false;\n  promise._value = reason;\n  debug && reason !== null && typeof reason === 'object' && !reason._promise && tryCatch(function () {\n    var origProp = getPropertyDescriptor(reason, \"stack\");\n    reason._promise = promise;\n    setProp(reason, \"stack\", {\n      get: function get() {\n        return stack_being_generated ? origProp && (origProp.get ? origProp.get.apply(reason) : origProp.value) : promise.stack;\n      }\n    });\n  });\n  addPossiblyUnhandledError(promise);\n  propagateAllListeners(promise);\n  if (shouldExecuteTick) endMicroTickScope();\n}\n\nfunction propagateAllListeners(promise) {\n  var listeners = promise._listeners;\n  promise._listeners = [];\n\n  for (var i = 0, len = listeners.length; i < len; ++i) {\n    propagateToListener(promise, listeners[i]);\n  }\n\n  var psd = promise._PSD;\n  --psd.ref || psd.finalize();\n\n  if (numScheduledCalls === 0) {\n    ++numScheduledCalls;\n    asap(function () {\n      if (--numScheduledCalls === 0) finalizePhysicalTick();\n    }, []);\n  }\n}\n\nfunction propagateToListener(promise, listener) {\n  if (promise._state === null) {\n    promise._listeners.push(listener);\n\n    return;\n  }\n\n  var cb = promise._state ? listener.onFulfilled : listener.onRejected;\n\n  if (cb === null) {\n    return (promise._state ? listener.resolve : listener.reject)(promise._value);\n  }\n\n  ++listener.psd.ref;\n  ++numScheduledCalls;\n  asap(callListener, [cb, promise, listener]);\n}\n\nfunction callListener(cb, promise, listener) {\n  try {\n    currentFulfiller = promise;\n    var ret,\n        value = promise._value;\n\n    if (promise._state) {\n      ret = cb(value);\n    } else {\n      if (rejectingErrors.length) rejectingErrors = [];\n      ret = cb(value);\n      if (rejectingErrors.indexOf(value) === -1) markErrorAsHandled(promise);\n    }\n\n    listener.resolve(ret);\n  } catch (e) {\n    listener.reject(e);\n  } finally {\n    currentFulfiller = null;\n    if (--numScheduledCalls === 0) finalizePhysicalTick();\n    --listener.psd.ref || listener.psd.finalize();\n  }\n}\n\nfunction getStack(promise, stacks, limit) {\n  if (stacks.length === limit) return stacks;\n  var stack = \"\";\n\n  if (promise._state === false) {\n    var failure = promise._value,\n        errorName,\n        message;\n\n    if (failure != null) {\n      errorName = failure.name || \"Error\";\n      message = failure.message || failure;\n      stack = prettyStack(failure, 0);\n    } else {\n      errorName = failure;\n      message = \"\";\n    }\n\n    stacks.push(errorName + (message ? \": \" + message : \"\") + stack);\n  }\n\n  if (debug) {\n    stack = prettyStack(promise._stackHolder, 2);\n    if (stack && stacks.indexOf(stack) === -1) stacks.push(stack);\n    if (promise._prev) getStack(promise._prev, stacks, limit);\n  }\n\n  return stacks;\n}\n\nfunction linkToPreviousPromise(promise, prev) {\n  var numPrev = prev ? prev._numPrev + 1 : 0;\n\n  if (numPrev < LONG_STACKS_CLIP_LIMIT) {\n    promise._prev = prev;\n    promise._numPrev = numPrev;\n  }\n}\n\nfunction physicalTick() {\n  beginMicroTickScope() && endMicroTickScope();\n}\n\nfunction beginMicroTickScope() {\n  var wasRootExec = isOutsideMicroTick;\n  isOutsideMicroTick = false;\n  needsNewPhysicalTick = false;\n  return wasRootExec;\n}\n\nfunction endMicroTickScope() {\n  var callbacks, i, l;\n\n  do {\n    while (microtickQueue.length > 0) {\n      callbacks = microtickQueue;\n      microtickQueue = [];\n      l = callbacks.length;\n\n      for (i = 0; i < l; ++i) {\n        var item = callbacks[i];\n        item[0].apply(null, item[1]);\n      }\n    }\n  } while (microtickQueue.length > 0);\n\n  isOutsideMicroTick = true;\n  needsNewPhysicalTick = true;\n}\n\nfunction finalizePhysicalTick() {\n  var unhandledErrs = unhandledErrors;\n  unhandledErrors = [];\n  unhandledErrs.forEach(function (p) {\n    p._PSD.onunhandled.call(null, p._value, p);\n  });\n  var finalizers = tickFinalizers.slice(0);\n  var i = finalizers.length;\n\n  while (i) {\n    finalizers[--i]();\n  }\n}\n\nfunction run_at_end_of_this_or_next_physical_tick(fn) {\n  function finalizer() {\n    fn();\n    tickFinalizers.splice(tickFinalizers.indexOf(finalizer), 1);\n  }\n\n  tickFinalizers.push(finalizer);\n  ++numScheduledCalls;\n  asap(function () {\n    if (--numScheduledCalls === 0) finalizePhysicalTick();\n  }, []);\n}\n\nfunction addPossiblyUnhandledError(promise) {\n  if (!unhandledErrors.some(function (p) {\n    return p._value === promise._value;\n  })) unhandledErrors.push(promise);\n}\n\nfunction markErrorAsHandled(promise) {\n  var i = unhandledErrors.length;\n\n  while (i) {\n    if (unhandledErrors[--i]._value === promise._value) {\n      unhandledErrors.splice(i, 1);\n      return;\n    }\n  }\n}\n\nfunction PromiseReject(reason) {\n  return new DexiePromise(INTERNAL, false, reason);\n}\n\nfunction wrap(fn, errorCatcher) {\n  var psd = PSD;\n  return function () {\n    var wasRootExec = beginMicroTickScope(),\n        outerScope = PSD;\n\n    try {\n      switchToZone(psd, true);\n      return fn.apply(this, arguments);\n    } catch (e) {\n      errorCatcher && errorCatcher(e);\n    } finally {\n      switchToZone(outerScope, false);\n      if (wasRootExec) endMicroTickScope();\n    }\n  };\n}\n\nvar task = {\n  awaits: 0,\n  echoes: 0,\n  id: 0\n};\nvar taskCounter = 0;\nvar zoneStack = [];\nvar zoneEchoes = 0;\nvar totalEchoes = 0;\nvar zone_id_counter = 0;\n\nfunction newScope(fn, props, a1, a2) {\n  var parent = PSD,\n      psd = Object.create(parent);\n  psd.parent = parent;\n  psd.ref = 0;\n  psd.global = false;\n  psd.id = ++zone_id_counter;\n  var globalEnv = globalPSD.env;\n  psd.env = patchGlobalPromise ? {\n    Promise: DexiePromise,\n    PromiseProp: {\n      value: DexiePromise,\n      configurable: true,\n      writable: true\n    },\n    all: DexiePromise.all,\n    race: DexiePromise.race,\n    allSettled: DexiePromise.allSettled,\n    any: DexiePromise.any,\n    resolve: DexiePromise.resolve,\n    reject: DexiePromise.reject,\n    nthen: getPatchedPromiseThen(globalEnv.nthen, psd),\n    gthen: getPatchedPromiseThen(globalEnv.gthen, psd)\n  } : {};\n  if (props) extend(psd, props);\n  ++parent.ref;\n\n  psd.finalize = function () {\n    --this.parent.ref || this.parent.finalize();\n  };\n\n  var rv = usePSD(psd, fn, a1, a2);\n  if (psd.ref === 0) psd.finalize();\n  return rv;\n}\n\nfunction incrementExpectedAwaits() {\n  if (!task.id) task.id = ++taskCounter;\n  ++task.awaits;\n  task.echoes += ZONE_ECHO_LIMIT;\n  return task.id;\n}\n\nfunction decrementExpectedAwaits() {\n  if (!task.awaits) return false;\n  if (--task.awaits === 0) task.id = 0;\n  task.echoes = task.awaits * ZONE_ECHO_LIMIT;\n  return true;\n}\n\nif (('' + nativePromiseThen).indexOf('[native code]') === -1) {\n  incrementExpectedAwaits = decrementExpectedAwaits = nop;\n}\n\nfunction onPossibleParallellAsync(possiblePromise) {\n  if (task.echoes && possiblePromise && possiblePromise.constructor === NativePromise) {\n    incrementExpectedAwaits();\n    return possiblePromise.then(function (x) {\n      decrementExpectedAwaits();\n      return x;\n    }, function (e) {\n      decrementExpectedAwaits();\n      return rejection(e);\n    });\n  }\n\n  return possiblePromise;\n}\n\nfunction zoneEnterEcho(targetZone) {\n  ++totalEchoes;\n\n  if (!task.echoes || --task.echoes === 0) {\n    task.echoes = task.id = 0;\n  }\n\n  zoneStack.push(PSD);\n  switchToZone(targetZone, true);\n}\n\nfunction zoneLeaveEcho() {\n  var zone = zoneStack[zoneStack.length - 1];\n  zoneStack.pop();\n  switchToZone(zone, false);\n}\n\nfunction switchToZone(targetZone, bEnteringZone) {\n  var currentZone = PSD;\n\n  if (bEnteringZone ? task.echoes && (!zoneEchoes++ || targetZone !== PSD) : zoneEchoes && (! --zoneEchoes || targetZone !== PSD)) {\n    enqueueNativeMicroTask(bEnteringZone ? zoneEnterEcho.bind(null, targetZone) : zoneLeaveEcho);\n  }\n\n  if (targetZone === PSD) return;\n  PSD = targetZone;\n  if (currentZone === globalPSD) globalPSD.env = snapShot();\n\n  if (patchGlobalPromise) {\n    var GlobalPromise = globalPSD.env.Promise;\n    var targetEnv = targetZone.env;\n    nativePromiseProto.then = targetEnv.nthen;\n    GlobalPromise.prototype.then = targetEnv.gthen;\n\n    if (currentZone.global || targetZone.global) {\n      Object.defineProperty(_global, 'Promise', targetEnv.PromiseProp);\n      GlobalPromise.all = targetEnv.all;\n      GlobalPromise.race = targetEnv.race;\n      GlobalPromise.resolve = targetEnv.resolve;\n      GlobalPromise.reject = targetEnv.reject;\n      if (targetEnv.allSettled) GlobalPromise.allSettled = targetEnv.allSettled;\n      if (targetEnv.any) GlobalPromise.any = targetEnv.any;\n    }\n  }\n}\n\nfunction snapShot() {\n  var GlobalPromise = _global.Promise;\n  return patchGlobalPromise ? {\n    Promise: GlobalPromise,\n    PromiseProp: Object.getOwnPropertyDescriptor(_global, \"Promise\"),\n    all: GlobalPromise.all,\n    race: GlobalPromise.race,\n    allSettled: GlobalPromise.allSettled,\n    any: GlobalPromise.any,\n    resolve: GlobalPromise.resolve,\n    reject: GlobalPromise.reject,\n    nthen: nativePromiseProto.then,\n    gthen: GlobalPromise.prototype.then\n  } : {};\n}\n\nfunction usePSD(psd, fn, a1, a2, a3) {\n  var outerScope = PSD;\n\n  try {\n    switchToZone(psd, true);\n    return fn(a1, a2, a3);\n  } finally {\n    switchToZone(outerScope, false);\n  }\n}\n\nfunction enqueueNativeMicroTask(job) {\n  nativePromiseThen.call(resolvedNativePromise, job);\n}\n\nfunction nativeAwaitCompatibleWrap(fn, zone, possibleAwait, cleanup) {\n  return typeof fn !== 'function' ? fn : function () {\n    var outerZone = PSD;\n    if (possibleAwait) incrementExpectedAwaits();\n    switchToZone(zone, true);\n\n    try {\n      return fn.apply(this, arguments);\n    } finally {\n      switchToZone(outerZone, false);\n      if (cleanup) enqueueNativeMicroTask(decrementExpectedAwaits);\n    }\n  };\n}\n\nfunction getPatchedPromiseThen(origThen, zone) {\n  return function (onResolved, onRejected) {\n    return origThen.call(this, nativeAwaitCompatibleWrap(onResolved, zone), nativeAwaitCompatibleWrap(onRejected, zone));\n  };\n}\n\nvar UNHANDLEDREJECTION = \"unhandledrejection\";\n\nfunction globalError(err, promise) {\n  var rv;\n\n  try {\n    rv = promise.onuncatched(err);\n  } catch (e) {}\n\n  if (rv !== false) try {\n    var event,\n        eventData = {\n      promise: promise,\n      reason: err\n    };\n\n    if (_global.document && document.createEvent) {\n      event = document.createEvent('Event');\n      event.initEvent(UNHANDLEDREJECTION, true, true);\n      extend(event, eventData);\n    } else if (_global.CustomEvent) {\n      event = new CustomEvent(UNHANDLEDREJECTION, {\n        detail: eventData\n      });\n      extend(event, eventData);\n    }\n\n    if (event && _global.dispatchEvent) {\n      dispatchEvent(event);\n      if (!_global.PromiseRejectionEvent && _global.onunhandledrejection) try {\n        _global.onunhandledrejection(event);\n      } catch (_) {}\n    }\n\n    if (debug && event && !event.defaultPrevented) {\n      console.warn(\"Unhandled rejection: \".concat(err.stack || err));\n    }\n  } catch (e) {}\n}\n\nvar rejection = DexiePromise.reject;\n\nfunction tempTransaction(db, mode, storeNames, fn) {\n  if (!db.idbdb || !db._state.openComplete && !PSD.letThrough && !db._vip) {\n    if (db._state.openComplete) {\n      return rejection(new exceptions.DatabaseClosed(db._state.dbOpenError));\n    }\n\n    if (!db._state.isBeingOpened) {\n      if (!db._options.autoOpen) return rejection(new exceptions.DatabaseClosed());\n      db.open().catch(nop);\n    }\n\n    return db._state.dbReadyPromise.then(function () {\n      return tempTransaction(db, mode, storeNames, fn);\n    });\n  } else {\n    var trans = db._createTransaction(mode, storeNames, db._dbSchema);\n\n    try {\n      trans.create();\n    } catch (ex) {\n      return rejection(ex);\n    }\n\n    return trans._promise(mode, function (resolve, reject) {\n      return newScope(function () {\n        PSD.trans = trans;\n        return fn(resolve, reject, trans);\n      });\n    }).then(function (result) {\n      return trans._completion.then(function () {\n        return result;\n      });\n    });\n  }\n}\n\nvar DEXIE_VERSION = '3.2.0-beta-2';\nvar maxString = String.fromCharCode(65535);\nvar minKey = -Infinity;\nvar INVALID_KEY_ARGUMENT = \"Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.\";\nvar STRING_EXPECTED = \"String expected.\";\nvar connections = [];\nvar isIEOrEdge = typeof navigator !== 'undefined' && /(MSIE|Trident|Edge)/.test(navigator.userAgent);\nvar hasIEDeleteObjectStoreBug = isIEOrEdge;\nvar hangsOnDeleteLargeKeyRange = isIEOrEdge;\n\nvar dexieStackFrameFilter = function dexieStackFrameFilter(frame) {\n  return !/(dexie\\.js|dexie\\.min\\.js)/.test(frame);\n};\n\nvar DBNAMES_DB = '__dbnames';\nvar READONLY = 'readonly';\nvar READWRITE = 'readwrite';\n\nfunction combine(filter1, filter2) {\n  return filter1 ? filter2 ? function () {\n    return filter1.apply(this, arguments) && filter2.apply(this, arguments);\n  } : filter1 : filter2;\n}\n\nvar domDeps;\n\ntry {\n  domDeps = {\n    indexedDB: _global.indexedDB || _global.mozIndexedDB || _global.webkitIndexedDB || _global.msIndexedDB,\n    IDBKeyRange: _global.IDBKeyRange || _global.webkitIDBKeyRange\n  };\n} catch (e) {\n  domDeps = {\n    indexedDB: null,\n    IDBKeyRange: null\n  };\n}\n\nfunction safariMultiStoreFix(storeNames) {\n  return storeNames.length === 1 ? storeNames[0] : storeNames;\n}\n\nvar _getMaxKey = function getMaxKey(IdbKeyRange) {\n  try {\n    IdbKeyRange.only([[]]);\n\n    _getMaxKey = function getMaxKey() {\n      return [[]];\n    };\n\n    return [[]];\n  } catch (e) {\n    _getMaxKey = function getMaxKey() {\n      return maxString;\n    };\n\n    return maxString;\n  }\n};\n\nvar AnyRange = {\n  type: 3,\n  lower: -Infinity,\n  lowerOpen: false,\n\n  get upper() {\n    return _getMaxKey(domDeps.IDBKeyRange);\n  },\n\n  upperOpen: false\n};\n\nfunction workaroundForUndefinedPrimKey(keyPath) {\n  return typeof keyPath === \"string\" && !/\\./.test(keyPath) ? function (obj) {\n    if (obj[keyPath] === undefined && keyPath in obj) {\n      obj = deepClone(obj);\n      delete obj[keyPath];\n    }\n\n    return obj;\n  } : function (obj) {\n    return obj;\n  };\n}\n\nvar Table = /*#__PURE__*/function () {\n  function Table() {\n    _classCallCheck(this, Table);\n  }\n\n  _createClass(Table, [{\n    key: \"_trans\",\n    value: function _trans(mode, fn, writeLocked) {\n      var trans = this._tx || PSD.trans;\n      var tableName = this.name;\n\n      function checkTableInTransaction(resolve, reject, trans) {\n        if (!trans.schema[tableName]) throw new exceptions.NotFound(\"Table \" + tableName + \" not part of transaction\");\n        return fn(trans.idbtrans, trans);\n      }\n\n      var wasRootExec = beginMicroTickScope();\n\n      try {\n        return trans && trans.db === this.db ? trans === PSD.trans ? trans._promise(mode, checkTableInTransaction, writeLocked) : newScope(function () {\n          return trans._promise(mode, checkTableInTransaction, writeLocked);\n        }, {\n          trans: trans,\n          transless: PSD.transless || PSD\n        }) : tempTransaction(this.db, mode, [this.name], checkTableInTransaction);\n      } finally {\n        if (wasRootExec) endMicroTickScope();\n      }\n    }\n  }, {\n    key: \"get\",\n    value: function get(keyOrCrit, cb) {\n      var _this4 = this;\n\n      if (keyOrCrit && keyOrCrit.constructor === Object) return this.where(keyOrCrit).first(cb);\n      return this._trans('readonly', function (trans) {\n        return _this4.core.get({\n          trans: trans,\n          key: keyOrCrit\n        }).then(function (res) {\n          return _this4.hook.reading.fire(res);\n        });\n      }).then(cb);\n    }\n  }, {\n    key: \"where\",\n    value: function where(indexOrCrit) {\n      if (typeof indexOrCrit === 'string') return new this.db.WhereClause(this, indexOrCrit);\n      if (isArray(indexOrCrit)) return new this.db.WhereClause(this, \"[\".concat(indexOrCrit.join('+'), \"]\"));\n      var keyPaths = keys(indexOrCrit);\n      if (keyPaths.length === 1) return this.where(keyPaths[0]).equals(indexOrCrit[keyPaths[0]]);\n      var compoundIndex = this.schema.indexes.concat(this.schema.primKey).filter(function (ix) {\n        return ix.compound && keyPaths.every(function (keyPath) {\n          return ix.keyPath.indexOf(keyPath) >= 0;\n        }) && ix.keyPath.every(function (keyPath) {\n          return keyPaths.indexOf(keyPath) >= 0;\n        });\n      })[0];\n      if (compoundIndex && this.db._maxKey !== maxString) return this.where(compoundIndex.name).equals(compoundIndex.keyPath.map(function (kp) {\n        return indexOrCrit[kp];\n      }));\n      if (!compoundIndex && debug) console.warn(\"The query \".concat(JSON.stringify(indexOrCrit), \" on \").concat(this.name, \" would benefit of a \") + \"compound index [\".concat(keyPaths.join('+'), \"]\"));\n      var idxByName = this.schema.idxByName;\n      var idb = this.db._deps.indexedDB;\n\n      function equals(a, b) {\n        try {\n          return idb.cmp(a, b) === 0;\n        } catch (e) {\n          return false;\n        }\n      }\n\n      var _keyPaths$reduce = keyPaths.reduce(function (_ref4, keyPath) {\n        var _ref5 = _slicedToArray(_ref4, 2),\n            prevIndex = _ref5[0],\n            prevFilterFn = _ref5[1];\n\n        var index = idxByName[keyPath];\n        var value = indexOrCrit[keyPath];\n        return [prevIndex || index, prevIndex || !index ? combine(prevFilterFn, index && index.multi ? function (x) {\n          var prop = getByKeyPath(x, keyPath);\n          return isArray(prop) && prop.some(function (item) {\n            return equals(value, item);\n          });\n        } : function (x) {\n          return equals(value, getByKeyPath(x, keyPath));\n        }) : prevFilterFn];\n      }, [null, null]),\n          _keyPaths$reduce2 = _slicedToArray(_keyPaths$reduce, 2),\n          idx = _keyPaths$reduce2[0],\n          filterFunction = _keyPaths$reduce2[1];\n\n      return idx ? this.where(idx.name).equals(indexOrCrit[idx.keyPath]).filter(filterFunction) : compoundIndex ? this.filter(filterFunction) : this.where(keyPaths).equals('');\n    }\n  }, {\n    key: \"filter\",\n    value: function filter(filterFunction) {\n      return this.toCollection().and(filterFunction);\n    }\n  }, {\n    key: \"count\",\n    value: function count(thenShortcut) {\n      return this.toCollection().count(thenShortcut);\n    }\n  }, {\n    key: \"offset\",\n    value: function offset(_offset) {\n      return this.toCollection().offset(_offset);\n    }\n  }, {\n    key: \"limit\",\n    value: function limit(numRows) {\n      return this.toCollection().limit(numRows);\n    }\n  }, {\n    key: \"each\",\n    value: function each(callback) {\n      return this.toCollection().each(callback);\n    }\n  }, {\n    key: \"toArray\",\n    value: function toArray(thenShortcut) {\n      return this.toCollection().toArray(thenShortcut);\n    }\n  }, {\n    key: \"toCollection\",\n    value: function toCollection() {\n      return new this.db.Collection(new this.db.WhereClause(this));\n    }\n  }, {\n    key: \"orderBy\",\n    value: function orderBy(index) {\n      return new this.db.Collection(new this.db.WhereClause(this, isArray(index) ? \"[\".concat(index.join('+'), \"]\") : index));\n    }\n  }, {\n    key: \"reverse\",\n    value: function reverse() {\n      return this.toCollection().reverse();\n    }\n  }, {\n    key: \"mapToClass\",\n    value: function mapToClass(constructor) {\n      this.schema.mappedClass = constructor;\n\n      var readHook = function readHook(obj) {\n        if (!obj) return obj;\n        var res = Object.create(constructor.prototype);\n\n        for (var m in obj) {\n          if (hasOwn(obj, m)) try {\n            res[m] = obj[m];\n          } catch (_) {}\n        }\n\n        return res;\n      };\n\n      if (this.schema.readHook) {\n        this.hook.reading.unsubscribe(this.schema.readHook);\n      }\n\n      this.schema.readHook = readHook;\n      this.hook(\"reading\", readHook);\n      return constructor;\n    }\n  }, {\n    key: \"defineClass\",\n    value: function defineClass() {\n      function Class(content) {\n        extend(this, content);\n      }\n\n      return this.mapToClass(Class);\n    }\n  }, {\n    key: \"add\",\n    value: function add(obj, key) {\n      var _this5 = this;\n\n      var _this$schema$primKey = this.schema.primKey,\n          auto = _this$schema$primKey.auto,\n          keyPath = _this$schema$primKey.keyPath;\n      var objToAdd = obj;\n\n      if (keyPath && auto) {\n        objToAdd = workaroundForUndefinedPrimKey(keyPath)(obj);\n      }\n\n      return this._trans('readwrite', function (trans) {\n        return _this5.core.mutate({\n          trans: trans,\n          type: 'add',\n          keys: key != null ? [key] : null,\n          values: [objToAdd]\n        });\n      }).then(function (res) {\n        return res.numFailures ? DexiePromise.reject(res.failures[0]) : res.lastResult;\n      }).then(function (lastResult) {\n        if (keyPath) {\n          try {\n            setByKeyPath(obj, keyPath, lastResult);\n          } catch (_) {}\n        }\n\n        return lastResult;\n      });\n    }\n  }, {\n    key: \"update\",\n    value: function update(keyOrObject, modifications) {\n      if (typeof keyOrObject === 'object' && !isArray(keyOrObject)) {\n        var key = getByKeyPath(keyOrObject, this.schema.primKey.keyPath);\n        if (key === undefined) return rejection(new exceptions.InvalidArgument(\"Given object does not contain its primary key\"));\n\n        try {\n          if (typeof modifications !== \"function\") {\n            keys(modifications).forEach(function (keyPath) {\n              setByKeyPath(keyOrObject, keyPath, modifications[keyPath]);\n            });\n          } else {\n            modifications(keyOrObject, {\n              value: keyOrObject,\n              primKey: key\n            });\n          }\n        } catch (_a) {}\n\n        return this.where(\":id\").equals(key).modify(modifications);\n      } else {\n        return this.where(\":id\").equals(keyOrObject).modify(modifications);\n      }\n    }\n  }, {\n    key: \"put\",\n    value: function put(obj, key) {\n      var _this6 = this;\n\n      var _this$schema$primKey2 = this.schema.primKey,\n          auto = _this$schema$primKey2.auto,\n          keyPath = _this$schema$primKey2.keyPath;\n      var objToAdd = obj;\n\n      if (keyPath && auto) {\n        objToAdd = workaroundForUndefinedPrimKey(keyPath)(obj);\n      }\n\n      return this._trans('readwrite', function (trans) {\n        return _this6.core.mutate({\n          trans: trans,\n          type: 'put',\n          values: [objToAdd],\n          keys: key != null ? [key] : null\n        });\n      }).then(function (res) {\n        return res.numFailures ? DexiePromise.reject(res.failures[0]) : res.lastResult;\n      }).then(function (lastResult) {\n        if (keyPath) {\n          try {\n            setByKeyPath(obj, keyPath, lastResult);\n          } catch (_) {}\n        }\n\n        return lastResult;\n      });\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete(key) {\n      var _this7 = this;\n\n      return this._trans('readwrite', function (trans) {\n        return _this7.core.mutate({\n          trans: trans,\n          type: 'delete',\n          keys: [key]\n        });\n      }).then(function (res) {\n        return res.numFailures ? DexiePromise.reject(res.failures[0]) : undefined;\n      });\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      var _this8 = this;\n\n      return this._trans('readwrite', function (trans) {\n        return _this8.core.mutate({\n          trans: trans,\n          type: 'deleteRange',\n          range: AnyRange\n        });\n      }).then(function (res) {\n        return res.numFailures ? DexiePromise.reject(res.failures[0]) : undefined;\n      });\n    }\n  }, {\n    key: \"bulkGet\",\n    value: function bulkGet(keys) {\n      var _this9 = this;\n\n      return this._trans('readonly', function (trans) {\n        return _this9.core.getMany({\n          keys: keys,\n          trans: trans\n        }).then(function (result) {\n          return result.map(function (res) {\n            return _this9.hook.reading.fire(res);\n          });\n        });\n      });\n    }\n  }, {\n    key: \"bulkAdd\",\n    value: function bulkAdd(objects, keysOrOptions, options) {\n      var _this10 = this;\n\n      var keys = Array.isArray(keysOrOptions) ? keysOrOptions : undefined;\n      options = options || (keys ? undefined : keysOrOptions);\n      var wantResults = options ? options.allKeys : undefined;\n      return this._trans('readwrite', function (trans) {\n        var _this10$schema$primKe = _this10.schema.primKey,\n            auto = _this10$schema$primKe.auto,\n            keyPath = _this10$schema$primKe.keyPath;\n        if (keyPath && keys) throw new exceptions.InvalidArgument(\"bulkAdd(): keys argument invalid on tables with inbound keys\");\n        if (keys && keys.length !== objects.length) throw new exceptions.InvalidArgument(\"Arguments objects and keys must have the same length\");\n        var numObjects = objects.length;\n        var objectsToAdd = keyPath && auto ? objects.map(workaroundForUndefinedPrimKey(keyPath)) : objects;\n        return _this10.core.mutate({\n          trans: trans,\n          type: 'add',\n          keys: keys,\n          values: objectsToAdd,\n          wantResults: wantResults\n        }).then(function (_ref6) {\n          var numFailures = _ref6.numFailures,\n              results = _ref6.results,\n              lastResult = _ref6.lastResult,\n              failures = _ref6.failures;\n          var result = wantResults ? results : lastResult;\n          if (numFailures === 0) return result;\n          throw new BulkError(\"\".concat(_this10.name, \".bulkAdd(): \").concat(numFailures, \" of \").concat(numObjects, \" operations failed\"), failures);\n        });\n      });\n    }\n  }, {\n    key: \"bulkPut\",\n    value: function bulkPut(objects, keysOrOptions, options) {\n      var _this11 = this;\n\n      var keys = Array.isArray(keysOrOptions) ? keysOrOptions : undefined;\n      options = options || (keys ? undefined : keysOrOptions);\n      var wantResults = options ? options.allKeys : undefined;\n      return this._trans('readwrite', function (trans) {\n        var _this11$schema$primKe = _this11.schema.primKey,\n            auto = _this11$schema$primKe.auto,\n            keyPath = _this11$schema$primKe.keyPath;\n        if (keyPath && keys) throw new exceptions.InvalidArgument(\"bulkPut(): keys argument invalid on tables with inbound keys\");\n        if (keys && keys.length !== objects.length) throw new exceptions.InvalidArgument(\"Arguments objects and keys must have the same length\");\n        var numObjects = objects.length;\n        var objectsToPut = keyPath && auto ? objects.map(workaroundForUndefinedPrimKey(keyPath)) : objects;\n        return _this11.core.mutate({\n          trans: trans,\n          type: 'put',\n          keys: keys,\n          values: objectsToPut,\n          wantResults: wantResults\n        }).then(function (_ref7) {\n          var numFailures = _ref7.numFailures,\n              results = _ref7.results,\n              lastResult = _ref7.lastResult,\n              failures = _ref7.failures;\n          var result = wantResults ? results : lastResult;\n          if (numFailures === 0) return result;\n          throw new BulkError(\"\".concat(_this11.name, \".bulkPut(): \").concat(numFailures, \" of \").concat(numObjects, \" operations failed\"), failures);\n        });\n      });\n    }\n  }, {\n    key: \"bulkDelete\",\n    value: function bulkDelete(keys) {\n      var _this12 = this;\n\n      var numKeys = keys.length;\n      return this._trans('readwrite', function (trans) {\n        return _this12.core.mutate({\n          trans: trans,\n          type: 'delete',\n          keys: keys\n        });\n      }).then(function (_ref8) {\n        var numFailures = _ref8.numFailures,\n            lastResult = _ref8.lastResult,\n            failures = _ref8.failures;\n        if (numFailures === 0) return lastResult;\n        throw new BulkError(\"\".concat(_this12.name, \".bulkDelete(): \").concat(numFailures, \" of \").concat(numKeys, \" operations failed\"), failures);\n      });\n    }\n  }]);\n\n  return Table;\n}();\n\nfunction Events(ctx) {\n  var evs = {};\n\n  var rv = function rv(eventName, subscriber) {\n    if (subscriber) {\n      var i = arguments.length,\n          args = new Array(i - 1);\n\n      while (--i) {\n        args[i - 1] = arguments[i];\n      }\n\n      evs[eventName].subscribe.apply(null, args);\n      return ctx;\n    } else if (typeof eventName === 'string') {\n      return evs[eventName];\n    }\n  };\n\n  rv.addEventType = add;\n\n  for (var i = 1, l = arguments.length; i < l; ++i) {\n    add(arguments[i]);\n  }\n\n  return rv;\n\n  function add(eventName, chainFunction, defaultFunction) {\n    if (typeof eventName === 'object') return addConfiguredEvents(eventName);\n    if (!chainFunction) chainFunction = reverseStoppableEventChain;\n    if (!defaultFunction) defaultFunction = nop;\n    var context = {\n      subscribers: [],\n      fire: defaultFunction,\n      subscribe: function subscribe(cb) {\n        if (context.subscribers.indexOf(cb) === -1) {\n          context.subscribers.push(cb);\n          context.fire = chainFunction(context.fire, cb);\n        }\n      },\n      unsubscribe: function unsubscribe(cb) {\n        context.subscribers = context.subscribers.filter(function (fn) {\n          return fn !== cb;\n        });\n        context.fire = context.subscribers.reduce(chainFunction, defaultFunction);\n      }\n    };\n    evs[eventName] = rv[eventName] = context;\n    return context;\n  }\n\n  function addConfiguredEvents(cfg) {\n    keys(cfg).forEach(function (eventName) {\n      var args = cfg[eventName];\n\n      if (isArray(args)) {\n        add(eventName, cfg[eventName][0], cfg[eventName][1]);\n      } else if (args === 'asap') {\n        var context = add(eventName, mirror, function fire() {\n          var i = arguments.length,\n              args = new Array(i);\n\n          while (i--) {\n            args[i] = arguments[i];\n          }\n\n          context.subscribers.forEach(function (fn) {\n            asap$1(function fireEvent() {\n              fn.apply(null, args);\n            });\n          });\n        });\n      } else throw new exceptions.InvalidArgument(\"Invalid event config\");\n    });\n  }\n}\n\nfunction makeClassConstructor(prototype, constructor) {\n  derive(constructor).from({\n    prototype: prototype\n  });\n  return constructor;\n}\n\nfunction createTableConstructor(db) {\n  return makeClassConstructor(Table.prototype, function Table(name, tableSchema, trans) {\n    this.db = db;\n    this._tx = trans;\n    this.name = name;\n    this.schema = tableSchema;\n    this.hook = db._allTables[name] ? db._allTables[name].hook : Events(null, {\n      \"creating\": [hookCreatingChain, nop],\n      \"reading\": [pureFunctionChain, mirror],\n      \"updating\": [hookUpdatingChain, nop],\n      \"deleting\": [hookDeletingChain, nop]\n    });\n  });\n}\n\nfunction isPlainKeyRange(ctx, ignoreLimitFilter) {\n  return !(ctx.filter || ctx.algorithm || ctx.or) && (ignoreLimitFilter ? ctx.justLimit : !ctx.replayFilter);\n}\n\nfunction addFilter(ctx, fn) {\n  ctx.filter = combine(ctx.filter, fn);\n}\n\nfunction addReplayFilter(ctx, factory, isLimitFilter) {\n  var curr = ctx.replayFilter;\n  ctx.replayFilter = curr ? function () {\n    return combine(curr(), factory());\n  } : factory;\n  ctx.justLimit = isLimitFilter && !curr;\n}\n\nfunction addMatchFilter(ctx, fn) {\n  ctx.isMatch = combine(ctx.isMatch, fn);\n}\n\nfunction getIndexOrStore(ctx, coreSchema) {\n  if (ctx.isPrimKey) return coreSchema.primaryKey;\n  var index = coreSchema.getIndexByKeyPath(ctx.index);\n  if (!index) throw new exceptions.Schema(\"KeyPath \" + ctx.index + \" on object store \" + coreSchema.name + \" is not indexed\");\n  return index;\n}\n\nfunction openCursor(ctx, coreTable, trans) {\n  var index = getIndexOrStore(ctx, coreTable.schema);\n  return coreTable.openCursor({\n    trans: trans,\n    values: !ctx.keysOnly,\n    reverse: ctx.dir === 'prev',\n    unique: !!ctx.unique,\n    query: {\n      index: index,\n      range: ctx.range\n    }\n  });\n}\n\nfunction iter(ctx, fn, coreTrans, coreTable) {\n  var filter = ctx.replayFilter ? combine(ctx.filter, ctx.replayFilter()) : ctx.filter;\n\n  if (!ctx.or) {\n    return iterate(openCursor(ctx, coreTable, coreTrans), combine(ctx.algorithm, filter), fn, !ctx.keysOnly && ctx.valueMapper);\n  } else {\n    var set = {};\n\n    var union = function union(item, cursor, advance) {\n      if (!filter || filter(cursor, advance, function (result) {\n        return cursor.stop(result);\n      }, function (err) {\n        return cursor.fail(err);\n      })) {\n        var primaryKey = cursor.primaryKey;\n        var key = '' + primaryKey;\n        if (key === '[object ArrayBuffer]') key = '' + new Uint8Array(primaryKey);\n\n        if (!hasOwn(set, key)) {\n          set[key] = true;\n          fn(item, cursor, advance);\n        }\n      }\n    };\n\n    return Promise.all([ctx.or._iterate(union, coreTrans), iterate(openCursor(ctx, coreTable, coreTrans), ctx.algorithm, union, !ctx.keysOnly && ctx.valueMapper)]);\n  }\n}\n\nfunction iterate(cursorPromise, filter, fn, valueMapper) {\n  var mappedFn = valueMapper ? function (x, c, a) {\n    return fn(valueMapper(x), c, a);\n  } : fn;\n  var wrappedFn = wrap(mappedFn);\n  return cursorPromise.then(function (cursor) {\n    if (cursor) {\n      return cursor.start(function () {\n        var c = function c() {\n          return cursor.continue();\n        };\n\n        if (!filter || filter(cursor, function (advancer) {\n          return c = advancer;\n        }, function (val) {\n          cursor.stop(val);\n          c = nop;\n        }, function (e) {\n          cursor.fail(e);\n          c = nop;\n        })) wrappedFn(cursor.value, cursor, function (advancer) {\n          return c = advancer;\n        });\n        c();\n      });\n    }\n  });\n}\n\nvar Collection = /*#__PURE__*/function () {\n  function Collection() {\n    _classCallCheck(this, Collection);\n  }\n\n  _createClass(Collection, [{\n    key: \"_read\",\n    value: function _read(fn, cb) {\n      var ctx = this._ctx;\n      return ctx.error ? ctx.table._trans(null, rejection.bind(null, ctx.error)) : ctx.table._trans('readonly', fn).then(cb);\n    }\n  }, {\n    key: \"_write\",\n    value: function _write(fn) {\n      var ctx = this._ctx;\n      return ctx.error ? ctx.table._trans(null, rejection.bind(null, ctx.error)) : ctx.table._trans('readwrite', fn, \"locked\");\n    }\n  }, {\n    key: \"_addAlgorithm\",\n    value: function _addAlgorithm(fn) {\n      var ctx = this._ctx;\n      ctx.algorithm = combine(ctx.algorithm, fn);\n    }\n  }, {\n    key: \"_iterate\",\n    value: function _iterate(fn, coreTrans) {\n      return iter(this._ctx, fn, coreTrans, this._ctx.table.core);\n    }\n  }, {\n    key: \"clone\",\n    value: function clone(props) {\n      var rv = Object.create(this.constructor.prototype),\n          ctx = Object.create(this._ctx);\n      if (props) extend(ctx, props);\n      rv._ctx = ctx;\n      return rv;\n    }\n  }, {\n    key: \"raw\",\n    value: function raw() {\n      this._ctx.valueMapper = null;\n      return this;\n    }\n  }, {\n    key: \"each\",\n    value: function each(fn) {\n      var ctx = this._ctx;\n      return this._read(function (trans) {\n        return iter(ctx, fn, trans, ctx.table.core);\n      });\n    }\n  }, {\n    key: \"count\",\n    value: function count(cb) {\n      var _this13 = this;\n\n      return this._read(function (trans) {\n        var ctx = _this13._ctx;\n        var coreTable = ctx.table.core;\n\n        if (isPlainKeyRange(ctx, true)) {\n          return coreTable.count({\n            trans: trans,\n            query: {\n              index: getIndexOrStore(ctx, coreTable.schema),\n              range: ctx.range\n            }\n          }).then(function (count) {\n            return Math.min(count, ctx.limit);\n          });\n        } else {\n          var count = 0;\n          return iter(ctx, function () {\n            ++count;\n            return false;\n          }, trans, coreTable).then(function () {\n            return count;\n          });\n        }\n      }).then(cb);\n    }\n  }, {\n    key: \"sortBy\",\n    value: function sortBy(keyPath, cb) {\n      var parts = keyPath.split('.').reverse(),\n          lastPart = parts[0],\n          lastIndex = parts.length - 1;\n\n      function getval(obj, i) {\n        if (i) return getval(obj[parts[i]], i - 1);\n        return obj[lastPart];\n      }\n\n      var order = this._ctx.dir === \"next\" ? 1 : -1;\n\n      function sorter(a, b) {\n        var aVal = getval(a, lastIndex),\n            bVal = getval(b, lastIndex);\n        return aVal < bVal ? -order : aVal > bVal ? order : 0;\n      }\n\n      return this.toArray(function (a) {\n        return a.sort(sorter);\n      }).then(cb);\n    }\n  }, {\n    key: \"toArray\",\n    value: function toArray(cb) {\n      var _this14 = this;\n\n      return this._read(function (trans) {\n        var ctx = _this14._ctx;\n\n        if (ctx.dir === 'next' && isPlainKeyRange(ctx, true) && ctx.limit > 0) {\n          var valueMapper = ctx.valueMapper;\n          var index = getIndexOrStore(ctx, ctx.table.core.schema);\n          return ctx.table.core.query({\n            trans: trans,\n            limit: ctx.limit,\n            values: true,\n            query: {\n              index: index,\n              range: ctx.range\n            }\n          }).then(function (_ref9) {\n            var result = _ref9.result;\n            return valueMapper ? result.map(valueMapper) : result;\n          });\n        } else {\n          var a = [];\n          return iter(ctx, function (item) {\n            return a.push(item);\n          }, trans, ctx.table.core).then(function () {\n            return a;\n          });\n        }\n      }, cb);\n    }\n  }, {\n    key: \"offset\",\n    value: function offset(_offset2) {\n      var ctx = this._ctx;\n      if (_offset2 <= 0) return this;\n      ctx.offset += _offset2;\n\n      if (isPlainKeyRange(ctx)) {\n        addReplayFilter(ctx, function () {\n          var offsetLeft = _offset2;\n          return function (cursor, advance) {\n            if (offsetLeft === 0) return true;\n\n            if (offsetLeft === 1) {\n              --offsetLeft;\n              return false;\n            }\n\n            advance(function () {\n              cursor.advance(offsetLeft);\n              offsetLeft = 0;\n            });\n            return false;\n          };\n        });\n      } else {\n        addReplayFilter(ctx, function () {\n          var offsetLeft = _offset2;\n          return function () {\n            return --offsetLeft < 0;\n          };\n        });\n      }\n\n      return this;\n    }\n  }, {\n    key: \"limit\",\n    value: function limit(numRows) {\n      this._ctx.limit = Math.min(this._ctx.limit, numRows);\n      addReplayFilter(this._ctx, function () {\n        var rowsLeft = numRows;\n        return function (cursor, advance, resolve) {\n          if (--rowsLeft <= 0) advance(resolve);\n          return rowsLeft >= 0;\n        };\n      }, true);\n      return this;\n    }\n  }, {\n    key: \"until\",\n    value: function until(filterFunction, bIncludeStopEntry) {\n      addFilter(this._ctx, function (cursor, advance, resolve) {\n        if (filterFunction(cursor.value)) {\n          advance(resolve);\n          return bIncludeStopEntry;\n        } else {\n          return true;\n        }\n      });\n      return this;\n    }\n  }, {\n    key: \"first\",\n    value: function first(cb) {\n      return this.limit(1).toArray(function (a) {\n        return a[0];\n      }).then(cb);\n    }\n  }, {\n    key: \"last\",\n    value: function last(cb) {\n      return this.reverse().first(cb);\n    }\n  }, {\n    key: \"filter\",\n    value: function filter(filterFunction) {\n      addFilter(this._ctx, function (cursor) {\n        return filterFunction(cursor.value);\n      });\n      addMatchFilter(this._ctx, filterFunction);\n      return this;\n    }\n  }, {\n    key: \"and\",\n    value: function and(filter) {\n      return this.filter(filter);\n    }\n  }, {\n    key: \"or\",\n    value: function or(indexName) {\n      return new this.db.WhereClause(this._ctx.table, indexName, this);\n    }\n  }, {\n    key: \"reverse\",\n    value: function reverse() {\n      this._ctx.dir = this._ctx.dir === \"prev\" ? \"next\" : \"prev\";\n      if (this._ondirectionchange) this._ondirectionchange(this._ctx.dir);\n      return this;\n    }\n  }, {\n    key: \"desc\",\n    value: function desc() {\n      return this.reverse();\n    }\n  }, {\n    key: \"eachKey\",\n    value: function eachKey(cb) {\n      var ctx = this._ctx;\n      ctx.keysOnly = !ctx.isMatch;\n      return this.each(function (val, cursor) {\n        cb(cursor.key, cursor);\n      });\n    }\n  }, {\n    key: \"eachUniqueKey\",\n    value: function eachUniqueKey(cb) {\n      this._ctx.unique = \"unique\";\n      return this.eachKey(cb);\n    }\n  }, {\n    key: \"eachPrimaryKey\",\n    value: function eachPrimaryKey(cb) {\n      var ctx = this._ctx;\n      ctx.keysOnly = !ctx.isMatch;\n      return this.each(function (val, cursor) {\n        cb(cursor.primaryKey, cursor);\n      });\n    }\n  }, {\n    key: \"keys\",\n    value: function keys(cb) {\n      var ctx = this._ctx;\n      ctx.keysOnly = !ctx.isMatch;\n      var a = [];\n      return this.each(function (item, cursor) {\n        a.push(cursor.key);\n      }).then(function () {\n        return a;\n      }).then(cb);\n    }\n  }, {\n    key: \"primaryKeys\",\n    value: function primaryKeys(cb) {\n      var ctx = this._ctx;\n\n      if (ctx.dir === 'next' && isPlainKeyRange(ctx, true) && ctx.limit > 0) {\n        return this._read(function (trans) {\n          var index = getIndexOrStore(ctx, ctx.table.core.schema);\n          return ctx.table.core.query({\n            trans: trans,\n            values: false,\n            limit: ctx.limit,\n            query: {\n              index: index,\n              range: ctx.range\n            }\n          });\n        }).then(function (_ref10) {\n          var result = _ref10.result;\n          return result;\n        }).then(cb);\n      }\n\n      ctx.keysOnly = !ctx.isMatch;\n      var a = [];\n      return this.each(function (item, cursor) {\n        a.push(cursor.primaryKey);\n      }).then(function () {\n        return a;\n      }).then(cb);\n    }\n  }, {\n    key: \"uniqueKeys\",\n    value: function uniqueKeys(cb) {\n      this._ctx.unique = \"unique\";\n      return this.keys(cb);\n    }\n  }, {\n    key: \"firstKey\",\n    value: function firstKey(cb) {\n      return this.limit(1).keys(function (a) {\n        return a[0];\n      }).then(cb);\n    }\n  }, {\n    key: \"lastKey\",\n    value: function lastKey(cb) {\n      return this.reverse().firstKey(cb);\n    }\n  }, {\n    key: \"distinct\",\n    value: function distinct() {\n      var ctx = this._ctx,\n          idx = ctx.index && ctx.table.schema.idxByName[ctx.index];\n      if (!idx || !idx.multi) return this;\n      var set = {};\n      addFilter(this._ctx, function (cursor) {\n        var strKey = cursor.primaryKey.toString();\n        var found = hasOwn(set, strKey);\n        set[strKey] = true;\n        return !found;\n      });\n      return this;\n    }\n  }, {\n    key: \"modify\",\n    value: function modify(changes) {\n      var _this15 = this;\n\n      var ctx = this._ctx;\n      return this._write(function (trans) {\n        var modifyer;\n\n        if (typeof changes === 'function') {\n          modifyer = changes;\n        } else {\n          var keyPaths = keys(changes);\n          var numKeys = keyPaths.length;\n\n          modifyer = function modifyer(item) {\n            var anythingModified = false;\n\n            for (var i = 0; i < numKeys; ++i) {\n              var keyPath = keyPaths[i],\n                  val = changes[keyPath];\n\n              if (getByKeyPath(item, keyPath) !== val) {\n                setByKeyPath(item, keyPath, val);\n                anythingModified = true;\n              }\n            }\n\n            return anythingModified;\n          };\n        }\n\n        var coreTable = ctx.table.core;\n        var _coreTable$schema$pri = coreTable.schema.primaryKey,\n            outbound = _coreTable$schema$pri.outbound,\n            extractKey = _coreTable$schema$pri.extractKey;\n        var limit = _this15.db._options.modifyChunkSize || 200;\n        var cmp = _this15.db.core.cmp;\n        var totalFailures = [];\n        var successCount = 0;\n        var failedKeys = [];\n\n        var applyMutateResult = function applyMutateResult(expectedCount, res) {\n          var failures = res.failures,\n              numFailures = res.numFailures;\n          successCount += expectedCount - numFailures;\n\n          var _iterator = _createForOfIteratorHelper(keys(failures)),\n              _step;\n\n          try {\n            for (_iterator.s(); !(_step = _iterator.n()).done;) {\n              var pos = _step.value;\n              totalFailures.push(failures[pos]);\n            }\n          } catch (err) {\n            _iterator.e(err);\n          } finally {\n            _iterator.f();\n          }\n        };\n\n        return _this15.clone().primaryKeys().then(function (keys) {\n          var nextChunk = function nextChunk(offset) {\n            var count = Math.min(limit, keys.length - offset);\n            return coreTable.getMany({\n              trans: trans,\n              keys: keys.slice(offset, offset + count),\n              cache: \"immutable\"\n            }).then(function (values) {\n              var addValues = [];\n              var putValues = [];\n              var putKeys = outbound ? [] : null;\n              var deleteKeys = [];\n\n              for (var i = 0; i < count; ++i) {\n                var origValue = values[i];\n                var _ctx = {\n                  value: deepClone(origValue),\n                  primKey: keys[offset + i]\n                };\n\n                if (modifyer.call(_ctx, _ctx.value, _ctx) !== false) {\n                  if (_ctx.value == null) {\n                    deleteKeys.push(keys[offset + i]);\n                  } else if (!outbound && cmp(extractKey(origValue), extractKey(_ctx.value)) !== 0) {\n                    deleteKeys.push(keys[offset + i]);\n                    addValues.push(_ctx.value);\n                  } else {\n                    putValues.push(_ctx.value);\n                    if (outbound) putKeys.push(keys[offset + i]);\n                  }\n                }\n              }\n\n              var criteria = isPlainKeyRange(ctx) && ctx.limit === Infinity && (typeof changes !== 'function' || changes === deleteCallback) && {\n                index: ctx.index,\n                range: ctx.range\n              };\n              return Promise.resolve(addValues.length > 0 && coreTable.mutate({\n                trans: trans,\n                type: 'add',\n                values: addValues\n              }).then(function (res) {\n                for (var pos in res.failures) {\n                  deleteKeys.splice(parseInt(pos), 1);\n                }\n\n                applyMutateResult(addValues.length, res);\n              })).then(function () {\n                return (putValues.length > 0 || criteria && typeof changes === 'object') && coreTable.mutate({\n                  trans: trans,\n                  type: 'put',\n                  keys: putKeys,\n                  values: putValues,\n                  criteria: criteria,\n                  changeSpec: typeof changes !== 'function' && changes\n                }).then(function (res) {\n                  return applyMutateResult(putValues.length, res);\n                });\n              }).then(function () {\n                return (deleteKeys.length > 0 || criteria && changes === deleteCallback) && coreTable.mutate({\n                  trans: trans,\n                  type: 'delete',\n                  keys: deleteKeys,\n                  criteria: criteria\n                }).then(function (res) {\n                  return applyMutateResult(deleteKeys.length, res);\n                });\n              }).then(function () {\n                return keys.length > offset + count && nextChunk(offset + limit);\n              });\n            });\n          };\n\n          return nextChunk(0).then(function () {\n            if (totalFailures.length > 0) throw new ModifyError(\"Error modifying one or more objects\", totalFailures, successCount, failedKeys);\n            return keys.length;\n          });\n        });\n      });\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      var ctx = this._ctx,\n          range = ctx.range;\n\n      if (isPlainKeyRange(ctx) && (ctx.isPrimKey && !hangsOnDeleteLargeKeyRange || range.type === 3)) {\n        return this._write(function (trans) {\n          var primaryKey = ctx.table.core.schema.primaryKey;\n          var coreRange = range;\n          return ctx.table.core.count({\n            trans: trans,\n            query: {\n              index: primaryKey,\n              range: coreRange\n            }\n          }).then(function (count) {\n            return ctx.table.core.mutate({\n              trans: trans,\n              type: 'deleteRange',\n              range: coreRange\n            }).then(function (_ref11) {\n              var failures = _ref11.failures,\n                  lastResult = _ref11.lastResult,\n                  results = _ref11.results,\n                  numFailures = _ref11.numFailures;\n              if (numFailures) throw new ModifyError(\"Could not delete some values\", Object.keys(failures).map(function (pos) {\n                return failures[pos];\n              }), count - numFailures);\n              return count - numFailures;\n            });\n          });\n        });\n      }\n\n      return this.modify(deleteCallback);\n    }\n  }]);\n\n  return Collection;\n}();\n\nvar deleteCallback = function deleteCallback(value, ctx) {\n  return ctx.value = null;\n};\n\nfunction createCollectionConstructor(db) {\n  return makeClassConstructor(Collection.prototype, function Collection(whereClause, keyRangeGenerator) {\n    this.db = db;\n    var keyRange = AnyRange,\n        error = null;\n    if (keyRangeGenerator) try {\n      keyRange = keyRangeGenerator();\n    } catch (ex) {\n      error = ex;\n    }\n    var whereCtx = whereClause._ctx;\n    var table = whereCtx.table;\n    var readingHook = table.hook.reading.fire;\n    this._ctx = {\n      table: table,\n      index: whereCtx.index,\n      isPrimKey: !whereCtx.index || table.schema.primKey.keyPath && whereCtx.index === table.schema.primKey.name,\n      range: keyRange,\n      keysOnly: false,\n      dir: \"next\",\n      unique: \"\",\n      algorithm: null,\n      filter: null,\n      replayFilter: null,\n      justLimit: true,\n      isMatch: null,\n      offset: 0,\n      limit: Infinity,\n      error: error,\n      or: whereCtx.or,\n      valueMapper: readingHook !== mirror ? readingHook : null\n    };\n  });\n}\n\nfunction simpleCompare(a, b) {\n  return a < b ? -1 : a === b ? 0 : 1;\n}\n\nfunction simpleCompareReverse(a, b) {\n  return a > b ? -1 : a === b ? 0 : 1;\n}\n\nfunction fail(collectionOrWhereClause, err, T) {\n  var collection = collectionOrWhereClause instanceof WhereClause ? new collectionOrWhereClause.Collection(collectionOrWhereClause) : collectionOrWhereClause;\n  collection._ctx.error = T ? new T(err) : new TypeError(err);\n  return collection;\n}\n\nfunction emptyCollection(whereClause) {\n  return new whereClause.Collection(whereClause, function () {\n    return rangeEqual(\"\");\n  }).limit(0);\n}\n\nfunction upperFactory(dir) {\n  return dir === \"next\" ? function (s) {\n    return s.toUpperCase();\n  } : function (s) {\n    return s.toLowerCase();\n  };\n}\n\nfunction lowerFactory(dir) {\n  return dir === \"next\" ? function (s) {\n    return s.toLowerCase();\n  } : function (s) {\n    return s.toUpperCase();\n  };\n}\n\nfunction nextCasing(key, lowerKey, upperNeedle, lowerNeedle, cmp, dir) {\n  var length = Math.min(key.length, lowerNeedle.length);\n  var llp = -1;\n\n  for (var i = 0; i < length; ++i) {\n    var lwrKeyChar = lowerKey[i];\n\n    if (lwrKeyChar !== lowerNeedle[i]) {\n      if (cmp(key[i], upperNeedle[i]) < 0) return key.substr(0, i) + upperNeedle[i] + upperNeedle.substr(i + 1);\n      if (cmp(key[i], lowerNeedle[i]) < 0) return key.substr(0, i) + lowerNeedle[i] + upperNeedle.substr(i + 1);\n      if (llp >= 0) return key.substr(0, llp) + lowerKey[llp] + upperNeedle.substr(llp + 1);\n      return null;\n    }\n\n    if (cmp(key[i], lwrKeyChar) < 0) llp = i;\n  }\n\n  if (length < lowerNeedle.length && dir === \"next\") return key + upperNeedle.substr(key.length);\n  if (length < key.length && dir === \"prev\") return key.substr(0, upperNeedle.length);\n  return llp < 0 ? null : key.substr(0, llp) + lowerNeedle[llp] + upperNeedle.substr(llp + 1);\n}\n\nfunction addIgnoreCaseAlgorithm(whereClause, match, needles, suffix) {\n  var upper,\n      lower,\n      compare,\n      upperNeedles,\n      lowerNeedles,\n      direction,\n      nextKeySuffix,\n      needlesLen = needles.length;\n\n  if (!needles.every(function (s) {\n    return typeof s === 'string';\n  })) {\n    return fail(whereClause, STRING_EXPECTED);\n  }\n\n  function initDirection(dir) {\n    upper = upperFactory(dir);\n    lower = lowerFactory(dir);\n    compare = dir === \"next\" ? simpleCompare : simpleCompareReverse;\n    var needleBounds = needles.map(function (needle) {\n      return {\n        lower: lower(needle),\n        upper: upper(needle)\n      };\n    }).sort(function (a, b) {\n      return compare(a.lower, b.lower);\n    });\n    upperNeedles = needleBounds.map(function (nb) {\n      return nb.upper;\n    });\n    lowerNeedles = needleBounds.map(function (nb) {\n      return nb.lower;\n    });\n    direction = dir;\n    nextKeySuffix = dir === \"next\" ? \"\" : suffix;\n  }\n\n  initDirection(\"next\");\n  var c = new whereClause.Collection(whereClause, function () {\n    return createRange(upperNeedles[0], lowerNeedles[needlesLen - 1] + suffix);\n  });\n\n  c._ondirectionchange = function (direction) {\n    initDirection(direction);\n  };\n\n  var firstPossibleNeedle = 0;\n\n  c._addAlgorithm(function (cursor, advance, resolve) {\n    var key = cursor.key;\n    if (typeof key !== 'string') return false;\n    var lowerKey = lower(key);\n\n    if (match(lowerKey, lowerNeedles, firstPossibleNeedle)) {\n      return true;\n    } else {\n      var lowestPossibleCasing = null;\n\n      for (var i = firstPossibleNeedle; i < needlesLen; ++i) {\n        var casing = nextCasing(key, lowerKey, upperNeedles[i], lowerNeedles[i], compare, direction);\n        if (casing === null && lowestPossibleCasing === null) firstPossibleNeedle = i + 1;else if (lowestPossibleCasing === null || compare(lowestPossibleCasing, casing) > 0) {\n          lowestPossibleCasing = casing;\n        }\n      }\n\n      if (lowestPossibleCasing !== null) {\n        advance(function () {\n          cursor.continue(lowestPossibleCasing + nextKeySuffix);\n        });\n      } else {\n        advance(resolve);\n      }\n\n      return false;\n    }\n  });\n\n  return c;\n}\n\nfunction createRange(lower, upper, lowerOpen, upperOpen) {\n  return {\n    type: 2,\n    lower: lower,\n    upper: upper,\n    lowerOpen: lowerOpen,\n    upperOpen: upperOpen\n  };\n}\n\nfunction rangeEqual(value) {\n  return {\n    type: 1,\n    lower: value,\n    upper: value\n  };\n}\n\nvar WhereClause = /*#__PURE__*/function () {\n  function WhereClause() {\n    _classCallCheck(this, WhereClause);\n  }\n\n  _createClass(WhereClause, [{\n    key: \"Collection\",\n    get: function get() {\n      return this._ctx.table.db.Collection;\n    }\n  }, {\n    key: \"between\",\n    value: function between(lower, upper, includeLower, includeUpper) {\n      includeLower = includeLower !== false;\n      includeUpper = includeUpper === true;\n\n      try {\n        if (this._cmp(lower, upper) > 0 || this._cmp(lower, upper) === 0 && (includeLower || includeUpper) && !(includeLower && includeUpper)) return emptyCollection(this);\n        return new this.Collection(this, function () {\n          return createRange(lower, upper, !includeLower, !includeUpper);\n        });\n      } catch (e) {\n        return fail(this, INVALID_KEY_ARGUMENT);\n      }\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(value) {\n      if (value == null) return fail(this, INVALID_KEY_ARGUMENT);\n      return new this.Collection(this, function () {\n        return rangeEqual(value);\n      });\n    }\n  }, {\n    key: \"above\",\n    value: function above(value) {\n      if (value == null) return fail(this, INVALID_KEY_ARGUMENT);\n      return new this.Collection(this, function () {\n        return createRange(value, undefined, true);\n      });\n    }\n  }, {\n    key: \"aboveOrEqual\",\n    value: function aboveOrEqual(value) {\n      if (value == null) return fail(this, INVALID_KEY_ARGUMENT);\n      return new this.Collection(this, function () {\n        return createRange(value, undefined, false);\n      });\n    }\n  }, {\n    key: \"below\",\n    value: function below(value) {\n      if (value == null) return fail(this, INVALID_KEY_ARGUMENT);\n      return new this.Collection(this, function () {\n        return createRange(undefined, value, false, true);\n      });\n    }\n  }, {\n    key: \"belowOrEqual\",\n    value: function belowOrEqual(value) {\n      if (value == null) return fail(this, INVALID_KEY_ARGUMENT);\n      return new this.Collection(this, function () {\n        return createRange(undefined, value);\n      });\n    }\n  }, {\n    key: \"startsWith\",\n    value: function startsWith(str) {\n      if (typeof str !== 'string') return fail(this, STRING_EXPECTED);\n      return this.between(str, str + maxString, true, true);\n    }\n  }, {\n    key: \"startsWithIgnoreCase\",\n    value: function startsWithIgnoreCase(str) {\n      if (str === \"\") return this.startsWith(str);\n      return addIgnoreCaseAlgorithm(this, function (x, a) {\n        return x.indexOf(a[0]) === 0;\n      }, [str], maxString);\n    }\n  }, {\n    key: \"equalsIgnoreCase\",\n    value: function equalsIgnoreCase(str) {\n      return addIgnoreCaseAlgorithm(this, function (x, a) {\n        return x === a[0];\n      }, [str], \"\");\n    }\n  }, {\n    key: \"anyOfIgnoreCase\",\n    value: function anyOfIgnoreCase() {\n      var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n      if (set.length === 0) return emptyCollection(this);\n      return addIgnoreCaseAlgorithm(this, function (x, a) {\n        return a.indexOf(x) !== -1;\n      }, set, \"\");\n    }\n  }, {\n    key: \"startsWithAnyOfIgnoreCase\",\n    value: function startsWithAnyOfIgnoreCase() {\n      var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n      if (set.length === 0) return emptyCollection(this);\n      return addIgnoreCaseAlgorithm(this, function (x, a) {\n        return a.some(function (n) {\n          return x.indexOf(n) === 0;\n        });\n      }, set, maxString);\n    }\n  }, {\n    key: \"anyOf\",\n    value: function anyOf() {\n      var _this16 = this;\n\n      var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n      var compare = this._cmp;\n\n      try {\n        set.sort(compare);\n      } catch (e) {\n        return fail(this, INVALID_KEY_ARGUMENT);\n      }\n\n      if (set.length === 0) return emptyCollection(this);\n      var c = new this.Collection(this, function () {\n        return createRange(set[0], set[set.length - 1]);\n      });\n\n      c._ondirectionchange = function (direction) {\n        compare = direction === \"next\" ? _this16._ascending : _this16._descending;\n        set.sort(compare);\n      };\n\n      var i = 0;\n\n      c._addAlgorithm(function (cursor, advance, resolve) {\n        var key = cursor.key;\n\n        while (compare(key, set[i]) > 0) {\n          ++i;\n\n          if (i === set.length) {\n            advance(resolve);\n            return false;\n          }\n        }\n\n        if (compare(key, set[i]) === 0) {\n          return true;\n        } else {\n          advance(function () {\n            cursor.continue(set[i]);\n          });\n          return false;\n        }\n      });\n\n      return c;\n    }\n  }, {\n    key: \"notEqual\",\n    value: function notEqual(value) {\n      return this.inAnyRange([[minKey, value], [value, this.db._maxKey]], {\n        includeLowers: false,\n        includeUppers: false\n      });\n    }\n  }, {\n    key: \"noneOf\",\n    value: function noneOf() {\n      var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n      if (set.length === 0) return new this.Collection(this);\n\n      try {\n        set.sort(this._ascending);\n      } catch (e) {\n        return fail(this, INVALID_KEY_ARGUMENT);\n      }\n\n      var ranges = set.reduce(function (res, val) {\n        return res ? res.concat([[res[res.length - 1][1], val]]) : [[minKey, val]];\n      }, null);\n      ranges.push([set[set.length - 1], this.db._maxKey]);\n      return this.inAnyRange(ranges, {\n        includeLowers: false,\n        includeUppers: false\n      });\n    }\n  }, {\n    key: \"inAnyRange\",\n    value: function inAnyRange(ranges, options) {\n      var _this17 = this;\n\n      var cmp = this._cmp,\n          ascending = this._ascending,\n          descending = this._descending,\n          min = this._min,\n          max = this._max;\n      if (ranges.length === 0) return emptyCollection(this);\n\n      if (!ranges.every(function (range) {\n        return range[0] !== undefined && range[1] !== undefined && ascending(range[0], range[1]) <= 0;\n      })) {\n        return fail(this, \"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower\", exceptions.InvalidArgument);\n      }\n\n      var includeLowers = !options || options.includeLowers !== false;\n      var includeUppers = options && options.includeUppers === true;\n\n      function addRange(ranges, newRange) {\n        var i = 0,\n            l = ranges.length;\n\n        for (; i < l; ++i) {\n          var range = ranges[i];\n\n          if (cmp(newRange[0], range[1]) < 0 && cmp(newRange[1], range[0]) > 0) {\n            range[0] = min(range[0], newRange[0]);\n            range[1] = max(range[1], newRange[1]);\n            break;\n          }\n        }\n\n        if (i === l) ranges.push(newRange);\n        return ranges;\n      }\n\n      var sortDirection = ascending;\n\n      function rangeSorter(a, b) {\n        return sortDirection(a[0], b[0]);\n      }\n\n      var set;\n\n      try {\n        set = ranges.reduce(addRange, []);\n        set.sort(rangeSorter);\n      } catch (ex) {\n        return fail(this, INVALID_KEY_ARGUMENT);\n      }\n\n      var rangePos = 0;\n      var keyIsBeyondCurrentEntry = includeUppers ? function (key) {\n        return ascending(key, set[rangePos][1]) > 0;\n      } : function (key) {\n        return ascending(key, set[rangePos][1]) >= 0;\n      };\n      var keyIsBeforeCurrentEntry = includeLowers ? function (key) {\n        return descending(key, set[rangePos][0]) > 0;\n      } : function (key) {\n        return descending(key, set[rangePos][0]) >= 0;\n      };\n\n      function keyWithinCurrentRange(key) {\n        return !keyIsBeyondCurrentEntry(key) && !keyIsBeforeCurrentEntry(key);\n      }\n\n      var checkKey = keyIsBeyondCurrentEntry;\n      var c = new this.Collection(this, function () {\n        return createRange(set[0][0], set[set.length - 1][1], !includeLowers, !includeUppers);\n      });\n\n      c._ondirectionchange = function (direction) {\n        if (direction === \"next\") {\n          checkKey = keyIsBeyondCurrentEntry;\n          sortDirection = ascending;\n        } else {\n          checkKey = keyIsBeforeCurrentEntry;\n          sortDirection = descending;\n        }\n\n        set.sort(rangeSorter);\n      };\n\n      c._addAlgorithm(function (cursor, advance, resolve) {\n        var key = cursor.key;\n\n        while (checkKey(key)) {\n          ++rangePos;\n\n          if (rangePos === set.length) {\n            advance(resolve);\n            return false;\n          }\n        }\n\n        if (keyWithinCurrentRange(key)) {\n          return true;\n        } else if (_this17._cmp(key, set[rangePos][1]) === 0 || _this17._cmp(key, set[rangePos][0]) === 0) {\n          return false;\n        } else {\n          advance(function () {\n            if (sortDirection === ascending) cursor.continue(set[rangePos][0]);else cursor.continue(set[rangePos][1]);\n          });\n          return false;\n        }\n      });\n\n      return c;\n    }\n  }, {\n    key: \"startsWithAnyOf\",\n    value: function startsWithAnyOf() {\n      var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n\n      if (!set.every(function (s) {\n        return typeof s === 'string';\n      })) {\n        return fail(this, \"startsWithAnyOf() only works with strings\");\n      }\n\n      if (set.length === 0) return emptyCollection(this);\n      return this.inAnyRange(set.map(function (str) {\n        return [str, str + maxString];\n      }));\n    }\n  }]);\n\n  return WhereClause;\n}();\n\nfunction createWhereClauseConstructor(db) {\n  return makeClassConstructor(WhereClause.prototype, function WhereClause(table, index, orCollection) {\n    this.db = db;\n    this._ctx = {\n      table: table,\n      index: index === \":id\" ? null : index,\n      or: orCollection\n    };\n    var indexedDB = db._deps.indexedDB;\n    if (!indexedDB) throw new exceptions.MissingAPI();\n    this._cmp = this._ascending = indexedDB.cmp.bind(indexedDB);\n\n    this._descending = function (a, b) {\n      return indexedDB.cmp(b, a);\n    };\n\n    this._max = function (a, b) {\n      return indexedDB.cmp(a, b) > 0 ? a : b;\n    };\n\n    this._min = function (a, b) {\n      return indexedDB.cmp(a, b) < 0 ? a : b;\n    };\n\n    this._IDBKeyRange = db._deps.IDBKeyRange;\n  });\n}\n\nfunction eventRejectHandler(reject) {\n  return wrap(function (event) {\n    preventDefault(event);\n    reject(event.target.error);\n    return false;\n  });\n}\n\nfunction preventDefault(event) {\n  if (event.stopPropagation) event.stopPropagation();\n  if (event.preventDefault) event.preventDefault();\n}\n\nvar globalEvents = Events(null, \"txcommitted\");\n\nvar Transaction = /*#__PURE__*/function () {\n  function Transaction() {\n    _classCallCheck(this, Transaction);\n  }\n\n  _createClass(Transaction, [{\n    key: \"_lock\",\n    value: function _lock() {\n      assert(!PSD.global);\n      ++this._reculock;\n      if (this._reculock === 1 && !PSD.global) PSD.lockOwnerFor = this;\n      return this;\n    }\n  }, {\n    key: \"_unlock\",\n    value: function _unlock() {\n      assert(!PSD.global);\n\n      if (--this._reculock === 0) {\n        if (!PSD.global) PSD.lockOwnerFor = null;\n\n        while (this._blockedFuncs.length > 0 && !this._locked()) {\n          var fnAndPSD = this._blockedFuncs.shift();\n\n          try {\n            usePSD(fnAndPSD[1], fnAndPSD[0]);\n          } catch (e) {}\n        }\n      }\n\n      return this;\n    }\n  }, {\n    key: \"_locked\",\n    value: function _locked() {\n      return this._reculock && PSD.lockOwnerFor !== this;\n    }\n  }, {\n    key: \"create\",\n    value: function create(idbtrans) {\n      var _this18 = this;\n\n      if (!this.mode) return this;\n      var idbdb = this.db.idbdb;\n      var dbOpenError = this.db._state.dbOpenError;\n      assert(!this.idbtrans);\n\n      if (!idbtrans && !idbdb) {\n        switch (dbOpenError && dbOpenError.name) {\n          case \"DatabaseClosedError\":\n            throw new exceptions.DatabaseClosed(dbOpenError);\n\n          case \"MissingAPIError\":\n            throw new exceptions.MissingAPI(dbOpenError.message, dbOpenError);\n\n          default:\n            throw new exceptions.OpenFailed(dbOpenError);\n        }\n      }\n\n      if (!this.active) throw new exceptions.TransactionInactive();\n      assert(this._completion._state === null);\n      idbtrans = this.idbtrans = idbtrans || (this.db.core ? this.db.core.transaction(this.storeNames, this.mode) : idbdb.transaction(this.storeNames, this.mode));\n      idbtrans.onerror = wrap(function (ev) {\n        preventDefault(ev);\n\n        _this18._reject(idbtrans.error);\n      });\n      idbtrans.onabort = wrap(function (ev) {\n        preventDefault(ev);\n        _this18.active && _this18._reject(new exceptions.Abort(idbtrans.error));\n        _this18.active = false;\n\n        _this18.on(\"abort\").fire(ev);\n      });\n      idbtrans.oncomplete = wrap(function () {\n        _this18.active = false;\n\n        _this18._resolve();\n\n        if ('mutatedParts' in idbtrans) {\n          globalEvents.txcommitted.fire(idbtrans[\"mutatedParts\"]);\n        }\n      });\n      return this;\n    }\n  }, {\n    key: \"_promise\",\n    value: function _promise(mode, fn, bWriteLock) {\n      var _this19 = this;\n\n      if (mode === 'readwrite' && this.mode !== 'readwrite') return rejection(new exceptions.ReadOnly(\"Transaction is readonly\"));\n      if (!this.active) return rejection(new exceptions.TransactionInactive());\n\n      if (this._locked()) {\n        return new DexiePromise(function (resolve, reject) {\n          _this19._blockedFuncs.push([function () {\n            _this19._promise(mode, fn, bWriteLock).then(resolve, reject);\n          }, PSD]);\n        });\n      } else if (bWriteLock) {\n        return newScope(function () {\n          var p = new DexiePromise(function (resolve, reject) {\n            _this19._lock();\n\n            var rv = fn(resolve, reject, _this19);\n            if (rv && rv.then) rv.then(resolve, reject);\n          });\n          p.finally(function () {\n            return _this19._unlock();\n          });\n          p._lib = true;\n          return p;\n        });\n      } else {\n        var p = new DexiePromise(function (resolve, reject) {\n          var rv = fn(resolve, reject, _this19);\n          if (rv && rv.then) rv.then(resolve, reject);\n        });\n        p._lib = true;\n        return p;\n      }\n    }\n  }, {\n    key: \"_root\",\n    value: function _root() {\n      return this.parent ? this.parent._root() : this;\n    }\n  }, {\n    key: \"waitFor\",\n    value: function waitFor(promiseLike) {\n      var root = this._root();\n\n      var promise = DexiePromise.resolve(promiseLike);\n\n      if (root._waitingFor) {\n        root._waitingFor = root._waitingFor.then(function () {\n          return promise;\n        });\n      } else {\n        root._waitingFor = promise;\n        root._waitingQueue = [];\n        var store = root.idbtrans.objectStore(root.storeNames[0]);\n\n        (function spin() {\n          ++root._spinCount;\n\n          while (root._waitingQueue.length) {\n            root._waitingQueue.shift()();\n          }\n\n          if (root._waitingFor) store.get(-Infinity).onsuccess = spin;\n        })();\n      }\n\n      var currentWaitPromise = root._waitingFor;\n      return new DexiePromise(function (resolve, reject) {\n        promise.then(function (res) {\n          return root._waitingQueue.push(wrap(resolve.bind(null, res)));\n        }, function (err) {\n          return root._waitingQueue.push(wrap(reject.bind(null, err)));\n        }).finally(function () {\n          if (root._waitingFor === currentWaitPromise) {\n            root._waitingFor = null;\n          }\n        });\n      });\n    }\n  }, {\n    key: \"abort\",\n    value: function abort() {\n      if (this.active) {\n        this.active = false;\n        if (this.idbtrans) this.idbtrans.abort();\n\n        this._reject(new exceptions.Abort());\n      }\n    }\n  }, {\n    key: \"table\",\n    value: function table(tableName) {\n      var memoizedTables = this._memoizedTables || (this._memoizedTables = {});\n      if (hasOwn(memoizedTables, tableName)) return memoizedTables[tableName];\n      var tableSchema = this.schema[tableName];\n\n      if (!tableSchema) {\n        throw new exceptions.NotFound(\"Table \" + tableName + \" not part of transaction\");\n      }\n\n      var transactionBoundTable = new this.db.Table(tableName, tableSchema, this);\n      transactionBoundTable.core = this.db.core.table(tableName);\n      memoizedTables[tableName] = transactionBoundTable;\n      return transactionBoundTable;\n    }\n  }]);\n\n  return Transaction;\n}();\n\nfunction createTransactionConstructor(db) {\n  return makeClassConstructor(Transaction.prototype, function Transaction(mode, storeNames, dbschema, parent) {\n    var _this20 = this;\n\n    this.db = db;\n    this.mode = mode;\n    this.storeNames = storeNames;\n    this.schema = dbschema;\n    this.idbtrans = null;\n    this.on = Events(this, \"complete\", \"error\", \"abort\");\n    this.parent = parent || null;\n    this.active = true;\n    this._reculock = 0;\n    this._blockedFuncs = [];\n    this._resolve = null;\n    this._reject = null;\n    this._waitingFor = null;\n    this._waitingQueue = null;\n    this._spinCount = 0;\n    this._completion = new DexiePromise(function (resolve, reject) {\n      _this20._resolve = resolve;\n      _this20._reject = reject;\n    });\n\n    this._completion.then(function () {\n      _this20.active = false;\n\n      _this20.on.complete.fire();\n    }, function (e) {\n      var wasActive = _this20.active;\n      _this20.active = false;\n\n      _this20.on.error.fire(e);\n\n      _this20.parent ? _this20.parent._reject(e) : wasActive && _this20.idbtrans && _this20.idbtrans.abort();\n      return rejection(e);\n    });\n  });\n}\n\nfunction createIndexSpec(name, keyPath, unique, multi, auto, compound, isPrimKey) {\n  return {\n    name: name,\n    keyPath: keyPath,\n    unique: unique,\n    multi: multi,\n    auto: auto,\n    compound: compound,\n    src: (unique && !isPrimKey ? '&' : '') + (multi ? '*' : '') + (auto ? \"++\" : \"\") + nameFromKeyPath(keyPath)\n  };\n}\n\nfunction nameFromKeyPath(keyPath) {\n  return typeof keyPath === 'string' ? keyPath : keyPath ? '[' + [].join.call(keyPath, '+') + ']' : \"\";\n}\n\nfunction createTableSchema(name, primKey, indexes) {\n  return {\n    name: name,\n    primKey: primKey,\n    indexes: indexes,\n    mappedClass: null,\n    idxByName: arrayToObject(indexes, function (index) {\n      return [index.name, index];\n    })\n  };\n}\n\nfunction getKeyExtractor(keyPath) {\n  if (keyPath == null) {\n    return function () {\n      return undefined;\n    };\n  } else if (typeof keyPath === 'string') {\n    return getSinglePathKeyExtractor(keyPath);\n  } else {\n    return function (obj) {\n      return getByKeyPath(obj, keyPath);\n    };\n  }\n}\n\nfunction getSinglePathKeyExtractor(keyPath) {\n  var split = keyPath.split('.');\n\n  if (split.length === 1) {\n    return function (obj) {\n      return obj[keyPath];\n    };\n  } else {\n    return function (obj) {\n      return getByKeyPath(obj, keyPath);\n    };\n  }\n}\n\nfunction arrayify(arrayLike) {\n  return [].slice.call(arrayLike);\n}\n\nvar _id_counter = 0;\n\nfunction getKeyPathAlias(keyPath) {\n  return keyPath == null ? \":id\" : typeof keyPath === 'string' ? keyPath : \"[\".concat(keyPath.join('+'), \"]\");\n}\n\nfunction createDBCore(db, indexedDB, IdbKeyRange, tmpTrans) {\n  var cmp = indexedDB.cmp.bind(indexedDB);\n\n  function extractSchema(db, trans) {\n    var tables = arrayify(db.objectStoreNames);\n    return {\n      schema: {\n        name: db.name,\n        tables: tables.map(function (table) {\n          return trans.objectStore(table);\n        }).map(function (store) {\n          var keyPath = store.keyPath,\n              autoIncrement = store.autoIncrement;\n          var compound = isArray(keyPath);\n          var outbound = keyPath == null;\n          var indexByKeyPath = {};\n          var result = {\n            name: store.name,\n            primaryKey: {\n              name: null,\n              isPrimaryKey: true,\n              outbound: outbound,\n              compound: compound,\n              keyPath: keyPath,\n              autoIncrement: autoIncrement,\n              unique: true,\n              extractKey: getKeyExtractor(keyPath)\n            },\n            indexes: arrayify(store.indexNames).map(function (indexName) {\n              return store.index(indexName);\n            }).map(function (index) {\n              var name = index.name,\n                  unique = index.unique,\n                  multiEntry = index.multiEntry,\n                  keyPath = index.keyPath;\n              var compound = isArray(keyPath);\n              var result = {\n                name: name,\n                compound: compound,\n                keyPath: keyPath,\n                unique: unique,\n                multiEntry: multiEntry,\n                extractKey: getKeyExtractor(keyPath)\n              };\n              indexByKeyPath[getKeyPathAlias(keyPath)] = result;\n              return result;\n            }),\n            getIndexByKeyPath: function getIndexByKeyPath(keyPath) {\n              return indexByKeyPath[getKeyPathAlias(keyPath)];\n            }\n          };\n          indexByKeyPath[\":id\"] = result.primaryKey;\n\n          if (keyPath != null) {\n            indexByKeyPath[getKeyPathAlias(keyPath)] = result.primaryKey;\n          }\n\n          return result;\n        })\n      },\n      hasGetAll: tables.length > 0 && 'getAll' in trans.objectStore(tables[0]) && !(typeof navigator !== 'undefined' && /Safari/.test(navigator.userAgent) && !/(Chrome\\/|Edge\\/)/.test(navigator.userAgent) && [].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1] < 604)\n    };\n  }\n\n  function makeIDBKeyRange(range) {\n    if (range.type === 3) return null;\n    if (range.type === 4) throw new Error(\"Cannot convert never type to IDBKeyRange\");\n    var lower = range.lower,\n        upper = range.upper,\n        lowerOpen = range.lowerOpen,\n        upperOpen = range.upperOpen;\n    var idbRange = lower === undefined ? upper === undefined ? null : IdbKeyRange.upperBound(upper, !!upperOpen) : upper === undefined ? IdbKeyRange.lowerBound(lower, !!lowerOpen) : IdbKeyRange.bound(lower, upper, !!lowerOpen, !!upperOpen);\n    return idbRange;\n  }\n\n  function createDbCoreTable(tableSchema) {\n    var tableName = tableSchema.name;\n\n    function mutate(_ref12) {\n      var trans = _ref12.trans,\n          type = _ref12.type,\n          keys = _ref12.keys,\n          values = _ref12.values,\n          range = _ref12.range;\n      return new Promise(function (resolve, reject) {\n        resolve = wrap(resolve);\n        var store = trans.objectStore(tableName);\n        var outbound = store.keyPath == null;\n        var isAddOrPut = type === \"put\" || type === \"add\";\n        if (!isAddOrPut && type !== 'delete' && type !== 'deleteRange') throw new Error(\"Invalid operation type: \" + type);\n\n        var _ref13 = keys || values || {\n          length: 1\n        },\n            length = _ref13.length;\n\n        if (keys && values && keys.length !== values.length) {\n          throw new Error(\"Given keys array must have same length as given values array.\");\n        }\n\n        if (length === 0) return resolve({\n          numFailures: 0,\n          failures: {},\n          results: [],\n          lastResult: undefined\n        });\n        var req;\n        var reqs = [];\n        var failures = [];\n        var numFailures = 0;\n\n        var errorHandler = function errorHandler(event) {\n          ++numFailures;\n          preventDefault(event);\n        };\n\n        if (type === 'deleteRange') {\n          if (range.type === 4) return resolve({\n            numFailures: numFailures,\n            failures: failures,\n            results: [],\n            lastResult: undefined\n          });\n          if (range.type === 3) reqs.push(req = store.clear());else reqs.push(req = store.delete(makeIDBKeyRange(range)));\n        } else {\n          var _ref14 = isAddOrPut ? outbound ? [values, keys] : [values, null] : [keys, null],\n              _ref15 = _slicedToArray(_ref14, 2),\n              args1 = _ref15[0],\n              args2 = _ref15[1];\n\n          if (isAddOrPut) {\n            for (var i = 0; i < length; ++i) {\n              reqs.push(req = args2 && args2[i] !== undefined ? store[type](args1[i], args2[i]) : store[type](args1[i]));\n              req.onerror = errorHandler;\n            }\n          } else {\n            for (var _i = 0; _i < length; ++_i) {\n              reqs.push(req = store[type](args1[_i]));\n              req.onerror = errorHandler;\n            }\n          }\n        }\n\n        var done = function done(event) {\n          var lastResult = event.target.result;\n          reqs.forEach(function (req, i) {\n            return req.error != null && (failures[i] = req.error);\n          });\n          resolve({\n            numFailures: numFailures,\n            failures: failures,\n            results: type === \"delete\" ? keys : reqs.map(function (req) {\n              return req.result;\n            }),\n            lastResult: lastResult\n          });\n        };\n\n        req.onerror = function (event) {\n          errorHandler(event);\n          done(event);\n        };\n\n        req.onsuccess = done;\n      });\n    }\n\n    function openCursor(_ref16) {\n      var trans = _ref16.trans,\n          values = _ref16.values,\n          query = _ref16.query,\n          reverse = _ref16.reverse,\n          unique = _ref16.unique;\n      return new Promise(function (resolve, reject) {\n        resolve = wrap(resolve);\n        var index = query.index,\n            range = query.range;\n        var store = trans.objectStore(tableName);\n        var source = index.isPrimaryKey ? store : store.index(index.name);\n        var direction = reverse ? unique ? \"prevunique\" : \"prev\" : unique ? \"nextunique\" : \"next\";\n        var req = values || !('openKeyCursor' in source) ? source.openCursor(makeIDBKeyRange(range), direction) : source.openKeyCursor(makeIDBKeyRange(range), direction);\n        req.onerror = eventRejectHandler(reject);\n        req.onsuccess = wrap(function (ev) {\n          var cursor = req.result;\n\n          if (!cursor) {\n            resolve(null);\n            return;\n          }\n\n          cursor.___id = ++_id_counter;\n          cursor.done = false;\n\n          var _cursorContinue = cursor.continue.bind(cursor);\n\n          var _cursorContinuePrimaryKey = cursor.continuePrimaryKey;\n          if (_cursorContinuePrimaryKey) _cursorContinuePrimaryKey = _cursorContinuePrimaryKey.bind(cursor);\n\n          var _cursorAdvance = cursor.advance.bind(cursor);\n\n          var doThrowCursorIsNotStarted = function doThrowCursorIsNotStarted() {\n            throw new Error(\"Cursor not started\");\n          };\n\n          var doThrowCursorIsStopped = function doThrowCursorIsStopped() {\n            throw new Error(\"Cursor not stopped\");\n          };\n\n          cursor.trans = trans;\n          cursor.stop = cursor.continue = cursor.continuePrimaryKey = cursor.advance = doThrowCursorIsNotStarted;\n          cursor.fail = wrap(reject);\n\n          cursor.next = function () {\n            var _this21 = this;\n\n            var gotOne = 1;\n            return this.start(function () {\n              return gotOne-- ? _this21.continue() : _this21.stop();\n            }).then(function () {\n              return _this21;\n            });\n          };\n\n          cursor.start = function (callback) {\n            var iterationPromise = new Promise(function (resolveIteration, rejectIteration) {\n              resolveIteration = wrap(resolveIteration);\n              req.onerror = eventRejectHandler(rejectIteration);\n              cursor.fail = rejectIteration;\n\n              cursor.stop = function (value) {\n                cursor.stop = cursor.continue = cursor.continuePrimaryKey = cursor.advance = doThrowCursorIsStopped;\n                resolveIteration(value);\n              };\n            });\n\n            var guardedCallback = function guardedCallback() {\n              if (req.result) {\n                try {\n                  callback();\n                } catch (err) {\n                  cursor.fail(err);\n                }\n              } else {\n                cursor.done = true;\n\n                cursor.start = function () {\n                  throw new Error(\"Cursor behind last entry\");\n                };\n\n                cursor.stop();\n              }\n            };\n\n            req.onsuccess = wrap(function (ev) {\n              req.onsuccess = guardedCallback;\n              guardedCallback();\n            });\n            cursor.continue = _cursorContinue;\n            cursor.continuePrimaryKey = _cursorContinuePrimaryKey;\n            cursor.advance = _cursorAdvance;\n            guardedCallback();\n            return iterationPromise;\n          };\n\n          resolve(cursor);\n        }, reject);\n      });\n    }\n\n    function query(hasGetAll) {\n      return function (request) {\n        return new Promise(function (resolve, reject) {\n          resolve = wrap(resolve);\n          var trans = request.trans,\n              values = request.values,\n              limit = request.limit,\n              query = request.query;\n          var nonInfinitLimit = limit === Infinity ? undefined : limit;\n          var index = query.index,\n              range = query.range;\n          var store = trans.objectStore(tableName);\n          var source = index.isPrimaryKey ? store : store.index(index.name);\n          var idbKeyRange = makeIDBKeyRange(range);\n          if (limit === 0) return resolve({\n            result: []\n          });\n\n          if (hasGetAll) {\n            var req = values ? source.getAll(idbKeyRange, nonInfinitLimit) : source.getAllKeys(idbKeyRange, nonInfinitLimit);\n\n            req.onsuccess = function (event) {\n              return resolve({\n                result: event.target.result\n              });\n            };\n\n            req.onerror = eventRejectHandler(reject);\n          } else {\n            var count = 0;\n\n            var _req = values || !('openKeyCursor' in source) ? source.openCursor(idbKeyRange) : source.openKeyCursor(idbKeyRange);\n\n            var result = [];\n\n            _req.onsuccess = function (event) {\n              var cursor = _req.result;\n              if (!cursor) return resolve({\n                result: result\n              });\n              result.push(values ? cursor.value : cursor.primaryKey);\n              if (++count === limit) return resolve({\n                result: result\n              });\n              cursor.continue();\n            };\n\n            _req.onerror = eventRejectHandler(reject);\n          }\n        });\n      };\n    }\n\n    return {\n      name: tableName,\n      schema: tableSchema,\n      mutate: mutate,\n      getMany: function getMany(_ref17) {\n        var trans = _ref17.trans,\n            keys = _ref17.keys;\n        return new Promise(function (resolve, reject) {\n          resolve = wrap(resolve);\n          var store = trans.objectStore(tableName);\n          var length = keys.length;\n          var result = new Array(length);\n          var keyCount = 0;\n          var callbackCount = 0;\n          var req;\n\n          var successHandler = function successHandler(event) {\n            var req = event.target;\n            if ((result[req._pos] = req.result) != null) ;\n            if (++callbackCount === keyCount) resolve(result);\n          };\n\n          var errorHandler = eventRejectHandler(reject);\n\n          for (var i = 0; i < length; ++i) {\n            var key = keys[i];\n\n            if (key != null) {\n              req = store.get(keys[i]);\n              req._pos = i;\n              req.onsuccess = successHandler;\n              req.onerror = errorHandler;\n              ++keyCount;\n            }\n          }\n\n          if (keyCount === 0) resolve(result);\n        });\n      },\n      get: function get(_ref18) {\n        var trans = _ref18.trans,\n            key = _ref18.key;\n        return new Promise(function (resolve, reject) {\n          resolve = wrap(resolve);\n          var store = trans.objectStore(tableName);\n          var req = store.get(key);\n\n          req.onsuccess = function (event) {\n            return resolve(event.target.result);\n          };\n\n          req.onerror = eventRejectHandler(reject);\n        });\n      },\n      query: query(hasGetAll),\n      openCursor: openCursor,\n      count: function count(_ref19) {\n        var query = _ref19.query,\n            trans = _ref19.trans;\n        var index = query.index,\n            range = query.range;\n        return new Promise(function (resolve, reject) {\n          var store = trans.objectStore(tableName);\n          var source = index.isPrimaryKey ? store : store.index(index.name);\n          var idbKeyRange = makeIDBKeyRange(range);\n          var req = idbKeyRange ? source.count(idbKeyRange) : source.count();\n          req.onsuccess = wrap(function (ev) {\n            return resolve(ev.target.result);\n          });\n          req.onerror = eventRejectHandler(reject);\n        });\n      }\n    };\n  }\n\n  var _extractSchema = extractSchema(db, tmpTrans),\n      schema = _extractSchema.schema,\n      hasGetAll = _extractSchema.hasGetAll;\n\n  var tables = schema.tables.map(function (tableSchema) {\n    return createDbCoreTable(tableSchema);\n  });\n  var tableMap = {};\n  tables.forEach(function (table) {\n    return tableMap[table.name] = table;\n  });\n  return {\n    stack: \"dbcore\",\n    transaction: db.transaction.bind(db),\n    table: function table(name) {\n      var result = tableMap[name];\n      if (!result) throw new Error(\"Table '\".concat(name, \"' not found\"));\n      return tableMap[name];\n    },\n    cmp: cmp,\n    MIN_KEY: -Infinity,\n    MAX_KEY: _getMaxKey(IdbKeyRange),\n    schema: schema\n  };\n}\n\nfunction createMiddlewareStack(stackImpl, middlewares) {\n  return middlewares.reduce(function (down, _ref20) {\n    var create = _ref20.create;\n    return _objectSpread(_objectSpread({}, down), create(down));\n  }, stackImpl);\n}\n\nfunction createMiddlewareStacks(middlewares, idbdb, _ref21, tmpTrans) {\n  var IDBKeyRange = _ref21.IDBKeyRange,\n      indexedDB = _ref21.indexedDB;\n  var dbcore = createMiddlewareStack(createDBCore(idbdb, indexedDB, IDBKeyRange, tmpTrans), middlewares.dbcore);\n  return {\n    dbcore: dbcore\n  };\n}\n\nfunction generateMiddlewareStacks(_ref22, tmpTrans) {\n  var db = _ref22._novip;\n  var idbdb = tmpTrans.db;\n  var stacks = createMiddlewareStacks(db._middlewares, idbdb, db._deps, tmpTrans);\n  db.core = stacks.dbcore;\n  db.tables.forEach(function (table) {\n    var tableName = table.name;\n\n    if (db.core.schema.tables.some(function (tbl) {\n      return tbl.name === tableName;\n    })) {\n      table.core = db.core.table(tableName);\n\n      if (db[tableName] instanceof db.Table) {\n        db[tableName].core = table.core;\n      }\n    }\n  });\n}\n\nfunction setApiOnPlace(_ref23, objs, tableNames, dbschema) {\n  var db = _ref23._novip;\n  tableNames.forEach(function (tableName) {\n    var schema = dbschema[tableName];\n    objs.forEach(function (obj) {\n      var propDesc = getPropertyDescriptor(obj, tableName);\n\n      if (!propDesc || \"value\" in propDesc && propDesc.value === undefined) {\n        if (obj === db.Transaction.prototype || obj instanceof db.Transaction) {\n          setProp(obj, tableName, {\n            get: function get() {\n              return this.table(tableName);\n            },\n            set: function set(value) {\n              defineProperty(this, tableName, {\n                value: value,\n                writable: true,\n                configurable: true,\n                enumerable: true\n              });\n            }\n          });\n        } else {\n          obj[tableName] = new db.Table(tableName, schema);\n        }\n      }\n    });\n  });\n}\n\nfunction removeTablesApi(_ref24, objs) {\n  var db = _ref24._novip;\n  objs.forEach(function (obj) {\n    for (var key in obj) {\n      if (obj[key] instanceof db.Table) delete obj[key];\n    }\n  });\n}\n\nfunction lowerVersionFirst(a, b) {\n  return a._cfg.version - b._cfg.version;\n}\n\nfunction runUpgraders(db, oldVersion, idbUpgradeTrans, reject) {\n  var globalSchema = db._dbSchema;\n\n  var trans = db._createTransaction('readwrite', db._storeNames, globalSchema);\n\n  trans.create(idbUpgradeTrans);\n\n  trans._completion.catch(reject);\n\n  var rejectTransaction = trans._reject.bind(trans);\n\n  var transless = PSD.transless || PSD;\n  newScope(function () {\n    PSD.trans = trans;\n    PSD.transless = transless;\n\n    if (oldVersion === 0) {\n      keys(globalSchema).forEach(function (tableName) {\n        createTable(idbUpgradeTrans, tableName, globalSchema[tableName].primKey, globalSchema[tableName].indexes);\n      });\n      generateMiddlewareStacks(db, idbUpgradeTrans);\n      DexiePromise.follow(function () {\n        return db.on.populate.fire(trans);\n      }).catch(rejectTransaction);\n    } else updateTablesAndIndexes(db, oldVersion, trans, idbUpgradeTrans).catch(rejectTransaction);\n  });\n}\n\nfunction updateTablesAndIndexes(_ref25, oldVersion, trans, idbUpgradeTrans) {\n  var db = _ref25._novip;\n  var queue = [];\n  var versions = db._versions;\n  var globalSchema = db._dbSchema = buildGlobalSchema(db, db.idbdb, idbUpgradeTrans);\n  var anyContentUpgraderHasRun = false;\n  var versToRun = versions.filter(function (v) {\n    return v._cfg.version >= oldVersion;\n  });\n  versToRun.forEach(function (version) {\n    queue.push(function () {\n      var oldSchema = globalSchema;\n      var newSchema = version._cfg.dbschema;\n      adjustToExistingIndexNames(db, oldSchema, idbUpgradeTrans);\n      adjustToExistingIndexNames(db, newSchema, idbUpgradeTrans);\n      globalSchema = db._dbSchema = newSchema;\n      var diff = getSchemaDiff(oldSchema, newSchema);\n      diff.add.forEach(function (tuple) {\n        createTable(idbUpgradeTrans, tuple[0], tuple[1].primKey, tuple[1].indexes);\n      });\n      diff.change.forEach(function (change) {\n        if (change.recreate) {\n          throw new exceptions.Upgrade(\"Not yet support for changing primary key\");\n        } else {\n          var store = idbUpgradeTrans.objectStore(change.name);\n          change.add.forEach(function (idx) {\n            return addIndex(store, idx);\n          });\n          change.change.forEach(function (idx) {\n            store.deleteIndex(idx.name);\n            addIndex(store, idx);\n          });\n          change.del.forEach(function (idxName) {\n            return store.deleteIndex(idxName);\n          });\n        }\n      });\n      var contentUpgrade = version._cfg.contentUpgrade;\n\n      if (contentUpgrade && version._cfg.version > oldVersion) {\n        generateMiddlewareStacks(db, idbUpgradeTrans);\n        trans._memoizedTables = {};\n        anyContentUpgraderHasRun = true;\n        var upgradeSchema = shallowClone(newSchema);\n        diff.del.forEach(function (table) {\n          upgradeSchema[table] = oldSchema[table];\n        });\n        removeTablesApi(db, [db.Transaction.prototype]);\n        setApiOnPlace(db, [db.Transaction.prototype], keys(upgradeSchema), upgradeSchema);\n        trans.schema = upgradeSchema;\n        var contentUpgradeIsAsync = isAsyncFunction(contentUpgrade);\n\n        if (contentUpgradeIsAsync) {\n          incrementExpectedAwaits();\n        }\n\n        var returnValue;\n        var promiseFollowed = DexiePromise.follow(function () {\n          returnValue = contentUpgrade(trans);\n\n          if (returnValue) {\n            if (contentUpgradeIsAsync) {\n              var decrementor = decrementExpectedAwaits.bind(null, null);\n              returnValue.then(decrementor, decrementor);\n            }\n          }\n        });\n        return returnValue && typeof returnValue.then === 'function' ? DexiePromise.resolve(returnValue) : promiseFollowed.then(function () {\n          return returnValue;\n        });\n      }\n    });\n    queue.push(function (idbtrans) {\n      if (!anyContentUpgraderHasRun || !hasIEDeleteObjectStoreBug) {\n        var newSchema = version._cfg.dbschema;\n        deleteRemovedTables(newSchema, idbtrans);\n      }\n\n      removeTablesApi(db, [db.Transaction.prototype]);\n      setApiOnPlace(db, [db.Transaction.prototype], db._storeNames, db._dbSchema);\n      trans.schema = db._dbSchema;\n    });\n  });\n\n  function runQueue() {\n    return queue.length ? DexiePromise.resolve(queue.shift()(trans.idbtrans)).then(runQueue) : DexiePromise.resolve();\n  }\n\n  return runQueue().then(function () {\n    createMissingTables(globalSchema, idbUpgradeTrans);\n  });\n}\n\nfunction getSchemaDiff(oldSchema, newSchema) {\n  var diff = {\n    del: [],\n    add: [],\n    change: []\n  };\n  var table;\n\n  for (table in oldSchema) {\n    if (!newSchema[table]) diff.del.push(table);\n  }\n\n  for (table in newSchema) {\n    var oldDef = oldSchema[table],\n        newDef = newSchema[table];\n\n    if (!oldDef) {\n      diff.add.push([table, newDef]);\n    } else {\n      var change = {\n        name: table,\n        def: newDef,\n        recreate: false,\n        del: [],\n        add: [],\n        change: []\n      };\n\n      if ('' + (oldDef.primKey.keyPath || '') !== '' + (newDef.primKey.keyPath || '') || oldDef.primKey.auto !== newDef.primKey.auto && !isIEOrEdge) {\n        change.recreate = true;\n        diff.change.push(change);\n      } else {\n        var oldIndexes = oldDef.idxByName;\n        var newIndexes = newDef.idxByName;\n        var idxName = void 0;\n\n        for (idxName in oldIndexes) {\n          if (!newIndexes[idxName]) change.del.push(idxName);\n        }\n\n        for (idxName in newIndexes) {\n          var oldIdx = oldIndexes[idxName],\n              newIdx = newIndexes[idxName];\n          if (!oldIdx) change.add.push(newIdx);else if (oldIdx.src !== newIdx.src) change.change.push(newIdx);\n        }\n\n        if (change.del.length > 0 || change.add.length > 0 || change.change.length > 0) {\n          diff.change.push(change);\n        }\n      }\n    }\n  }\n\n  return diff;\n}\n\nfunction createTable(idbtrans, tableName, primKey, indexes) {\n  var store = idbtrans.db.createObjectStore(tableName, primKey.keyPath ? {\n    keyPath: primKey.keyPath,\n    autoIncrement: primKey.auto\n  } : {\n    autoIncrement: primKey.auto\n  });\n  indexes.forEach(function (idx) {\n    return addIndex(store, idx);\n  });\n  return store;\n}\n\nfunction createMissingTables(newSchema, idbtrans) {\n  keys(newSchema).forEach(function (tableName) {\n    if (!idbtrans.db.objectStoreNames.contains(tableName)) {\n      createTable(idbtrans, tableName, newSchema[tableName].primKey, newSchema[tableName].indexes);\n    }\n  });\n}\n\nfunction deleteRemovedTables(newSchema, idbtrans) {\n  for (var i = 0; i < idbtrans.db.objectStoreNames.length; ++i) {\n    var storeName = idbtrans.db.objectStoreNames[i];\n\n    if (newSchema[storeName] == null) {\n      idbtrans.db.deleteObjectStore(storeName);\n    }\n  }\n}\n\nfunction addIndex(store, idx) {\n  store.createIndex(idx.name, idx.keyPath, {\n    unique: idx.unique,\n    multiEntry: idx.multi\n  });\n}\n\nfunction buildGlobalSchema(db, idbdb, tmpTrans) {\n  var globalSchema = {};\n  var dbStoreNames = slice(idbdb.objectStoreNames, 0);\n  dbStoreNames.forEach(function (storeName) {\n    var store = tmpTrans.objectStore(storeName);\n    var keyPath = store.keyPath;\n    var primKey = createIndexSpec(nameFromKeyPath(keyPath), keyPath || \"\", false, false, !!store.autoIncrement, keyPath && typeof keyPath !== \"string\", true);\n    var indexes = [];\n\n    for (var j = 0; j < store.indexNames.length; ++j) {\n      var idbindex = store.index(store.indexNames[j]);\n      keyPath = idbindex.keyPath;\n      var index = createIndexSpec(idbindex.name, keyPath, !!idbindex.unique, !!idbindex.multiEntry, false, keyPath && typeof keyPath !== \"string\", false);\n      indexes.push(index);\n    }\n\n    globalSchema[storeName] = createTableSchema(storeName, primKey, indexes);\n  });\n  return globalSchema;\n}\n\nfunction readGlobalSchema(_ref26, idbdb, tmpTrans) {\n  var db = _ref26._novip;\n  db.verno = idbdb.version / 10;\n  var globalSchema = db._dbSchema = buildGlobalSchema(db, idbdb, tmpTrans);\n  db._storeNames = slice(idbdb.objectStoreNames, 0);\n  setApiOnPlace(db, [db._allTables], keys(globalSchema), globalSchema);\n}\n\nfunction verifyInstalledSchema(db, tmpTrans) {\n  var installedSchema = buildGlobalSchema(db, db.idbdb, tmpTrans);\n  var diff = getSchemaDiff(installedSchema, db._dbSchema);\n  return !(diff.add.length || diff.change.some(function (ch) {\n    return ch.add.length || ch.change.length;\n  }));\n}\n\nfunction adjustToExistingIndexNames(_ref27, schema, idbtrans) {\n  var db = _ref27._novip;\n  var storeNames = idbtrans.db.objectStoreNames;\n\n  for (var i = 0; i < storeNames.length; ++i) {\n    var storeName = storeNames[i];\n    var store = idbtrans.objectStore(storeName);\n    db._hasGetAll = 'getAll' in store;\n\n    for (var j = 0; j < store.indexNames.length; ++j) {\n      var indexName = store.indexNames[j];\n      var keyPath = store.index(indexName).keyPath;\n      var dexieName = typeof keyPath === 'string' ? keyPath : \"[\" + slice(keyPath).join('+') + \"]\";\n\n      if (schema[storeName]) {\n        var indexSpec = schema[storeName].idxByName[dexieName];\n\n        if (indexSpec) {\n          indexSpec.name = indexName;\n          delete schema[storeName].idxByName[dexieName];\n          schema[storeName].idxByName[indexName] = indexSpec;\n        }\n      }\n    }\n  }\n\n  if (typeof navigator !== 'undefined' && /Safari/.test(navigator.userAgent) && !/(Chrome\\/|Edge\\/)/.test(navigator.userAgent) && _global.WorkerGlobalScope && _global instanceof _global.WorkerGlobalScope && [].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1] < 604) {\n    db._hasGetAll = false;\n  }\n}\n\nfunction parseIndexSyntax(primKeyAndIndexes) {\n  return primKeyAndIndexes.split(',').map(function (index, indexNum) {\n    index = index.trim();\n    var name = index.replace(/([&*]|\\+\\+)/g, \"\");\n    var keyPath = /^\\[/.test(name) ? name.match(/^\\[(.*)\\]$/)[1].split('+') : name;\n    return createIndexSpec(name, keyPath || null, /\\&/.test(index), /\\*/.test(index), /\\+\\+/.test(index), isArray(keyPath), indexNum === 0);\n  });\n}\n\nvar Version = /*#__PURE__*/function () {\n  function Version() {\n    _classCallCheck(this, Version);\n  }\n\n  _createClass(Version, [{\n    key: \"_parseStoresSpec\",\n    value: function _parseStoresSpec(stores, outSchema) {\n      keys(stores).forEach(function (tableName) {\n        if (stores[tableName] !== null) {\n          var indexes = parseIndexSyntax(stores[tableName]);\n          var primKey = indexes.shift();\n          if (primKey.multi) throw new exceptions.Schema(\"Primary key cannot be multi-valued\");\n          indexes.forEach(function (idx) {\n            if (idx.auto) throw new exceptions.Schema(\"Only primary key can be marked as autoIncrement (++)\");\n            if (!idx.keyPath) throw new exceptions.Schema(\"Index must have a name and cannot be an empty string\");\n          });\n          outSchema[tableName] = createTableSchema(tableName, primKey, indexes);\n        }\n      });\n    }\n  }, {\n    key: \"stores\",\n    value: function stores(_stores) {\n      var db = this.db;\n      this._cfg.storesSource = this._cfg.storesSource ? extend(this._cfg.storesSource, _stores) : _stores;\n      var versions = db._versions;\n      var storesSpec = {};\n      var dbschema = {};\n      versions.forEach(function (version) {\n        extend(storesSpec, version._cfg.storesSource);\n        dbschema = version._cfg.dbschema = {};\n\n        version._parseStoresSpec(storesSpec, dbschema);\n      });\n      db._dbSchema = dbschema;\n      removeTablesApi(db, [db._allTables, db, db.Transaction.prototype]);\n      setApiOnPlace(db, [db._allTables, db, db.Transaction.prototype, this._cfg.tables], keys(dbschema), dbschema);\n      db._storeNames = keys(dbschema);\n      return this;\n    }\n  }, {\n    key: \"upgrade\",\n    value: function upgrade(upgradeFunction) {\n      this._cfg.contentUpgrade = promisableChain(this._cfg.contentUpgrade || nop, upgradeFunction);\n      return this;\n    }\n  }]);\n\n  return Version;\n}();\n\nfunction createVersionConstructor(db) {\n  return makeClassConstructor(Version.prototype, function Version(versionNumber) {\n    this.db = db;\n    this._cfg = {\n      version: versionNumber,\n      storesSource: null,\n      dbschema: {},\n      tables: {},\n      contentUpgrade: null\n    };\n  });\n}\n\nfunction getDbNamesTable(indexedDB, IDBKeyRange) {\n  var dbNamesDB = indexedDB[\"_dbNamesDB\"];\n\n  if (!dbNamesDB) {\n    dbNamesDB = indexedDB[\"_dbNamesDB\"] = new Dexie$1(DBNAMES_DB, {\n      addons: [],\n      indexedDB: indexedDB,\n      IDBKeyRange: IDBKeyRange\n    });\n    dbNamesDB.version(1).stores({\n      dbnames: \"name\"\n    });\n  }\n\n  return dbNamesDB.table(\"dbnames\");\n}\n\nfunction hasDatabasesNative(indexedDB) {\n  return indexedDB && typeof indexedDB.databases === \"function\";\n}\n\nfunction _getDatabaseNames(_ref28) {\n  var indexedDB = _ref28.indexedDB,\n      IDBKeyRange = _ref28.IDBKeyRange;\n  return hasDatabasesNative(indexedDB) ? Promise.resolve(indexedDB.databases()).then(function (infos) {\n    return infos.map(function (info) {\n      return info.name;\n    }).filter(function (name) {\n      return name !== DBNAMES_DB;\n    });\n  }) : getDbNamesTable(indexedDB, IDBKeyRange).toCollection().primaryKeys();\n}\n\nfunction _onDatabaseCreated(_ref29, name) {\n  var indexedDB = _ref29.indexedDB,\n      IDBKeyRange = _ref29.IDBKeyRange;\n  !hasDatabasesNative(indexedDB) && name !== DBNAMES_DB && getDbNamesTable(indexedDB, IDBKeyRange).put({\n    name: name\n  }).catch(nop);\n}\n\nfunction _onDatabaseDeleted(_ref30, name) {\n  var indexedDB = _ref30.indexedDB,\n      IDBKeyRange = _ref30.IDBKeyRange;\n  !hasDatabasesNative(indexedDB) && name !== DBNAMES_DB && getDbNamesTable(indexedDB, IDBKeyRange).delete(name).catch(nop);\n}\n\nfunction vip(fn) {\n  return newScope(function () {\n    PSD.letThrough = true;\n    return fn();\n  });\n}\n\nfunction idbReady() {\n  var isSafari = !navigator.userAgentData && /Safari\\//.test(navigator.userAgent) && !/Chrom(e|ium)\\//.test(navigator.userAgent);\n  if (!isSafari || !indexedDB.databases) return Promise.resolve();\n  var intervalId;\n  return new Promise(function (resolve) {\n    var tryIdb = function tryIdb() {\n      return indexedDB.databases().finally(resolve);\n    };\n\n    intervalId = setInterval(tryIdb, 100);\n    tryIdb();\n  }).finally(function () {\n    return clearInterval(intervalId);\n  });\n}\n\nfunction dexieOpen(db) {\n  var state = db._state;\n  var indexedDB = db._deps.indexedDB;\n  if (state.isBeingOpened || db.idbdb) return state.dbReadyPromise.then(function () {\n    return state.dbOpenError ? rejection(state.dbOpenError) : db;\n  });\n  debug && (state.openCanceller._stackHolder = getErrorWithStack());\n  state.isBeingOpened = true;\n  state.dbOpenError = null;\n  state.openComplete = false;\n  var openCanceller = state.openCanceller;\n\n  function throwIfCancelled() {\n    if (state.openCanceller !== openCanceller) throw new exceptions.DatabaseClosed('db.open() was cancelled');\n  }\n\n  var resolveDbReady = state.dbReadyResolve,\n      upgradeTransaction = null,\n      wasCreated = false;\n  return DexiePromise.race([openCanceller, idbReady().then(function () {\n    return new DexiePromise(function (resolve, reject) {\n      throwIfCancelled();\n      if (!indexedDB) throw new exceptions.MissingAPI();\n      var dbName = db.name;\n      var req = state.autoSchema ? indexedDB.open(dbName) : indexedDB.open(dbName, Math.round(db.verno * 10));\n      if (!req) throw new exceptions.MissingAPI();\n      req.onerror = eventRejectHandler(reject);\n      req.onblocked = wrap(db._fireOnBlocked);\n      req.onupgradeneeded = wrap(function (e) {\n        upgradeTransaction = req.transaction;\n\n        if (state.autoSchema && !db._options.allowEmptyDB) {\n          req.onerror = preventDefault;\n          upgradeTransaction.abort();\n          req.result.close();\n          var delreq = indexedDB.deleteDatabase(dbName);\n          delreq.onsuccess = delreq.onerror = wrap(function () {\n            reject(new exceptions.NoSuchDatabase(\"Database \".concat(dbName, \" doesnt exist\")));\n          });\n        } else {\n          upgradeTransaction.onerror = eventRejectHandler(reject);\n          var oldVer = e.oldVersion > Math.pow(2, 62) ? 0 : e.oldVersion;\n          wasCreated = oldVer < 1;\n          db._novip.idbdb = req.result;\n          runUpgraders(db, oldVer / 10, upgradeTransaction, reject);\n        }\n      }, reject);\n      req.onsuccess = wrap(function () {\n        upgradeTransaction = null;\n        var idbdb = db._novip.idbdb = req.result;\n        var objectStoreNames = slice(idbdb.objectStoreNames);\n        if (objectStoreNames.length > 0) try {\n          var tmpTrans = idbdb.transaction(safariMultiStoreFix(objectStoreNames), 'readonly');\n          if (state.autoSchema) readGlobalSchema(db, idbdb, tmpTrans);else {\n            adjustToExistingIndexNames(db, db._dbSchema, tmpTrans);\n\n            if (!verifyInstalledSchema(db, tmpTrans)) {\n              console.warn(\"Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.\");\n            }\n          }\n          generateMiddlewareStacks(db, tmpTrans);\n        } catch (e) {}\n        connections.push(db);\n        idbdb.onversionchange = wrap(function (ev) {\n          state.vcFired = true;\n          db.on(\"versionchange\").fire(ev);\n        });\n        idbdb.onclose = wrap(function (ev) {\n          db.on(\"close\").fire(ev);\n        });\n        if (wasCreated) _onDatabaseCreated(db._deps, dbName);\n        resolve();\n      }, reject);\n    });\n  })]).then(function () {\n    throwIfCancelled();\n    state.onReadyBeingFired = [];\n    return DexiePromise.resolve(vip(function () {\n      return db.on.ready.fire(db.vip);\n    })).then(function fireRemainders() {\n      if (state.onReadyBeingFired.length > 0) {\n        var remainders = state.onReadyBeingFired.reduce(promisableChain, nop);\n        state.onReadyBeingFired = [];\n        return DexiePromise.resolve(vip(function () {\n          return remainders(db.vip);\n        })).then(fireRemainders);\n      }\n    });\n  }).finally(function () {\n    state.onReadyBeingFired = null;\n    state.isBeingOpened = false;\n  }).then(function () {\n    return db;\n  }).catch(function (err) {\n    state.dbOpenError = err;\n\n    try {\n      upgradeTransaction && upgradeTransaction.abort();\n    } catch (_a) {}\n\n    if (openCanceller === state.openCanceller) {\n      db._close();\n    }\n\n    return rejection(err);\n  }).finally(function () {\n    state.openComplete = true;\n    resolveDbReady();\n  });\n}\n\nfunction awaitIterator(iterator) {\n  var callNext = function callNext(result) {\n    return iterator.next(result);\n  },\n      doThrow = function doThrow(error) {\n    return iterator.throw(error);\n  },\n      onSuccess = step(callNext),\n      onError = step(doThrow);\n\n  function step(getNext) {\n    return function (val) {\n      var next = getNext(val),\n          value = next.value;\n      return next.done ? value : !value || typeof value.then !== 'function' ? isArray(value) ? Promise.all(value).then(onSuccess, onError) : onSuccess(value) : value.then(onSuccess, onError);\n    };\n  }\n\n  return step(callNext)();\n}\n\nfunction extractTransactionArgs(mode, _tableArgs_, scopeFunc) {\n  var i = arguments.length;\n  if (i < 2) throw new exceptions.InvalidArgument(\"Too few arguments\");\n  var args = new Array(i - 1);\n\n  while (--i) {\n    args[i - 1] = arguments[i];\n  }\n\n  scopeFunc = args.pop();\n  var tables = flatten(args);\n  return [mode, tables, scopeFunc];\n}\n\nfunction enterTransactionScope(db, mode, storeNames, parentTransaction, scopeFunc) {\n  return DexiePromise.resolve().then(function () {\n    var transless = PSD.transless || PSD;\n\n    var trans = db._createTransaction(mode, storeNames, db._dbSchema, parentTransaction);\n\n    var zoneProps = {\n      trans: trans,\n      transless: transless\n    };\n\n    if (parentTransaction) {\n      trans.idbtrans = parentTransaction.idbtrans;\n    } else {\n      trans.create();\n    }\n\n    var scopeFuncIsAsync = isAsyncFunction(scopeFunc);\n\n    if (scopeFuncIsAsync) {\n      incrementExpectedAwaits();\n    }\n\n    var returnValue;\n    var promiseFollowed = DexiePromise.follow(function () {\n      returnValue = scopeFunc.call(trans, trans);\n\n      if (returnValue) {\n        if (scopeFuncIsAsync) {\n          var decrementor = decrementExpectedAwaits.bind(null, null);\n          returnValue.then(decrementor, decrementor);\n        } else if (typeof returnValue.next === 'function' && typeof returnValue.throw === 'function') {\n          returnValue = awaitIterator(returnValue);\n        }\n      }\n    }, zoneProps);\n    return (returnValue && typeof returnValue.then === 'function' ? DexiePromise.resolve(returnValue).then(function (x) {\n      return trans.active ? x : rejection(new exceptions.PrematureCommit(\"Transaction committed too early. See http://bit.ly/2kdckMn\"));\n    }) : promiseFollowed.then(function () {\n      return returnValue;\n    })).then(function (x) {\n      if (parentTransaction) trans._resolve();\n      return trans._completion.then(function () {\n        return x;\n      });\n    }).catch(function (e) {\n      trans._reject(e);\n\n      return rejection(e);\n    });\n  });\n}\n\nfunction pad(a, value, count) {\n  var result = isArray(a) ? a.slice() : [a];\n\n  for (var i = 0; i < count; ++i) {\n    result.push(value);\n  }\n\n  return result;\n}\n\nfunction createVirtualIndexMiddleware(down) {\n  return _objectSpread(_objectSpread({}, down), {}, {\n    table: function table(tableName) {\n      var table = down.table(tableName);\n      var schema = table.schema;\n      var indexLookup = {};\n      var allVirtualIndexes = [];\n\n      function addVirtualIndexes(keyPath, keyTail, lowLevelIndex) {\n        var keyPathAlias = getKeyPathAlias(keyPath);\n        var indexList = indexLookup[keyPathAlias] = indexLookup[keyPathAlias] || [];\n        var keyLength = keyPath == null ? 0 : typeof keyPath === 'string' ? 1 : keyPath.length;\n        var isVirtual = keyTail > 0;\n\n        var virtualIndex = _objectSpread(_objectSpread({}, lowLevelIndex), {}, {\n          isVirtual: isVirtual,\n          keyTail: keyTail,\n          keyLength: keyLength,\n          extractKey: getKeyExtractor(keyPath),\n          unique: !isVirtual && lowLevelIndex.unique\n        });\n\n        indexList.push(virtualIndex);\n\n        if (!virtualIndex.isPrimaryKey) {\n          allVirtualIndexes.push(virtualIndex);\n        }\n\n        if (keyLength > 1) {\n          var virtualKeyPath = keyLength === 2 ? keyPath[0] : keyPath.slice(0, keyLength - 1);\n          addVirtualIndexes(virtualKeyPath, keyTail + 1, lowLevelIndex);\n        }\n\n        indexList.sort(function (a, b) {\n          return a.keyTail - b.keyTail;\n        });\n        return virtualIndex;\n      }\n\n      var primaryKey = addVirtualIndexes(schema.primaryKey.keyPath, 0, schema.primaryKey);\n      indexLookup[\":id\"] = [primaryKey];\n\n      var _iterator2 = _createForOfIteratorHelper(schema.indexes),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var index = _step2.value;\n          addVirtualIndexes(index.keyPath, 0, index);\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      function findBestIndex(keyPath) {\n        var result = indexLookup[getKeyPathAlias(keyPath)];\n        return result && result[0];\n      }\n\n      function translateRange(range, keyTail) {\n        return {\n          type: range.type === 1 ? 2 : range.type,\n          lower: pad(range.lower, range.lowerOpen ? down.MAX_KEY : down.MIN_KEY, keyTail),\n          lowerOpen: true,\n          upper: pad(range.upper, range.upperOpen ? down.MIN_KEY : down.MAX_KEY, keyTail),\n          upperOpen: true\n        };\n      }\n\n      function translateRequest(req) {\n        var index = req.query.index;\n        return index.isVirtual ? _objectSpread(_objectSpread({}, req), {}, {\n          query: {\n            index: index,\n            range: translateRange(req.query.range, index.keyTail)\n          }\n        }) : req;\n      }\n\n      var result = _objectSpread(_objectSpread({}, table), {}, {\n        schema: _objectSpread(_objectSpread({}, schema), {}, {\n          primaryKey: primaryKey,\n          indexes: allVirtualIndexes,\n          getIndexByKeyPath: findBestIndex\n        }),\n        count: function count(req) {\n          return table.count(translateRequest(req));\n        },\n        query: function query(req) {\n          return table.query(translateRequest(req));\n        },\n        openCursor: function openCursor(req) {\n          var _req$query$index = req.query.index,\n              keyTail = _req$query$index.keyTail,\n              isVirtual = _req$query$index.isVirtual,\n              keyLength = _req$query$index.keyLength;\n          if (!isVirtual) return table.openCursor(req);\n\n          function createVirtualCursor(cursor) {\n            function _continue(key) {\n              key != null ? cursor.continue(pad(key, req.reverse ? down.MAX_KEY : down.MIN_KEY, keyTail)) : req.unique ? cursor.continue(cursor.key.slice(0, keyLength).concat(req.reverse ? down.MIN_KEY : down.MAX_KEY, keyTail)) : cursor.continue();\n            }\n\n            var virtualCursor = Object.create(cursor, {\n              continue: {\n                value: _continue\n              },\n              continuePrimaryKey: {\n                value: function value(key, primaryKey) {\n                  cursor.continuePrimaryKey(pad(key, down.MAX_KEY, keyTail), primaryKey);\n                }\n              },\n              key: {\n                get: function get() {\n                  var key = cursor.key;\n                  return keyLength === 1 ? key[0] : key.slice(0, keyLength);\n                }\n              },\n              value: {\n                get: function get() {\n                  return cursor.value;\n                }\n              }\n            });\n            return virtualCursor;\n          }\n\n          return table.openCursor(translateRequest(req)).then(function (cursor) {\n            return cursor && createVirtualCursor(cursor);\n          });\n        }\n      });\n\n      return result;\n    }\n  });\n}\n\nvar virtualIndexMiddleware = {\n  stack: \"dbcore\",\n  name: \"VirtualIndexMiddleware\",\n  level: 1,\n  create: createVirtualIndexMiddleware\n};\n\nfunction getObjectDiff(a, b, rv, prfx) {\n  rv = rv || {};\n  prfx = prfx || '';\n  keys(a).forEach(function (prop) {\n    if (!hasOwn(b, prop)) {\n      rv[prfx + prop] = undefined;\n    } else {\n      var ap = a[prop],\n          bp = b[prop];\n\n      if (typeof ap === 'object' && typeof bp === 'object' && ap && bp) {\n        var apTypeName = toStringTag(ap);\n        var bpTypeName = toStringTag(bp);\n\n        if (apTypeName !== bpTypeName) {\n          rv[prfx + prop] = b[prop];\n        } else if (apTypeName === 'Object') {\n          getObjectDiff(ap, bp, rv, prfx + prop + '.');\n        } else if (ap !== bp) {\n          rv[prfx + prop] = b[prop];\n        }\n      } else if (ap !== bp) rv[prfx + prop] = b[prop];\n    }\n  });\n  keys(b).forEach(function (prop) {\n    if (!hasOwn(a, prop)) {\n      rv[prfx + prop] = b[prop];\n    }\n  });\n  return rv;\n}\n\nfunction getEffectiveKeys(primaryKey, req) {\n  if (req.type === 'delete') return req.keys;\n  return req.keys || req.values.map(primaryKey.extractKey);\n}\n\nvar hooksMiddleware = {\n  stack: \"dbcore\",\n  name: \"HooksMiddleware\",\n  level: 2,\n  create: function create(downCore) {\n    return _objectSpread(_objectSpread({}, downCore), {}, {\n      table: function table(tableName) {\n        var downTable = downCore.table(tableName);\n        var primaryKey = downTable.schema.primaryKey;\n\n        var tableMiddleware = _objectSpread(_objectSpread({}, downTable), {}, {\n          mutate: function mutate(req) {\n            var dxTrans = PSD.trans;\n            var _dxTrans$table$hook = dxTrans.table(tableName).hook,\n                deleting = _dxTrans$table$hook.deleting,\n                creating = _dxTrans$table$hook.creating,\n                updating = _dxTrans$table$hook.updating;\n\n            switch (req.type) {\n              case 'add':\n                if (creating.fire === nop) break;\n                return dxTrans._promise('readwrite', function () {\n                  return addPutOrDelete(req);\n                }, true);\n\n              case 'put':\n                if (creating.fire === nop && updating.fire === nop) break;\n                return dxTrans._promise('readwrite', function () {\n                  return addPutOrDelete(req);\n                }, true);\n\n              case 'delete':\n                if (deleting.fire === nop) break;\n                return dxTrans._promise('readwrite', function () {\n                  return addPutOrDelete(req);\n                }, true);\n\n              case 'deleteRange':\n                if (deleting.fire === nop) break;\n                return dxTrans._promise('readwrite', function () {\n                  return deleteRange(req);\n                }, true);\n            }\n\n            return downTable.mutate(req);\n\n            function addPutOrDelete(req) {\n              var dxTrans = PSD.trans;\n              var keys = req.keys || getEffectiveKeys(primaryKey, req);\n              if (!keys) throw new Error(\"Keys missing\");\n              req = req.type === 'add' || req.type === 'put' ? _objectSpread(_objectSpread({}, req), {}, {\n                keys: keys\n              }) : _objectSpread({}, req);\n              if (req.type !== 'delete') req.values = _toConsumableArray(req.values);\n              if (req.keys) req.keys = _toConsumableArray(req.keys);\n              return getExistingValues(downTable, req, keys).then(function (existingValues) {\n                var contexts = keys.map(function (key, i) {\n                  var existingValue = existingValues[i];\n                  var ctx = {\n                    onerror: null,\n                    onsuccess: null\n                  };\n\n                  if (req.type === 'delete') {\n                    deleting.fire.call(ctx, key, existingValue, dxTrans);\n                  } else if (req.type === 'add' || existingValue === undefined) {\n                    var generatedPrimaryKey = creating.fire.call(ctx, key, req.values[i], dxTrans);\n\n                    if (key == null && generatedPrimaryKey != null) {\n                      key = generatedPrimaryKey;\n                      req.keys[i] = key;\n\n                      if (!primaryKey.outbound) {\n                        setByKeyPath(req.values[i], primaryKey.keyPath, key);\n                      }\n                    }\n                  } else {\n                    var objectDiff = getObjectDiff(existingValue, req.values[i]);\n                    var additionalChanges = updating.fire.call(ctx, objectDiff, key, existingValue, dxTrans);\n\n                    if (additionalChanges) {\n                      var requestedValue = req.values[i];\n                      Object.keys(additionalChanges).forEach(function (keyPath) {\n                        if (hasOwn(requestedValue, keyPath)) {\n                          requestedValue[keyPath] = additionalChanges[keyPath];\n                        } else {\n                          setByKeyPath(requestedValue, keyPath, additionalChanges[keyPath]);\n                        }\n                      });\n                    }\n                  }\n\n                  return ctx;\n                });\n                return downTable.mutate(req).then(function (_ref31) {\n                  var failures = _ref31.failures,\n                      results = _ref31.results,\n                      numFailures = _ref31.numFailures,\n                      lastResult = _ref31.lastResult;\n\n                  for (var i = 0; i < keys.length; ++i) {\n                    var primKey = results ? results[i] : keys[i];\n                    var ctx = contexts[i];\n\n                    if (primKey == null) {\n                      ctx.onerror && ctx.onerror(failures[i]);\n                    } else {\n                      ctx.onsuccess && ctx.onsuccess(req.type === 'put' && existingValues[i] ? req.values[i] : primKey);\n                    }\n                  }\n\n                  return {\n                    failures: failures,\n                    results: results,\n                    numFailures: numFailures,\n                    lastResult: lastResult\n                  };\n                }).catch(function (error) {\n                  contexts.forEach(function (ctx) {\n                    return ctx.onerror && ctx.onerror(error);\n                  });\n                  return Promise.reject(error);\n                });\n              });\n            }\n\n            function deleteRange(req) {\n              return deleteNextChunk(req.trans, req.range, 10000);\n            }\n\n            function deleteNextChunk(trans, range, limit) {\n              return downTable.query({\n                trans: trans,\n                values: false,\n                query: {\n                  index: primaryKey,\n                  range: range\n                },\n                limit: limit\n              }).then(function (_ref32) {\n                var result = _ref32.result;\n                return addPutOrDelete({\n                  type: 'delete',\n                  keys: result,\n                  trans: trans\n                }).then(function (res) {\n                  if (res.numFailures > 0) return Promise.reject(res.failures[0]);\n\n                  if (result.length < limit) {\n                    return {\n                      failures: [],\n                      numFailures: 0,\n                      lastResult: undefined\n                    };\n                  } else {\n                    return deleteNextChunk(trans, _objectSpread(_objectSpread({}, range), {}, {\n                      lower: result[result.length - 1],\n                      lowerOpen: true\n                    }), limit);\n                  }\n                });\n              });\n            }\n          }\n        });\n\n        return tableMiddleware;\n      }\n    });\n  }\n};\n\nfunction getExistingValues(table, req, effectiveKeys) {\n  return req.type === \"add\" ? Promise.resolve([]) : table.getMany({\n    trans: req.trans,\n    keys: effectiveKeys,\n    cache: \"immutable\"\n  });\n}\n\nvar _cmp;\n\nfunction cmp(a, b) {\n  if (_cmp) return _cmp(a, b);\n  var _domDeps = domDeps,\n      indexedDB = _domDeps.indexedDB;\n  if (!indexedDB) throw new exceptions.MissingAPI();\n\n  _cmp = function _cmp(a, b) {\n    try {\n      return a == null || b == null ? NaN : indexedDB.cmp(a, b);\n    } catch (_a) {\n      return NaN;\n    }\n  };\n\n  return _cmp(a, b);\n}\n\nfunction getFromTransactionCache(keys, cache, clone) {\n  try {\n    if (!cache) return null;\n    if (cache.keys.length < keys.length) return null;\n    var result = [];\n\n    for (var i = 0, j = 0; i < cache.keys.length && j < keys.length; ++i) {\n      if (cmp(cache.keys[i], keys[j]) !== 0) continue;\n      result.push(clone ? deepClone(cache.values[i]) : cache.values[i]);\n      ++j;\n    }\n\n    return result.length === keys.length ? result : null;\n  } catch (_a) {\n    return null;\n  }\n}\n\nvar cacheExistingValuesMiddleware = {\n  stack: \"dbcore\",\n  level: -1,\n  create: function create(core) {\n    return {\n      table: function table(tableName) {\n        var table = core.table(tableName);\n        return _objectSpread(_objectSpread({}, table), {}, {\n          getMany: function getMany(req) {\n            if (!req.cache) {\n              return table.getMany(req);\n            }\n\n            var cachedResult = getFromTransactionCache(req.keys, req.trans[\"_cache\"], req.cache === \"clone\");\n\n            if (cachedResult) {\n              return DexiePromise.resolve(cachedResult);\n            }\n\n            return table.getMany(req).then(function (res) {\n              req.trans[\"_cache\"] = {\n                keys: req.keys,\n                values: req.cache === \"clone\" ? deepClone(res) : res\n              };\n              return res;\n            });\n          },\n          mutate: function mutate(req) {\n            if (req.type !== \"add\") req.trans[\"_cache\"] = null;\n            return table.mutate(req);\n          }\n        });\n      }\n    };\n  }\n};\n\nfunction isEmptyRange(node) {\n  return !(\"from\" in node);\n}\n\nvar RangeSet = function RangeSet(fromOrTree, to) {\n  if (this) {\n    extend(this, arguments.length ? {\n      d: 1,\n      from: fromOrTree,\n      to: arguments.length > 1 ? to : fromOrTree\n    } : {\n      d: 0\n    });\n  } else {\n    var rv = new RangeSet();\n\n    if (fromOrTree && \"d\" in fromOrTree) {\n      extend(rv, fromOrTree);\n    }\n\n    return rv;\n  }\n};\n\nprops(RangeSet.prototype, _defineProperty({\n  add: function add(rangeSet) {\n    mergeRanges(this, rangeSet);\n    return this;\n  },\n  addKey: function addKey(key) {\n    addRange(this, key, key);\n    return this;\n  },\n  addKeys: function addKeys(keys) {\n    var _this22 = this;\n\n    keys.forEach(function (key) {\n      return addRange(_this22, key, key);\n    });\n    return this;\n  }\n}, iteratorSymbol, function () {\n  return getRangeSetIterator(this);\n}));\n\nfunction addRange(target, from, to) {\n  var diff = cmp(from, to);\n  if (isNaN(diff)) return;\n  if (diff > 0) throw RangeError();\n  if (isEmptyRange(target)) return extend(target, {\n    from: from,\n    to: to,\n    d: 1\n  });\n  var left = target.l;\n  var right = target.r;\n\n  if (cmp(to, target.from) < 0) {\n    left ? addRange(left, from, to) : target.l = {\n      from: from,\n      to: to,\n      d: 1,\n      l: null,\n      r: null\n    };\n    return rebalance(target);\n  }\n\n  if (cmp(from, target.to) > 0) {\n    right ? addRange(right, from, to) : target.r = {\n      from: from,\n      to: to,\n      d: 1,\n      l: null,\n      r: null\n    };\n    return rebalance(target);\n  }\n\n  if (cmp(from, target.from) < 0) {\n    target.from = from;\n    target.l = null;\n    target.d = right ? right.d + 1 : 1;\n  }\n\n  if (cmp(to, target.to) > 0) {\n    target.to = to;\n    target.r = null;\n    target.d = target.l ? target.l.d + 1 : 1;\n  }\n\n  var rightWasCutOff = !target.r;\n\n  if (left && !target.l) {\n    mergeRanges(target, left);\n  }\n\n  if (right && rightWasCutOff) {\n    mergeRanges(target, right);\n  }\n}\n\nfunction mergeRanges(target, newSet) {\n  function _addRangeSet(target, _ref33) {\n    var from = _ref33.from,\n        to = _ref33.to,\n        l = _ref33.l,\n        r = _ref33.r;\n    addRange(target, from, to);\n    if (l) _addRangeSet(target, l);\n    if (r) _addRangeSet(target, r);\n  }\n\n  if (!isEmptyRange(newSet)) _addRangeSet(target, newSet);\n}\n\nfunction rangesOverlap(rangeSet1, rangeSet2) {\n  var i1 = getRangeSetIterator(rangeSet2);\n  var nextResult1 = i1.next();\n  if (nextResult1.done) return false;\n  var a = nextResult1.value;\n  var i2 = getRangeSetIterator(rangeSet1);\n  var nextResult2 = i2.next(a.from);\n  var b = nextResult2.value;\n\n  while (!nextResult1.done && !nextResult2.done) {\n    if (cmp(b.from, a.to) <= 0 && cmp(b.to, a.from) >= 0) return true;\n    cmp(a.from, b.from) < 0 ? a = (nextResult1 = i1.next(b.from)).value : b = (nextResult2 = i2.next(a.from)).value;\n  }\n\n  return false;\n}\n\nfunction getRangeSetIterator(node) {\n  var state = isEmptyRange(node) ? null : {\n    s: 0,\n    n: node\n  };\n  return {\n    next: function next(key) {\n      var keyProvided = arguments.length > 0;\n\n      while (state) {\n        switch (state.s) {\n          case 0:\n            state.s = 1;\n\n            if (keyProvided) {\n              while (state.n.l && cmp(key, state.n.from) < 0) {\n                state = {\n                  up: state,\n                  n: state.n.l,\n                  s: 1\n                };\n              }\n            } else {\n              while (state.n.l) {\n                state = {\n                  up: state,\n                  n: state.n.l,\n                  s: 1\n                };\n              }\n            }\n\n          case 1:\n            state.s = 2;\n            if (!keyProvided || cmp(key, state.n.to) <= 0) return {\n              value: state.n,\n              done: false\n            };\n\n          case 2:\n            if (state.n.r) {\n              state.s = 3;\n              state = {\n                up: state,\n                n: state.n.r,\n                s: 0\n              };\n              continue;\n            }\n\n          case 3:\n            state = state.up;\n        }\n      }\n\n      return {\n        done: true\n      };\n    }\n  };\n}\n\nfunction rebalance(target) {\n  var _a, _b;\n\n  var diff = (((_a = target.r) === null || _a === void 0 ? void 0 : _a.d) || 0) - (((_b = target.l) === null || _b === void 0 ? void 0 : _b.d) || 0);\n  var r = diff > 1 ? \"r\" : diff < -1 ? \"l\" : \"\";\n\n  if (r) {\n    var l = r === \"r\" ? \"l\" : \"r\";\n\n    var rootClone = _objectSpread({}, target);\n\n    var oldRootRight = target[r];\n    target.from = oldRootRight.from;\n    target.to = oldRootRight.to;\n    target[r] = oldRootRight[r];\n    rootClone[r] = oldRootRight[l];\n    target[l] = rootClone;\n    rootClone.d = computeDepth(rootClone);\n  }\n\n  target.d = computeDepth(target);\n}\n\nfunction computeDepth(_ref34) {\n  var r = _ref34.r,\n      l = _ref34.l;\n  return (r ? l ? Math.max(r.d, l.d) : r.d : l ? l.d : 0) + 1;\n}\n\nvar observabilityMiddleware = {\n  stack: \"dbcore\",\n  level: 0,\n  create: function create(core) {\n    var dbName = core.schema.name;\n    var FULL_RANGE = new RangeSet(core.MIN_KEY, core.MAX_KEY);\n    return _objectSpread(_objectSpread({}, core), {}, {\n      table: function table(tableName) {\n        var table = core.table(tableName);\n        var schema = table.schema;\n        var primaryKey = schema.primaryKey;\n        var extractKey = primaryKey.extractKey,\n            outbound = primaryKey.outbound;\n\n        var tableClone = _objectSpread(_objectSpread({}, table), {}, {\n          mutate: function mutate(req) {\n            var trans = req.trans;\n            var mutatedParts = trans.mutatedParts || (trans.mutatedParts = {});\n\n            var getRangeSet = function getRangeSet(indexName) {\n              var part = \"idb://\".concat(dbName, \"/\").concat(tableName, \"/\").concat(indexName);\n              return mutatedParts[part] || (mutatedParts[part] = new RangeSet());\n            };\n\n            var pkRangeSet = getRangeSet(\"\");\n            var delsRangeSet = getRangeSet(\":dels\");\n            var type = req.type;\n\n            var _ref35 = req.type === \"deleteRange\" ? [req.range] : req.type === \"delete\" ? [req.keys] : req.values.length < 50 ? [[], req.values] : [],\n                _ref36 = _slicedToArray(_ref35, 2),\n                keys = _ref36[0],\n                newObjs = _ref36[1];\n\n            var oldCache = req.trans[\"_cache\"];\n            return table.mutate(req).then(function (res) {\n              if (isArray(keys)) {\n                if (type !== \"delete\") keys = res.results;\n                pkRangeSet.addKeys(keys);\n                var oldObjs = getFromTransactionCache(keys, oldCache);\n\n                if (!oldObjs && type !== \"add\") {\n                  delsRangeSet.addKeys(keys);\n                }\n\n                if (oldObjs || newObjs) {\n                  trackAffectedIndexes(getRangeSet, schema, oldObjs, newObjs);\n                }\n              } else if (keys) {\n                var range = {\n                  from: keys.lower,\n                  to: keys.upper\n                };\n                delsRangeSet.add(range);\n                pkRangeSet.add(range);\n              } else {\n                pkRangeSet.add(FULL_RANGE);\n                delsRangeSet.add(FULL_RANGE);\n                schema.indexes.forEach(function (idx) {\n                  return getRangeSet(idx.name).add(FULL_RANGE);\n                });\n              }\n\n              return res;\n            });\n          }\n        });\n\n        var getRange = function getRange(_ref37) {\n          var _ref37$query = _ref37.query,\n              index = _ref37$query.index,\n              range = _ref37$query.range;\n\n          var _a, _b;\n\n          return [index, new RangeSet((_a = range.lower) !== null && _a !== void 0 ? _a : core.MIN_KEY, (_b = range.upper) !== null && _b !== void 0 ? _b : core.MAX_KEY)];\n        };\n\n        var readSubscribers = {\n          get: function get(req) {\n            return [primaryKey, new RangeSet(req.key)];\n          },\n          getMany: function getMany(req) {\n            return [primaryKey, new RangeSet().addKeys(req.keys)];\n          },\n          count: getRange,\n          query: getRange,\n          openCursor: getRange\n        };\n        keys(readSubscribers).forEach(function (method) {\n          tableClone[method] = function (req) {\n            var _PSD = PSD,\n                subscr = _PSD.subscr;\n\n            if (subscr) {\n              var getRangeSet = function getRangeSet(indexName) {\n                var part = \"idb://\".concat(dbName, \"/\").concat(tableName, \"/\").concat(indexName);\n                return subscr[part] || (subscr[part] = new RangeSet());\n              };\n\n              var pkRangeSet = getRangeSet(\"\");\n              var delsRangeSet = getRangeSet(\":dels\");\n\n              var _readSubscribers$meth = readSubscribers[method](req),\n                  _readSubscribers$meth2 = _slicedToArray(_readSubscribers$meth, 2),\n                  queriedIndex = _readSubscribers$meth2[0],\n                  queriedRanges = _readSubscribers$meth2[1];\n\n              getRangeSet(queriedIndex.name || \"\").add(queriedRanges);\n\n              if (!queriedIndex.isPrimaryKey) {\n                if (method === \"count\") {\n                  delsRangeSet.add(FULL_RANGE);\n                } else {\n                  var keysPromise = method === \"query\" && outbound && req.values && table.query(_objectSpread(_objectSpread({}, req), {}, {\n                    values: false\n                  }));\n                  return table[method].apply(this, arguments).then(function (res) {\n                    if (method === \"query\") {\n                      if (outbound && req.values) {\n                        return keysPromise.then(function (_ref38) {\n                          var resultingKeys = _ref38.result;\n                          pkRangeSet.addKeys(resultingKeys);\n                          return res;\n                        });\n                      }\n\n                      var pKeys = req.values ? res.result.map(extractKey) : res.result;\n\n                      if (req.values) {\n                        pkRangeSet.addKeys(pKeys);\n                      } else {\n                        delsRangeSet.addKeys(pKeys);\n                      }\n                    } else if (method === \"openCursor\") {\n                      var cursor = res;\n                      var wantValues = req.values;\n                      return cursor && Object.create(cursor, {\n                        key: {\n                          get: function get() {\n                            delsRangeSet.addKey(cursor.primaryKey);\n                            return cursor.key;\n                          }\n                        },\n                        primaryKey: {\n                          get: function get() {\n                            var pkey = cursor.primaryKey;\n                            delsRangeSet.addKey(pkey);\n                            return pkey;\n                          }\n                        },\n                        value: {\n                          get: function get() {\n                            wantValues && pkRangeSet.addKey(cursor.primaryKey);\n                            return cursor.value;\n                          }\n                        }\n                      });\n                    }\n\n                    return res;\n                  });\n                }\n              }\n            }\n\n            return table[method].apply(this, arguments);\n          };\n        });\n        return tableClone;\n      }\n    });\n  }\n};\n\nfunction trackAffectedIndexes(getRangeSet, schema, oldObjs, newObjs) {\n  function addAffectedIndex(ix) {\n    var rangeSet = getRangeSet(ix.name || \"\");\n\n    function extractKey(obj) {\n      return obj != null ? ix.extractKey(obj) : null;\n    }\n\n    var addKeyOrKeys = function addKeyOrKeys(key) {\n      return ix.multiEntry && isArray(key) ? key.forEach(function (key) {\n        return rangeSet.addKey(key);\n      }) : rangeSet.addKey(key);\n    };\n\n    (oldObjs || newObjs).forEach(function (_, i) {\n      var oldKey = oldObjs && extractKey(oldObjs[i]);\n      var newKey = newObjs && extractKey(newObjs[i]);\n\n      if (cmp(oldKey, newKey) !== 0) {\n        if (oldKey != null) addKeyOrKeys(oldKey);\n        if (newKey != null) addKeyOrKeys(newKey);\n      }\n    });\n  }\n\n  schema.indexes.forEach(addAffectedIndex);\n}\n\nvar Dexie$1 = /*#__PURE__*/function () {\n  function Dexie$1(name, options) {\n    var _this23 = this;\n\n    _classCallCheck(this, Dexie$1);\n\n    this._middlewares = {};\n    this.verno = 0;\n    var deps = Dexie$1.dependencies;\n    this._options = options = _objectSpread({\n      addons: Dexie$1.addons,\n      autoOpen: true,\n      indexedDB: deps.indexedDB,\n      IDBKeyRange: deps.IDBKeyRange\n    }, options);\n    this._deps = {\n      indexedDB: options.indexedDB,\n      IDBKeyRange: options.IDBKeyRange\n    };\n    var _options = options,\n        addons = _options.addons;\n    this._dbSchema = {};\n    this._versions = [];\n    this._storeNames = [];\n    this._allTables = {};\n    this.idbdb = null;\n    this._novip = this;\n    var state = {\n      dbOpenError: null,\n      isBeingOpened: false,\n      onReadyBeingFired: null,\n      openComplete: false,\n      dbReadyResolve: nop,\n      dbReadyPromise: null,\n      cancelOpen: nop,\n      openCanceller: null,\n      autoSchema: true\n    };\n    state.dbReadyPromise = new DexiePromise(function (resolve) {\n      state.dbReadyResolve = resolve;\n    });\n    state.openCanceller = new DexiePromise(function (_, reject) {\n      state.cancelOpen = reject;\n    });\n    this._state = state;\n    this.name = name;\n    this.on = Events(this, \"populate\", \"blocked\", \"versionchange\", \"close\", {\n      ready: [promisableChain, nop]\n    });\n    this.on.ready.subscribe = override(this.on.ready.subscribe, function (subscribe) {\n      return function (subscriber, bSticky) {\n        Dexie$1.vip(function () {\n          var state = _this23._state;\n\n          if (state.openComplete) {\n            if (!state.dbOpenError) DexiePromise.resolve().then(subscriber);\n            if (bSticky) subscribe(subscriber);\n          } else if (state.onReadyBeingFired) {\n            state.onReadyBeingFired.push(subscriber);\n            if (bSticky) subscribe(subscriber);\n          } else {\n            subscribe(subscriber);\n            var db = _this23;\n            if (!bSticky) subscribe(function unsubscribe() {\n              db.on.ready.unsubscribe(subscriber);\n              db.on.ready.unsubscribe(unsubscribe);\n            });\n          }\n        });\n      };\n    });\n    this.Collection = createCollectionConstructor(this);\n    this.Table = createTableConstructor(this);\n    this.Transaction = createTransactionConstructor(this);\n    this.Version = createVersionConstructor(this);\n    this.WhereClause = createWhereClauseConstructor(this);\n    this.on(\"versionchange\", function (ev) {\n      if (ev.newVersion > 0) console.warn(\"Another connection wants to upgrade database '\".concat(_this23.name, \"'. Closing db now to resume the upgrade.\"));else console.warn(\"Another connection wants to delete database '\".concat(_this23.name, \"'. Closing db now to resume the delete request.\"));\n\n      _this23.close();\n    });\n    this.on(\"blocked\", function (ev) {\n      if (!ev.newVersion || ev.newVersion < ev.oldVersion) console.warn(\"Dexie.delete('\".concat(_this23.name, \"') was blocked\"));else console.warn(\"Upgrade '\".concat(_this23.name, \"' blocked by other connection holding version \").concat(ev.oldVersion / 10));\n    });\n    this._maxKey = _getMaxKey(options.IDBKeyRange);\n\n    this._createTransaction = function (mode, storeNames, dbschema, parentTransaction) {\n      return new _this23.Transaction(mode, storeNames, dbschema, parentTransaction);\n    };\n\n    this._fireOnBlocked = function (ev) {\n      _this23.on(\"blocked\").fire(ev);\n\n      connections.filter(function (c) {\n        return c.name === _this23.name && c !== _this23 && !c._state.vcFired;\n      }).map(function (c) {\n        return c.on(\"versionchange\").fire(ev);\n      });\n    };\n\n    this.use(virtualIndexMiddleware);\n    this.use(hooksMiddleware);\n    this.use(observabilityMiddleware);\n    this.use(cacheExistingValuesMiddleware);\n    this.vip = Object.create(this, {\n      _vip: {\n        value: true\n      }\n    });\n    addons.forEach(function (addon) {\n      return addon(_this23);\n    });\n  }\n\n  _createClass(Dexie$1, [{\n    key: \"version\",\n    value: function version(versionNumber) {\n      if (isNaN(versionNumber) || versionNumber < 0.1) throw new exceptions.Type(\"Given version is not a positive number\");\n      versionNumber = Math.round(versionNumber * 10) / 10;\n      if (this.idbdb || this._state.isBeingOpened) throw new exceptions.Schema(\"Cannot add version when database is open\");\n      this.verno = Math.max(this.verno, versionNumber);\n      var versions = this._versions;\n      var versionInstance = versions.filter(function (v) {\n        return v._cfg.version === versionNumber;\n      })[0];\n      if (versionInstance) return versionInstance;\n      versionInstance = new this.Version(versionNumber);\n      versions.push(versionInstance);\n      versions.sort(lowerVersionFirst);\n      versionInstance.stores({});\n      this._state.autoSchema = false;\n      return versionInstance;\n    }\n  }, {\n    key: \"_whenReady\",\n    value: function _whenReady(fn) {\n      var _this24 = this;\n\n      return this.idbdb && (this._state.openComplete || PSD.letThrough || this._vip) ? fn() : new DexiePromise(function (resolve, reject) {\n        if (_this24._state.openComplete) {\n          return reject(new exceptions.DatabaseClosed(_this24._state.dbOpenError));\n        }\n\n        if (!_this24._state.isBeingOpened) {\n          if (!_this24._options.autoOpen) {\n            reject(new exceptions.DatabaseClosed());\n            return;\n          }\n\n          _this24.open().catch(nop);\n        }\n\n        _this24._state.dbReadyPromise.then(resolve, reject);\n      }).then(fn);\n    }\n  }, {\n    key: \"use\",\n    value: function use(_ref39) {\n      var stack = _ref39.stack,\n          create = _ref39.create,\n          level = _ref39.level,\n          name = _ref39.name;\n      if (name) this.unuse({\n        stack: stack,\n        name: name\n      });\n      var middlewares = this._middlewares[stack] || (this._middlewares[stack] = []);\n      middlewares.push({\n        stack: stack,\n        create: create,\n        level: level == null ? 10 : level,\n        name: name\n      });\n      middlewares.sort(function (a, b) {\n        return a.level - b.level;\n      });\n      return this;\n    }\n  }, {\n    key: \"unuse\",\n    value: function unuse(_ref40) {\n      var stack = _ref40.stack,\n          name = _ref40.name,\n          create = _ref40.create;\n\n      if (stack && this._middlewares[stack]) {\n        this._middlewares[stack] = this._middlewares[stack].filter(function (mw) {\n          return create ? mw.create !== create : name ? mw.name !== name : false;\n        });\n      }\n\n      return this;\n    }\n  }, {\n    key: \"open\",\n    value: function open() {\n      return dexieOpen(this);\n    }\n  }, {\n    key: \"_close\",\n    value: function _close() {\n      var state = this._state;\n      var idx = connections.indexOf(this);\n      if (idx >= 0) connections.splice(idx, 1);\n\n      if (this.idbdb) {\n        try {\n          this.idbdb.close();\n        } catch (e) {}\n\n        this._novip.idbdb = null;\n      }\n\n      state.dbReadyPromise = new DexiePromise(function (resolve) {\n        state.dbReadyResolve = resolve;\n      });\n      state.openCanceller = new DexiePromise(function (_, reject) {\n        state.cancelOpen = reject;\n      });\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      this._close();\n\n      var state = this._state;\n      this._options.autoOpen = false;\n      state.dbOpenError = new exceptions.DatabaseClosed();\n      if (state.isBeingOpened) state.cancelOpen(state.dbOpenError);\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      var _this25 = this;\n\n      var hasArguments = arguments.length > 0;\n      var state = this._state;\n      return new DexiePromise(function (resolve, reject) {\n        var doDelete = function doDelete() {\n          _this25.close();\n\n          var req = _this25._deps.indexedDB.deleteDatabase(_this25.name);\n\n          req.onsuccess = wrap(function () {\n            _onDatabaseDeleted(_this25._deps, _this25.name);\n\n            resolve();\n          });\n          req.onerror = eventRejectHandler(reject);\n          req.onblocked = _this25._fireOnBlocked;\n        };\n\n        if (hasArguments) throw new exceptions.InvalidArgument(\"Arguments not allowed in db.delete()\");\n\n        if (state.isBeingOpened) {\n          state.dbReadyPromise.then(doDelete);\n        } else {\n          doDelete();\n        }\n      });\n    }\n  }, {\n    key: \"backendDB\",\n    value: function backendDB() {\n      return this.idbdb;\n    }\n  }, {\n    key: \"isOpen\",\n    value: function isOpen() {\n      return this.idbdb !== null;\n    }\n  }, {\n    key: \"hasBeenClosed\",\n    value: function hasBeenClosed() {\n      var dbOpenError = this._state.dbOpenError;\n      return dbOpenError && dbOpenError.name === 'DatabaseClosed';\n    }\n  }, {\n    key: \"hasFailed\",\n    value: function hasFailed() {\n      return this._state.dbOpenError !== null;\n    }\n  }, {\n    key: \"dynamicallyOpened\",\n    value: function dynamicallyOpened() {\n      return this._state.autoSchema;\n    }\n  }, {\n    key: \"tables\",\n    get: function get() {\n      var _this26 = this;\n\n      return keys(this._allTables).map(function (name) {\n        return _this26._allTables[name];\n      });\n    }\n  }, {\n    key: \"transaction\",\n    value: function transaction() {\n      var args = extractTransactionArgs.apply(this, arguments);\n      return this._transaction.apply(this, args);\n    }\n  }, {\n    key: \"_transaction\",\n    value: function _transaction(mode, tables, scopeFunc) {\n      var _this27 = this;\n\n      var parentTransaction = PSD.trans;\n      if (!parentTransaction || parentTransaction.db !== this || mode.indexOf('!') !== -1) parentTransaction = null;\n      var onlyIfCompatible = mode.indexOf('?') !== -1;\n      mode = mode.replace('!', '').replace('?', '');\n      var idbMode, storeNames;\n\n      try {\n        storeNames = tables.map(function (table) {\n          var storeName = table instanceof _this27.Table ? table.name : table;\n          if (typeof storeName !== 'string') throw new TypeError(\"Invalid table argument to Dexie.transaction(). Only Table or String are allowed\");\n          return storeName;\n        });\n        if (mode == \"r\" || mode === READONLY) idbMode = READONLY;else if (mode == \"rw\" || mode == READWRITE) idbMode = READWRITE;else throw new exceptions.InvalidArgument(\"Invalid transaction mode: \" + mode);\n\n        if (parentTransaction) {\n          if (parentTransaction.mode === READONLY && idbMode === READWRITE) {\n            if (onlyIfCompatible) {\n              parentTransaction = null;\n            } else throw new exceptions.SubTransaction(\"Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY\");\n          }\n\n          if (parentTransaction) {\n            storeNames.forEach(function (storeName) {\n              if (parentTransaction && parentTransaction.storeNames.indexOf(storeName) === -1) {\n                if (onlyIfCompatible) {\n                  parentTransaction = null;\n                } else throw new exceptions.SubTransaction(\"Table \" + storeName + \" not included in parent transaction.\");\n              }\n            });\n          }\n\n          if (onlyIfCompatible && parentTransaction && !parentTransaction.active) {\n            parentTransaction = null;\n          }\n        }\n      } catch (e) {\n        return parentTransaction ? parentTransaction._promise(null, function (_, reject) {\n          reject(e);\n        }) : rejection(e);\n      }\n\n      var enterTransaction = enterTransactionScope.bind(null, this, idbMode, storeNames, parentTransaction, scopeFunc);\n      return parentTransaction ? parentTransaction._promise(idbMode, enterTransaction, \"lock\") : PSD.trans ? usePSD(PSD.transless, function () {\n        return _this27._whenReady(enterTransaction);\n      }) : this._whenReady(enterTransaction);\n    }\n  }, {\n    key: \"table\",\n    value: function table(tableName) {\n      if (!hasOwn(this._allTables, tableName)) {\n        throw new exceptions.InvalidTable(\"Table \".concat(tableName, \" does not exist\"));\n      }\n\n      return this._allTables[tableName];\n    }\n  }]);\n\n  return Dexie$1;\n}();\n\nvar symbolObservable = typeof Symbol !== \"undefined\" && \"observable\" in Symbol ? Symbol[\"observable\"] : \"@@observable\";\n\nvar Observable = /*#__PURE__*/function () {\n  function Observable(subscribe) {\n    _classCallCheck(this, Observable);\n\n    this._subscribe = subscribe;\n  }\n\n  _createClass(Observable, [{\n    key: \"subscribe\",\n    value: function subscribe(x, error, complete) {\n      return this._subscribe(!x || typeof x === \"function\" ? {\n        next: x,\n        error: error,\n        complete: complete\n      } : x);\n    }\n  }, {\n    key: symbolObservable,\n    value: function value() {\n      return this;\n    }\n  }]);\n\n  return Observable;\n}();\n\nfunction extendObservabilitySet(target, newSet) {\n  keys(newSet).forEach(function (part) {\n    var rangeSet = target[part] || (target[part] = new RangeSet());\n    mergeRanges(rangeSet, newSet[part]);\n  });\n  return target;\n}\n\nfunction liveQuery(querier) {\n  return new Observable(function (observer) {\n    var scopeFuncIsAsync = isAsyncFunction(querier);\n\n    function execute(subscr) {\n      if (scopeFuncIsAsync) {\n        incrementExpectedAwaits();\n      }\n\n      var exec = function exec() {\n        return newScope(querier, {\n          subscr: subscr,\n          trans: null\n        });\n      };\n\n      var rv = PSD.trans ? usePSD(PSD.transless, exec) : exec();\n\n      if (scopeFuncIsAsync) {\n        rv.then(decrementExpectedAwaits, decrementExpectedAwaits);\n      }\n\n      return rv;\n    }\n\n    var closed = false;\n    var accumMuts = {};\n    var currentObs = {};\n    var subscription = {\n      get closed() {\n        return closed;\n      },\n\n      unsubscribe: function unsubscribe() {\n        closed = true;\n        globalEvents.txcommitted.unsubscribe(mutationListener);\n      }\n    };\n    observer.start && observer.start(subscription);\n    var querying = false,\n        startedListening = false;\n\n    function shouldNotify() {\n      return keys(currentObs).some(function (key) {\n        return accumMuts[key] && rangesOverlap(accumMuts[key], currentObs[key]);\n      });\n    }\n\n    var mutationListener = function mutationListener(parts) {\n      extendObservabilitySet(accumMuts, parts);\n\n      if (shouldNotify()) {\n        doQuery();\n      }\n    };\n\n    var doQuery = function doQuery() {\n      if (querying || closed) return;\n      accumMuts = {};\n      var subscr = {};\n      var ret = execute(subscr);\n\n      if (!startedListening) {\n        globalEvents(\"txcommitted\", mutationListener);\n        startedListening = true;\n      }\n\n      querying = true;\n      Promise.resolve(ret).then(function (result) {\n        querying = false;\n        if (closed) return;\n\n        if (shouldNotify()) {\n          doQuery();\n        } else {\n          accumMuts = {};\n          currentObs = subscr;\n          observer.next && observer.next(result);\n        }\n      }, function (err) {\n        querying = false;\n        observer.error && observer.error(err);\n        subscription.unsubscribe();\n      });\n    };\n\n    doQuery();\n    return subscription;\n  });\n}\n\nvar Dexie = Dexie$1;\nprops(Dexie, _objectSpread(_objectSpread({}, fullNameExceptions), {}, {\n  delete: function _delete(databaseName) {\n    var db = new Dexie(databaseName, {\n      addons: []\n    });\n    return db.delete();\n  },\n  exists: function exists(name) {\n    return new Dexie(name, {\n      addons: []\n    }).open().then(function (db) {\n      db.close();\n      return true;\n    }).catch('NoSuchDatabaseError', function () {\n      return false;\n    });\n  },\n  getDatabaseNames: function getDatabaseNames(cb) {\n    try {\n      return _getDatabaseNames(Dexie.dependencies).then(cb);\n    } catch (_a) {\n      return rejection(new exceptions.MissingAPI());\n    }\n  },\n  defineClass: function defineClass() {\n    function Class(content) {\n      extend(this, content);\n    }\n\n    return Class;\n  },\n  ignoreTransaction: function ignoreTransaction(scopeFunc) {\n    return PSD.trans ? usePSD(PSD.transless, scopeFunc) : scopeFunc();\n  },\n  vip: vip,\n  async: function async(generatorFn) {\n    return function () {\n      try {\n        var rv = awaitIterator(generatorFn.apply(this, arguments));\n        if (!rv || typeof rv.then !== 'function') return DexiePromise.resolve(rv);\n        return rv;\n      } catch (e) {\n        return rejection(e);\n      }\n    };\n  },\n  spawn: function spawn(generatorFn, args, thiz) {\n    try {\n      var rv = awaitIterator(generatorFn.apply(thiz, args || []));\n      if (!rv || typeof rv.then !== 'function') return DexiePromise.resolve(rv);\n      return rv;\n    } catch (e) {\n      return rejection(e);\n    }\n  },\n  currentTransaction: {\n    get: function get() {\n      return PSD.trans || null;\n    }\n  },\n  waitFor: function waitFor(promiseOrFunction, optionalTimeout) {\n    var promise = DexiePromise.resolve(typeof promiseOrFunction === 'function' ? Dexie.ignoreTransaction(promiseOrFunction) : promiseOrFunction).timeout(optionalTimeout || 60000);\n    return PSD.trans ? PSD.trans.waitFor(promise) : promise;\n  },\n  Promise: DexiePromise,\n  debug: {\n    get: function get() {\n      return debug;\n    },\n    set: function set(value) {\n      setDebug(value, value === 'dexie' ? function () {\n        return true;\n      } : dexieStackFrameFilter);\n    }\n  },\n  derive: derive,\n  extend: extend,\n  props: props,\n  override: override,\n  Events: Events,\n  on: globalEvents,\n  liveQuery: liveQuery,\n  extendObservabilitySet: extendObservabilitySet,\n  getByKeyPath: getByKeyPath,\n  setByKeyPath: setByKeyPath,\n  delByKeyPath: delByKeyPath,\n  shallowClone: shallowClone,\n  deepClone: deepClone,\n  getObjectDiff: getObjectDiff,\n  asap: asap$1,\n  minKey: minKey,\n  addons: [],\n  connections: connections,\n  errnames: errnames,\n  dependencies: domDeps,\n  semVer: DEXIE_VERSION,\n  version: DEXIE_VERSION.split('.').map(function (n) {\n    return parseInt(n);\n  }).reduce(function (p, c, i) {\n    return p + c / Math.pow(10, i * 2);\n  })\n}));\nDexie.maxKey = _getMaxKey(Dexie.dependencies.IDBKeyRange);\n\nfunction fireLocally(updateParts) {\n  var wasMe = propagatingLocally;\n\n  try {\n    propagatingLocally = true;\n    globalEvents.txcommitted.fire(updateParts);\n  } finally {\n    propagatingLocally = wasMe;\n  }\n}\n\nvar propagateLocally = fireLocally;\nvar propagatingLocally = false;\nvar accumulatedParts = {};\n\nif (typeof document !== 'undefined' && document.addEventListener) {\n  var fireIfVisible = function fireIfVisible() {\n    if (document.visibilityState === \"visible\") {\n      if (Object.keys(accumulatedParts).length > 0) {\n        fireLocally(accumulatedParts);\n      }\n\n      accumulatedParts = {};\n    }\n  };\n\n  document.addEventListener(\"visibilitychange\", fireIfVisible);\n\n  propagateLocally = function propagateLocally(changedParts) {\n    extendObservabilitySet(accumulatedParts, changedParts);\n    fireIfVisible();\n  };\n}\n\nif (typeof BroadcastChannel !== \"undefined\") {\n  var bc = new BroadcastChannel(\"dexie-txcommitted\");\n  globalEvents(\"txcommitted\", function (changedParts) {\n    if (!propagatingLocally) {\n      bc.postMessage(changedParts);\n    }\n  });\n\n  bc.onmessage = function (ev) {\n    if (ev.data) propagateLocally(ev.data);\n  };\n} else if (typeof self !== \"undefined\" && typeof navigator !== \"undefined\") {\n  globalEvents(\"txcommitted\", function (changedParts) {\n    try {\n      if (!propagatingLocally) {\n        if (typeof localStorage !== \"undefined\") {\n          localStorage.setItem(\"dexie-txcommitted\", JSON.stringify({\n            trig: Math.random(),\n            changedParts: changedParts\n          }));\n        }\n\n        if (typeof self[\"clients\"] === \"object\") {\n          _toConsumableArray(self[\"clients\"].matchAll({\n            includeUncontrolled: true\n          })).forEach(function (client) {\n            return client.postMessage({\n              type: \"dexie-txcommitted\",\n              changedParts: changedParts\n            });\n          });\n        }\n      }\n    } catch (_a) {}\n  });\n  addEventListener(\"storage\", function (ev) {\n    if (ev.key === \"dexie-txcommitted\") {\n      var data = JSON.parse(ev.newValue);\n      if (data) propagateLocally(data.changedParts);\n    }\n  });\n  var swContainer = self.document && navigator.serviceWorker;\n\n  if (swContainer) {\n    swContainer.addEventListener('message', propagateMessageLocally);\n  }\n}\n\nfunction propagateMessageLocally(_ref41) {\n  var data = _ref41.data;\n\n  if (data && data.type === \"dexie-txcommitted\") {\n    propagateLocally(data.changedParts);\n  }\n}\n\nDexiePromise.rejectionMapper = mapError;\nsetDebug(debug, dexieStackFrameFilter);\nexport default Dexie$1;\nexport { Dexie$1 as Dexie, RangeSet, liveQuery, mergeRanges, rangesOverlap };"],"names":["ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","minLen","_arrayLikeToArray","n","prototype","toString","call","slice","constructor","name","from","test","_unsupportedIterableToArray","F","s","done","value","e","_e","f","TypeError","err","normalCompletion","didErr","step","next","_e2","return","arr","len","arr2","_global","globalThis","self","window","g","extend","obj","extension","Promise","getProto","getPrototypeOf","_hasOwn","hasOwnProperty","hasOwn","prop","props","proto","Reflect","setProp","functionOrGetSet","options","get","set","configurable","writable","derive","Child","Parent","create","bind","getPropertyDescriptor","_slice","args","start","end","override","origFunc","overridedFactory","assert","b","Error","asap$1","fn","setImmediate","setTimeout","arrayToObject","array","extractor","reduce","result","item","nameAndValue","getByKeyPath","keyPath","rv","l","val","period","indexOf","innerObj","substr","undefined","setByKeyPath","isFrozen","currentKeyPath","remainingKeyPath","isNaN","parseInt","splice","shallowClone","m","concat","flatten","a","intrinsicTypeNames","split","map","num","t","intrinsicTypes","x","circularRefs","deepClone","any","WeakMap","innerDeepClone","toStringTag","iteratorSymbol","getIteratorOf","NO_CHAR_ARRAY","getArrayOf","arrayLike","this","isAsyncFunction","debug","location","href","setDebug","libraryFilter","NEEDS_THROW_FOR_STACK","stack","getErrorWithStack","prettyStack","exception","numIgnoredFrames","message","frame","join","idbDomErrorNames","errorList","defaultTexts","VersionChanged","DatabaseClosed","Abort","TransactionInactive","MissingAPI","DexieError","msg","getMultiErrorMessage","failures","v","ModifyError","successCount","failedKeys","BulkError","pos","failuresByPos","_stack","errnames","BaseException","exceptions","fullName","msgOrInner","inner","Syntax","SyntaxError","Type","Range","RangeError","exceptionMap","fullNameExceptions","nop","mirror","pureFunctionChain","f1","f2","callBoth","on1","on2","hookCreatingChain","res","onsuccess","onerror","res2","hookDeletingChain","hookUpdatingChain","modifications","reverseStoppableEventChain","promisableChain","then","thiz","INTERNAL","_ref2","globalP","resolve","crypto","subtle","nativeP","digest","Uint8Array","_ref3","resolvedNativePromise","nativePromiseProto","resolvedGlobalPromise","nativePromiseThen","NativePromise","patchGlobalPromise","stack_being_generated","schedulePhysicalTick","physicalTick","MutationObserver","hiddenDiv","document","createElement","observe","attributes","setAttribute","asap","callback","microtickQueue","needsNewPhysicalTick","isOutsideMicroTick","unhandledErrors","rejectingErrors","currentFulfiller","rejectionMapper","globalPSD","id","global","ref","unhandleds","onunhandled","globalError","pgp","env","finalize","uh","PSD","numScheduledCalls","tickFinalizers","DexiePromise","_listeners","onuncatched","_lib","psd","_PSD","_stackHolder","_prev","_numPrev","_state","_value","handleRejection","executePromiseTask","thenProp","microTaskId","totalEchoes","onFulfilled","onRejected","_this","possibleAwait","cleanup","decrementExpectedAwaits","reject","propagateToListener","Listener","nativeAwaitCompatibleWrap","linkToPreviousPromise","zone","promise","shouldExecuteTick","beginMicroTickScope","_then","propagateAllListeners","endMicroTickScope","ex","reason","_promise","tryCatch","origProp","some","p","addPossiblyUnhandledError","listeners","finalizePhysicalTick","listener","cb","callListener","ret","markErrorAsHandled","getStack","stacks","limit","errorName","failure","prev","numPrev","wasRootExec","callbacks","unhandledErrs","finalizers","PromiseReject","wrap","errorCatcher","outerScope","switchToZone","catch","type","handler","finally","onFinally","timeout","ms","_this2","Infinity","handle","Timeout","clearTimeout","snapShot","all","values","onPossibleParallellAsync","remaining","race","newPSD","newScope","usePSD","scheduler","follow","zoneProps","_this3","finalizer","run_at_end_of_this_or_next_physical_tick","allSettled","possiblePromises","results","status","AggregateError","task","awaits","echoes","taskCounter","zoneStack","zoneEchoes","zone_id_counter","a1","a2","parent","globalEnv","PromiseProp","nthen","getPatchedPromiseThen","gthen","incrementExpectedAwaits","possiblePromise","rejection","zoneEnterEcho","targetZone","zoneLeaveEcho","pop","bEnteringZone","currentZone","enqueueNativeMicroTask","GlobalPromise","targetEnv","a3","job","outerZone","origThen","onResolved","UNHANDLEDREJECTION","event","eventData","createEvent","initEvent","CustomEvent","detail","dispatchEvent","PromiseRejectionEvent","onunhandledrejection","_","defaultPrevented","console","warn","tempTransaction","db","mode","storeNames","idbdb","openComplete","letThrough","_vip","trans","_createTransaction","_dbSchema","_completion","dbOpenError","isBeingOpened","_options","autoOpen","open","dbReadyPromise","domDeps","DEXIE_VERSION","maxString","String","fromCharCode","minKey","INVALID_KEY_ARGUMENT","STRING_EXPECTED","connections","isIEOrEdge","navigator","userAgent","hasIEDeleteObjectStoreBug","hangsOnDeleteLargeKeyRange","dexieStackFrameFilter","DBNAMES_DB","READONLY","READWRITE","combine","filter1","filter2","indexedDB","mozIndexedDB","webkitIndexedDB","msIndexedDB","IDBKeyRange","webkitIDBKeyRange","_getMaxKey","IdbKeyRange","only","AnyRange","lower","lowerOpen","upperOpen","workaroundForUndefinedPrimKey","Table","writeLocked","_tx","tableName","checkTableInTransaction","schema","NotFound","idbtrans","transless","keyOrCrit","_this4","where","first","_trans","core","hook","reading","fire","indexOrCrit","WhereClause","keyPaths","equals","compoundIndex","indexes","primKey","ix","compound","every","_maxKey","kp","JSON","stringify","idxByName","idb","_deps","cmp","_keyPaths$reduce","_ref4","_ref5","prevIndex","prevFilterFn","index","multi","_keyPaths$reduce2","idx","filterFunction","toCollection","and","thenShortcut","count","_offset","offset","numRows","each","toArray","Collection","reverse","mappedClass","readHook","unsubscribe","mapToClass","content","_this5","_this$schema$primKey","auto","objToAdd","mutate","numFailures","lastResult","keyOrObject","modify","InvalidArgument","_a","_this6","_this$schema$primKey2","_this7","_this8","range","_this9","getMany","objects","keysOrOptions","_this10","wantResults","allKeys","_this10$schema$primKe","numObjects","objectsToAdd","_ref6","_this11","_this11$schema$primKe","objectsToPut","_ref7","_this12","numKeys","_ref8","Events","ctx","evs","eventName","subscriber","subscribe","addEventType","add","chainFunction","defaultFunction","addConfiguredEvents","context","subscribers","cfg","makeClassConstructor","isPlainKeyRange","ignoreLimitFilter","algorithm","or","justLimit","replayFilter","addFilter","addReplayFilter","factory","isLimitFilter","curr","getIndexOrStore","coreSchema","isPrimKey","primaryKey","getIndexByKeyPath","Schema","openCursor","coreTable","keysOnly","dir","unique","query","iter","coreTrans","union","cursor","advance","stop","fail","_iterate","iterate","valueMapper","cursorPromise","wrappedFn","c","continue","advancer","_ctx","error","table","_read","_this13","Math","min","parts","lastPart","lastIndex","getval","order","sorter","aVal","bVal","sort","_this14","_ref9","_offset2","offsetLeft","rowsLeft","bIncludeStopEntry","isMatch","indexName","_ondirectionchange","eachKey","_ref10","firstKey","strKey","found","changes","_this15","_write","modifyer","anythingModified","_coreTable$schema$pri","outbound","extractKey","modifyChunkSize","totalFailures","applyMutateResult","expectedCount","_step","_iterator","clone","primaryKeys","nextChunk","cache","addValues","putValues","putKeys","deleteKeys","origValue","criteria","deleteCallback","changeSpec","coreRange","_ref11","simpleCompare","simpleCompareReverse","collectionOrWhereClause","T","collection","emptyCollection","whereClause","rangeEqual","nextCasing","lowerKey","upperNeedle","lowerNeedle","llp","lwrKeyChar","addIgnoreCaseAlgorithm","match","needles","suffix","upper","compare","upperNeedles","lowerNeedles","direction","nextKeySuffix","needlesLen","initDirection","toUpperCase","toLowerCase","upperFactory","lowerFactory","needleBounds","needle","nb","createRange","firstPossibleNeedle","_addAlgorithm","lowestPossibleCasing","casing","includeLower","includeUpper","_cmp","str","between","startsWith","_this16","_ascending","_descending","inAnyRange","includeLowers","includeUppers","ranges","_this17","ascending","descending","_min","max","_max","sortDirection","rangeSorter","newRange","rangePos","keyIsBeyondCurrentEntry","keyIsBeforeCurrentEntry","checkKey","keyWithinCurrentRange","eventRejectHandler","preventDefault","stopPropagation","globalEvents","Transaction","_reculock","lockOwnerFor","_blockedFuncs","_locked","fnAndPSD","shift","_this18","OpenFailed","active","transaction","ev","_reject","onabort","on","oncomplete","_resolve","txcommitted","bWriteLock","_this19","ReadOnly","_lock","_unlock","_root","promiseLike","root","_waitingFor","_waitingQueue","store","objectStore","spin","_spinCount","currentWaitPromise","abort","memoizedTables","_memoizedTables","tableSchema","transactionBoundTable","createIndexSpec","src","nameFromKeyPath","createTableSchema","getKeyExtractor","getSinglePathKeyExtractor","arrayify","_id_counter","getKeyPathAlias","createDBCore","tmpTrans","makeIDBKeyRange","upperBound","lowerBound","bound","_extractSchema","tables","objectStoreNames","autoIncrement","indexByKeyPath","isPrimaryKey","indexNames","multiEntry","hasGetAll","extractSchema","_ref12","isAddOrPut","req","reqs","errorHandler","clear","delete","_ref14","_ref15","args1","args2","_i","_ref17","keyCount","callbackCount","successHandler","_pos","_ref18","request","nonInfinitLimit","idbKeyRange","getAll","getAllKeys","_req","openKeyCursor","_ref16","___id","_cursorContinue","_cursorContinuePrimaryKey","continuePrimaryKey","_cursorAdvance","doThrowCursorIsStopped","_this21","gotOne","iterationPromise","resolveIteration","rejectIteration","guardedCallback","_ref19","createDbCoreTable","tableMap","MIN_KEY","MAX_KEY","createMiddlewareStacks","middlewares","_ref21","dbcore","stackImpl","down","_ref20","createMiddlewareStack","generateMiddlewareStacks","_ref22","_novip","_middlewares","tbl","setApiOnPlace","_ref23","objs","tableNames","dbschema","propDesc","removeTablesApi","_ref24","lowerVersionFirst","_cfg","version","runUpgraders","oldVersion","idbUpgradeTrans","globalSchema","_storeNames","rejectTransaction","createTable","populate","_ref25","queue","versions","_versions","buildGlobalSchema","anyContentUpgraderHasRun","runQueue","oldSchema","newSchema","adjustToExistingIndexNames","diff","getSchemaDiff","tuple","change","recreate","Upgrade","addIndex","deleteIndex","del","idxName","contentUpgrade","upgradeSchema","returnValue","contentUpgradeIsAsync","promiseFollowed","decrementor","storeName","deleteObjectStore","deleteRemovedTables","contains","updateTablesAndIndexes","oldDef","newDef","def","oldIndexes","newIndexes","oldIdx","newIdx","createObjectStore","createIndex","j","idbindex","_ref27","_hasGetAll","dexieName","indexSpec","WorkerGlobalScope","Version","stores","outSchema","indexNum","trim","replace","_stores","storesSource","storesSpec","_parseStoresSpec","_allTables","upgradeFunction","getDbNamesTable","dbNamesDB","Dexie$1","addons","dbnames","hasDatabasesNative","databases","_onDatabaseDeleted","_ref30","vip","idbReady","intervalId","userAgentData","tryIdb","setInterval","clearInterval","dexieOpen","state","openCanceller","throwIfCancelled","resolveDbReady","dbReadyResolve","upgradeTransaction","wasCreated","dbName","autoSchema","round","verno","onblocked","_fireOnBlocked","onupgradeneeded","allowEmptyDB","close","delreq","deleteDatabase","NoSuchDatabase","oldVer","pow","_ref26","readGlobalSchema","ch","verifyInstalledSchema","onversionchange","vcFired","onclose","_ref29","put","_onDatabaseCreated","onReadyBeingFired","ready","fireRemainders","remainders","_close","awaitIterator","callNext","onSuccess","onError","throw","getNext","extractTransactionArgs","_tableArgs_","scopeFunc","enterTransactionScope","parentTransaction","scopeFuncIsAsync","PrematureCommit","pad","virtualIndexMiddleware","level","indexLookup","allVirtualIndexes","addVirtualIndexes","keyTail","lowLevelIndex","keyPathAlias","indexList","keyLength","isVirtual","virtualIndex","_step2","_iterator2","translateRequest","_req$query$index","createVirtualCursor","getObjectDiff","prfx","ap","bp","apTypeName","hooksMiddleware","downCore","downTable","dxTrans","_dxTrans$table$hook","deleting","creating","updating","addPutOrDelete","deleteNextChunk","deleteRange","getEffectiveKeys","effectiveKeys","getExistingValues","existingValues","contexts","existingValue","generatedPrimaryKey","objectDiff","additionalChanges","requestedValue","_ref31","_ref32","NaN","getFromTransactionCache","cacheExistingValuesMiddleware","cachedResult","isEmptyRange","node","RangeSet","fromOrTree","to","d","addRange","left","right","r","rebalance","rightWasCutOff","mergeRanges","newSet","_addRangeSet","_ref33","rangesOverlap","rangeSet1","rangeSet2","i1","getRangeSetIterator","nextResult1","i2","nextResult2","keyProvided","up","_b","rootClone","oldRootRight","computeDepth","_ref34","rangeSet","addKey","addKeys","_this22","observabilityMiddleware","FULL_RANGE","tableClone","mutatedParts","getRangeSet","part","pkRangeSet","delsRangeSet","_ref35","_ref36","newObjs","oldCache","oldObjs","addAffectedIndex","addKeyOrKeys","oldKey","newKey","trackAffectedIndexes","getRange","_ref37","_ref37$query","readSubscribers","method","subscr","_readSubscribers$meth","_readSubscribers$meth2","queriedIndex","queriedRanges","keysPromise","_ref38","resultingKeys","pKeys","wantValues","pkey","_this23","deps","dependencies","cancelOpen","bSticky","keyRangeGenerator","keyRange","whereCtx","readingHook","createTableConstructor","_this20","complete","wasActive","createTransactionConstructor","versionNumber","createVersionConstructor","orCollection","_IDBKeyRange","createWhereClauseConstructor","newVersion","use","addon","versionInstance","_this24","_ref39","unuse","_ref40","mw","_this25","hasArguments","doDelete","_this26","_transaction","_this27","idbMode","onlyIfCompatible","SubTransaction","enterTransaction","_whenReady","InvalidTable","symbolObservable","Observable","_subscribe","extendObservabilitySet","liveQuery","querier","observer","closed","accumMuts","currentObs","subscription","mutationListener","querying","startedListening","shouldNotify","doQuery","exec","execute","Dexie","fireLocally","updateParts","wasMe","propagatingLocally","databaseName","exists","getDatabaseNames","_ref28","infos","info","_getDatabaseNames","defineClass","ignoreTransaction","async","generatorFn","spawn","currentTransaction","waitFor","promiseOrFunction","optionalTimeout","delByKeyPath","semVer","maxKey","propagateLocally","accumulatedParts","addEventListener","fireIfVisible","visibilityState","changedParts","BroadcastChannel","bc","postMessage","onmessage","data","localStorage","setItem","trig","random","matchAll","includeUncontrolled","client","parse","newValue","swContainer","serviceWorker","_ref41","domError"],"sourceRoot":""}